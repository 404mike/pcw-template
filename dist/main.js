/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={912:t=>{self,t.exports=function(){"use strict";var t={8952:function(t,e,n){var i=n(4328),r=n(36),o=TypeError;t.exports=function(t){if(i(t))return t;throw new o(r(t)+" is not a function")}},2096:function(t,e,n){var i=n(2424),r=String,o=TypeError;t.exports=function(t){if(i(t))return t;throw new o("Can't set "+r(t)+" as a prototype")}},4764:function(t,e,n){var i=n(9764).charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},6100:function(t,e,n){var i=n(7e3),r=TypeError;t.exports=function(t,e){if(i(e,t))return t;throw new r("Incorrect invocation")}},3951:function(t,e,n){var i=n(1632),r=String,o=TypeError;t.exports=function(t){if(i(t))return t;throw new o(r(t)+" is not an object")}},2504:function(t,e,n){var i=n(4096),r=n(2495),o=n(3556),s=function(t){return function(e,n,s){var a=i(e),l=o(a);if(0===l)return!t&&-1;var c,u=r(s,l);if(t&&n!=n){for(;l>u;)if((c=a[u++])!=c)return!0}else for(;l>u;u++)if((t||u in a)&&a[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},3364:function(t,e,n){var i=n(8992),r=n(1664),o=n(5712),s=n(4356),a=n(3556),l=n(2568),c=r([].push),u=function(t){var e=1===t,n=2===t,r=3===t,u=4===t,h=6===t,d=7===t,p=5===t||h;return function(f,m,g,v){for(var b,y,w=s(f),_=o(w),x=a(_),E=i(m,g),A=0,k=v||l,N=e?k(f,x):n||d?k(f,0):void 0;x>A;A++)if((p||A in _)&&(y=E(b=_[A],A,w),t))if(e)N[A]=y;else if(y)switch(t){case 3:return!0;case 5:return b;case 6:return A;case 2:c(N,b)}else switch(t){case 4:return!1;case 7:c(N,b)}return h?-1:r||u?u:N}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},953:function(t,e,n){var i=n(9957),r=n(9972),o=n(8504),s=r("species");t.exports=function(t){return o>=51||!i((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},1496:function(t,e,n){var i=n(9957);t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){return 1},1)}))}},6728:function(t,e,n){var i=n(3476),r=n(1432),o=TypeError,s=Object.getOwnPropertyDescriptor,a=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(r(t)&&!s(t,"length").writable)throw new o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},6736:function(t,e,n){var i=n(1432),r=n(6072),o=n(1632),s=n(9972)("species"),a=Array;t.exports=function(t){var e;return i(t)&&(e=t.constructor,(r(e)&&(e===a||i(e.prototype))||o(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?a:e}},2568:function(t,e,n){var i=n(6736);t.exports=function(t,e){return new(i(t))(0===e?0:e)}},8696:function(t,e,n){var i=n(3951),r=n(3112);t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(e){r(t,"throw",e)}}},1888:function(t,e,n){var i=n(1664),r=i({}.toString),o=i("".slice);t.exports=function(t){return o(r(t),8,-1)}},4427:function(t,e,n){var i=n(16),r=n(4328),o=n(1888),s=n(9972)("toStringTag"),a=Object,l="Arguments"===o(function(){return arguments}());t.exports=i?o:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=a(t),s))?n:l?o(e):"Object"===(i=o(e))&&r(e.callee)?"Arguments":i}},9968:function(t,e,n){var i=n(5152),r=n(9252),o=n(9444),s=n(8352);t.exports=function(t,e,n){for(var a=r(e),l=s.f,c=o.f,u=0;u<a.length;u++){var h=a[u];i(t,h)||n&&i(n,h)||l(t,h,c(e,h))}}},2272:function(t,e,n){var i=n(9957);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},3336:function(t){t.exports=function(t,e){return{value:t,done:e}}},3440:function(t,e,n){var i=n(3476),r=n(8352),o=n(9728);t.exports=i?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9728:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},92:function(t,e,n){var i=n(3476),r=n(8352),o=n(9728);t.exports=function(t,e,n){i?r.f(t,e,o(0,n)):t[e]=n}},2544:function(t,e,n){var i=n(5312),r=n(8352);t.exports=function(t,e,n){return n.get&&i(n.get,e,{getter:!0}),n.set&&i(n.set,e,{setter:!0}),r.f(t,e,n)}},6076:function(t,e,n){var i=n(4328),r=n(8352),o=n(5312),s=n(4636);t.exports=function(t,e,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:e;if(i(n)&&o(n,c,a),a.global)l?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(t){}l?t[e]=n:r.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},4036:function(t,e,n){var i=n(6076);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},4636:function(t,e,n){var i=n(6420),r=Object.defineProperty;t.exports=function(t,e){try{r(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},3476:function(t,e,n){var i=n(9957);t.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8168:function(t,e,n){var i=n(6420),r=n(1632),o=i.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},4316:function(t){var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},6064:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},8504:function(t,e,n){var i,r,o=n(6420),s=n(6064),a=o.process,l=o.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(r=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=+i[1]),t.exports=r},8256:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6520:function(t,e,n){var i=n(1664),r=Error,o=i("".replace),s=String(new r("zxcasd").stack),a=/\n\s*at [^:]*:[^\n]*/,l=a.test(s);t.exports=function(t,e){if(l&&"string"==typeof t&&!r.prepareStackTrace)for(;e--;)t=o(t,a,"");return t}},3696:function(t,e,n){var i=n(3440),r=n(6520),o=n(9184),s=Error.captureStackTrace;t.exports=function(t,e,n,a){o&&(s?s(t,e):i(t,"stack",r(n,a)))}},9184:function(t,e,n){var i=n(9957),r=n(9728);t.exports=!i((function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",r(1,7)),7!==t.stack)}))},9160:function(t,e,n){var i=n(6420),r=n(9444).f,o=n(3440),s=n(6076),a=n(4636),l=n(9968),c=n(6704);t.exports=function(t,e){var n,u,h,d,p,f=t.target,m=t.global,g=t.stat;if(n=m?i:g?i[f]||a(f,{}):i[f]&&i[f].prototype)for(u in e){if(d=e[u],h=t.dontCallGetSet?(p=r(n,u))&&p.value:n[u],!c(m?u:f+(g?".":"#")+u,t.forced)&&void 0!==h){if(typeof d==typeof h)continue;l(d,h)}(t.sham||h&&h.sham)&&o(d,"sham",!0),s(n,u,d,t)}}},9957:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},7176:function(t,e,n){n(880);var i=n(8448),r=n(6076),o=n(7680),s=n(9957),a=n(9972),l=n(3440),c=a("species"),u=RegExp.prototype;t.exports=function(t,e,n,h){var d=a(t),p=!s((function(){var e={};return e[d]=function(){return 7},7!==""[t](e)})),f=p&&!s((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return e=!0,null},n[d](""),!e}));if(!p||!f||n){var m=/./[d],g=e(d,""[t],(function(t,e,n,r,s){var a=e.exec;return a===o||a===u.exec?p&&!s?{done:!0,value:i(m,e,n,r)}:{done:!0,value:i(t,n,e,r)}:{done:!1}}));r(String.prototype,t,g[0]),r(u,d,g[1])}h&&l(u[d],"sham",!0)}},908:function(t,e,n){var i=n(7332),r=Function.prototype,o=r.apply,s=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(i?s.bind(o):function(){return s.apply(o,arguments)})},8992:function(t,e,n){var i=n(3180),r=n(8952),o=n(7332),s=i(i.bind);t.exports=function(t,e){return r(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},7332:function(t,e,n){var i=n(9957);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},8448:function(t,e,n){var i=n(7332),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},6208:function(t,e,n){var i=n(3476),r=n(5152),o=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,a=r(o,"name"),l=a&&"something"===function(){}.name,c=a&&(!i||i&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},5288:function(t,e,n){var i=n(1664),r=n(8952);t.exports=function(t,e,n){try{return i(r(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}}},3180:function(t,e,n){var i=n(1888),r=n(1664);t.exports=function(t){if("Function"===i(t))return r(t)}},1664:function(t,e,n){var i=n(7332),r=Function.prototype,o=r.call,s=i&&r.bind.bind(o,o);t.exports=i?s:function(t){return function(){return o.apply(t,arguments)}}},5232:function(t,e,n){var i=n(6420),r=n(4328);t.exports=function(t,e){return arguments.length<2?(n=i[t],r(n)?n:void 0):i[t]&&i[t][e];var n}},6752:function(t){t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},4504:function(t,e,n){var i=n(8952),r=n(9760);t.exports=function(t,e){var n=t[e];return r(n)?void 0:i(n)}},6420:function(t,e,n){var i=function(t){return t&&t.Math===Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},5152:function(t,e,n){var i=n(1664),r=n(4356),o=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(r(t),e)}},2560:function(t){t.exports={}},4168:function(t,e,n){var i=n(5232);t.exports=i("document","documentElement")},9888:function(t,e,n){var i=n(3476),r=n(9957),o=n(8168);t.exports=!i&&!r((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},5712:function(t,e,n){var i=n(1664),r=n(9957),o=n(1888),s=Object,a=i("".split);t.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===o(t)?a(t,""):s(t)}:s},7512:function(t,e,n){var i=n(4328),r=n(1632),o=n(4024);t.exports=function(t,e,n){var s,a;return o&&i(s=e.constructor)&&s!==n&&r(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},9112:function(t,e,n){var i=n(1664),r=n(4328),o=n(3976),s=i(Function.toString);r(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},3480:function(t,e,n){var i=n(1632),r=n(3440);t.exports=function(t,e){i(e)&&"cause"in e&&r(t,"cause",e.cause)}},9104:function(t,e,n){var i,r,o,s=n(4288),a=n(6420),l=n(1632),c=n(3440),u=n(5152),h=n(3976),d=n(6504),p=n(2560),f="Object already initialized",m=a.TypeError,g=a.WeakMap;if(s||h.state){var v=h.state||(h.state=new g);v.get=v.get,v.has=v.has,v.set=v.set,i=function(t,e){if(v.has(t))throw new m(f);return e.facade=t,v.set(t,e),e},r=function(t){return v.get(t)||{}},o=function(t){return v.has(t)}}else{var b=d("state");p[b]=!0,i=function(t,e){if(u(t,b))throw new m(f);return e.facade=t,c(t,b,e),e},r=function(t){return u(t,b)?t[b]:{}},o=function(t){return u(t,b)}}t.exports={set:i,get:r,has:o,enforce:function(t){return o(t)?r(t):i(t,{})},getterFor:function(t){return function(e){var n;if(!l(e)||(n=r(e)).type!==t)throw new m("Incompatible receiver, "+t+" required");return n}}}},1432:function(t,e,n){var i=n(1888);t.exports=Array.isArray||function(t){return"Array"===i(t)}},4328:function(t){var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},6072:function(t,e,n){var i=n(1664),r=n(9957),o=n(4328),s=n(4427),a=n(5232),l=n(9112),c=function(){},u=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,d=i(h.exec),p=!h.test(c),f=function(t){if(!o(t))return!1;try{return u(c,[],t),!0}catch(t){return!1}},m=function(t){if(!o(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(h,l(t))}catch(t){return!0}};m.sham=!0,t.exports=!u||r((function(){var t;return f(f.call)||!f(Object)||!f((function(){t=!0}))||t}))?m:f},6704:function(t,e,n){var i=n(9957),r=n(4328),o=/#|\.prototype\./,s=function(t,e){var n=l[a(t)];return n===u||n!==c&&(r(e)?i(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";t.exports=s},9760:function(t){t.exports=function(t){return null==t}},1632:function(t,e,n){var i=n(4328);t.exports=function(t){return"object"==typeof t?null!==t:i(t)}},2424:function(t,e,n){var i=n(1632);t.exports=function(t){return i(t)||null===t}},7048:function(t){t.exports=!1},7728:function(t,e,n){var i=n(5232),r=n(4328),o=n(7e3),s=n(6536),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return r(e)&&o(e.prototype,a(t))}},3112:function(t,e,n){var i=n(8448),r=n(3951),o=n(4504);t.exports=function(t,e,n){var s,a;r(t);try{if(!(s=o(t,"return"))){if("throw"===e)throw n;return n}s=i(s,t)}catch(t){a=!0,s=t}if("throw"===e)throw n;if(a)throw s;return r(s),n}},9724:function(t,e,n){var i=n(8448),r=n(9368),o=n(3440),s=n(4036),a=n(9972),l=n(9104),c=n(4504),u=n(336).IteratorPrototype,h=n(3336),d=n(3112),p=a("toStringTag"),f="IteratorHelper",m="WrapForValidIterator",g=l.set,v=function(t){var e=l.getterFor(t?m:f);return s(r(u),{next:function(){var n=e(this);if(t)return n.nextHandler();try{var i=n.done?void 0:n.nextHandler();return h(i,n.done)}catch(t){throw n.done=!0,t}},return:function(){var n=e(this),r=n.iterator;if(n.done=!0,t){var o=c(r,"return");return o?i(o,r):h(void 0,!0)}if(n.inner)try{d(n.inner.iterator,"normal")}catch(t){return d(r,"throw",t)}return d(r,"normal"),h(void 0,!0)}})},b=v(!0),y=v(!1);o(y,p,"Iterator Helper"),t.exports=function(t,e){var n=function(n,i){i?(i.iterator=n.iterator,i.next=n.next):i=n,i.type=e?m:f,i.nextHandler=t,i.counter=0,i.done=!1,g(this,i)};return n.prototype=e?b:y,n}},5792:function(t,e,n){var i=n(8448),r=n(8952),o=n(3951),s=n(6752),a=n(9724),l=n(8696),c=a((function(){var t=this.iterator,e=o(i(this.next,t));if(!(this.done=!!e.done))return l(t,this.mapper,[e.value,this.counter++],!0)}));t.exports=function(t){return o(this),r(t),new c(s(this),{mapper:t})}},336:function(t,e,n){var i,r,o,s=n(9957),a=n(4328),l=n(1632),c=n(9368),u=n(7796),h=n(6076),d=n(9972),p=n(7048),f=d("iterator"),m=!1;[].keys&&("next"in(o=[].keys())?(r=u(u(o)))!==Object.prototype&&(i=r):m=!0),!l(i)||s((function(){var t={};return i[f].call(t)!==t}))?i={}:p&&(i=c(i)),a(i[f])||h(i,f,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:m}},3556:function(t,e,n){var i=n(7584);t.exports=function(t){return i(t.length)}},5312:function(t,e,n){var i=n(1664),r=n(9957),o=n(4328),s=n(5152),a=n(3476),l=n(6208).CONFIGURABLE,c=n(9112),u=n(9104),h=u.enforce,d=u.get,p=String,f=Object.defineProperty,m=i("".slice),g=i("".replace),v=i([].join),b=a&&!r((function(){return 8!==f((function(){}),"length",{value:8}).length})),y=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===m(p(e),0,7)&&(e="["+g(p(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||l&&t.name!==e)&&(a?f(t,"name",{value:e,configurable:!0}):t.name=e),b&&n&&s(n,"arity")&&t.length!==n.arity&&f(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var i=h(t);return s(i,"source")||(i.source=v(y,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return o(this)&&d(this).source||c(this)}),"toString")},1748:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?n:e)(i)}},8948:function(t,e,n){var i=n(5016);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:i(t)}},9292:function(t,e,n){var i=n(3476),r=n(1664),o=n(8448),s=n(9957),a=n(1531),l=n(9392),c=n(8912),u=n(4356),h=n(5712),d=Object.assign,p=Object.defineProperty,f=r([].concat);t.exports=!d||s((function(){if(i&&1!==d({b:1},d(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!==d({},t)[n]||a(d({},e)).join("")!==r}))?function(t,e){for(var n=u(t),r=arguments.length,s=1,d=l.f,p=c.f;r>s;)for(var m,g=h(arguments[s++]),v=d?f(a(g),d(g)):a(g),b=v.length,y=0;b>y;)m=v[y++],i&&!o(p,g,m)||(n[m]=g[m]);return n}:d},9368:function(t,e,n){var i,r=n(3951),o=n(2056),s=n(8256),a=n(2560),l=n(4168),c=n(8168),u=n(6504),h="prototype",d="script",p=u("IE_PROTO"),f=function(){},m=function(t){return"<"+d+">"+t+"</"+d+">"},g=function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;v="undefined"!=typeof document?document.domain&&i?g(i):(e=c("iframe"),n="java"+d+":",e.style.display="none",l.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(m("document.F=Object")),t.close(),t.F):g(i);for(var r=s.length;r--;)delete v[h][s[r]];return v()};a[p]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(f[h]=r(t),n=new f,f[h]=null,n[p]=t):n=v(),void 0===e?n:o.f(n,e)}},2056:function(t,e,n){var i=n(3476),r=n(1576),o=n(8352),s=n(3951),a=n(4096),l=n(1531);e.f=i&&!r?Object.defineProperties:function(t,e){s(t);for(var n,i=a(e),r=l(e),c=r.length,u=0;c>u;)o.f(t,n=r[u++],i[n]);return t}},8352:function(t,e,n){var i=n(3476),r=n(9888),o=n(1576),s=n(3951),a=n(88),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",p="writable";e.f=i?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&p in n&&!n[p]){var i=u(t,e);i&&i[p]&&(t[e]=n.value,n={configurable:d in n?n[d]:i[d],enumerable:h in n?n[h]:i[h],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(s(t),e=a(e),s(n),r)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},9444:function(t,e,n){var i=n(3476),r=n(8448),o=n(8912),s=n(9728),a=n(4096),l=n(88),c=n(5152),u=n(9888),h=Object.getOwnPropertyDescriptor;e.f=i?h:function(t,e){if(t=a(t),e=l(e),u)try{return h(t,e)}catch(t){}if(c(t,e))return s(!r(o.f,t,e),t[e])}},5048:function(t,e,n){var i=n(9008),r=n(8256).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},9392:function(t,e){e.f=Object.getOwnPropertySymbols},7796:function(t,e,n){var i=n(5152),r=n(4328),o=n(4356),s=n(6504),a=n(2272),l=s("IE_PROTO"),c=Object,u=c.prototype;t.exports=a?c.getPrototypeOf:function(t){var e=o(t);if(i(e,l))return e[l];var n=e.constructor;return r(n)&&e instanceof n?n.prototype:e instanceof c?u:null}},7e3:function(t,e,n){var i=n(1664);t.exports=i({}.isPrototypeOf)},9008:function(t,e,n){var i=n(1664),r=n(5152),o=n(4096),s=n(2504).indexOf,a=n(2560),l=i([].push);t.exports=function(t,e){var n,i=o(t),c=0,u=[];for(n in i)!r(a,n)&&r(i,n)&&l(u,n);for(;e.length>c;)r(i,n=e[c++])&&(~s(u,n)||l(u,n));return u}},1531:function(t,e,n){var i=n(9008),r=n(8256);t.exports=Object.keys||function(t){return i(t,r)}},8912:function(t,e){var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);e.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},4024:function(t,e,n){var i=n(5288),r=n(3951),o=n(2096);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=i(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return r(n),o(i),e?t(n,i):n.__proto__=i,n}}():void 0)},7032:function(t,e,n){var i=n(16),r=n(4427);t.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},2104:function(t,e,n){var i=n(8448),r=n(4328),o=n(1632),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&r(n=t.toString)&&!o(a=i(n,t)))return a;if(r(n=t.valueOf)&&!o(a=i(n,t)))return a;if("string"!==e&&r(n=t.toString)&&!o(a=i(n,t)))return a;throw new s("Can't convert object to primitive value")}},9252:function(t,e,n){var i=n(5232),r=n(1664),o=n(5048),s=n(9392),a=n(3951),l=r([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?l(e,n(t)):e}},584:function(t,e,n){var i=n(8352).f;t.exports=function(t,e,n){n in t||i(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},9092:function(t,e,n){var i=n(8448),r=n(3951),o=n(4328),s=n(1888),a=n(7680),l=TypeError;t.exports=function(t,e){var n=t.exec;if(o(n)){var c=i(n,t,e);return null!==c&&r(c),c}if("RegExp"===s(t))return i(a,t,e);throw new l("RegExp#exec called on incompatible receiver")}},7680:function(t,e,n){var i,r,o=n(8448),s=n(1664),a=n(5016),l=n(8872),c=n(3548),u=n(4696),h=n(9368),d=n(9104).get,p=n(8e3),f=n(9124),m=u("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,v=g,b=s("".charAt),y=s("".indexOf),w=s("".replace),_=s("".slice),x=(r=/b*/g,o(g,i=/a/,"a"),o(g,r,"a"),0!==i.lastIndex||0!==r.lastIndex),E=c.BROKEN_CARET,A=void 0!==/()??/.exec("")[1];(x||A||E||p||f)&&(v=function(t){var e,n,i,r,s,c,u,p=this,f=d(p),k=a(t),N=f.raw;if(N)return N.lastIndex=p.lastIndex,e=o(v,N,k),p.lastIndex=N.lastIndex,e;var C=f.groups,S=E&&p.sticky,T=o(l,p),L=p.source,O=0,I=k;if(S&&(T=w(T,"y",""),-1===y(T,"g")&&(T+="g"),I=_(k,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==b(k,p.lastIndex-1))&&(L="(?: "+L+")",I=" "+I,O++),n=new RegExp("^(?:"+L+")",T)),A&&(n=new RegExp("^"+L+"$(?!\\s)",T)),x&&(i=p.lastIndex),r=o(g,S?n:p,I),S?r?(r.input=_(r.input,O),r[0]=_(r[0],O),r.index=p.lastIndex,p.lastIndex+=r[0].length):p.lastIndex=0:x&&r&&(p.lastIndex=p.global?r.index+r[0].length:i),A&&r&&r.length>1&&o(m,r[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r&&C)for(r.groups=c=h(null),s=0;s<C.length;s++)c[(u=C[s])[0]]=r[u[1]];return r}),t.exports=v},8872:function(t,e,n){var i=n(3951);t.exports=function(){var t=i(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},3548:function(t,e,n){var i=n(9957),r=n(6420).RegExp,o=i((function(){var t=r("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),s=o||i((function(){return!r("a","y").sticky})),a=o||i((function(){var t=r("^r","gy");return t.lastIndex=2,null!==t.exec("str")}));t.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},8e3:function(t,e,n){var i=n(9957),r=n(6420).RegExp;t.exports=i((function(){var t=r(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)}))},9124:function(t,e,n){var i=n(9957),r=n(6420).RegExp;t.exports=i((function(){var t=r("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},5436:function(t,e,n){var i=n(9760),r=TypeError;t.exports=function(t){if(i(t))throw new r("Can't call method on "+t);return t}},6504:function(t,e,n){var i=n(4696),r=n(7776),o=i("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},3976:function(t,e,n){var i=n(7048),r=n(6420),o=n(4636),s="__core-js_shared__",a=t.exports=r[s]||o(s,{});(a.versions||(a.versions=[])).push({version:"3.36.0",mode:i?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.0/LICENSE",source:"https://github.com/zloirock/core-js"})},4696:function(t,e,n){var i=n(3976);t.exports=function(t,e){return i[t]||(i[t]=e||{})}},9764:function(t,e,n){var i=n(1664),r=n(6180),o=n(5016),s=n(5436),a=i("".charAt),l=i("".charCodeAt),c=i("".slice),u=function(t){return function(e,n){var i,u,h=o(s(e)),d=r(n),p=h.length;return d<0||d>=p?t?"":void 0:(i=l(h,d))<55296||i>56319||d+1===p||(u=l(h,d+1))<56320||u>57343?t?a(h,d):i:t?c(h,d,d+2):u-56320+(i-55296<<10)+65536}};t.exports={codeAt:u(!1),charAt:u(!0)}},772:function(t,e,n){var i=n(8504),r=n(9957),o=n(6420).String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},2495:function(t,e,n){var i=n(6180),r=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):o(n,e)}},4096:function(t,e,n){var i=n(5712),r=n(5436);t.exports=function(t){return i(r(t))}},6180:function(t,e,n){var i=n(1748);t.exports=function(t){var e=+t;return e!=e||0===e?0:i(e)}},7584:function(t,e,n){var i=n(6180),r=Math.min;t.exports=function(t){var e=i(t);return e>0?r(e,9007199254740991):0}},4356:function(t,e,n){var i=n(5436),r=Object;t.exports=function(t){return r(i(t))}},7024:function(t,e,n){var i=n(8448),r=n(1632),o=n(7728),s=n(4504),a=n(2104),l=n(9972),c=TypeError,u=l("toPrimitive");t.exports=function(t,e){if(!r(t)||o(t))return t;var n,l=s(t,u);if(l){if(void 0===e&&(e="default"),n=i(l,t,e),!r(n)||o(n))return n;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},88:function(t,e,n){var i=n(7024),r=n(7728);t.exports=function(t){var e=i(t,"string");return r(e)?e:e+""}},16:function(t,e,n){var i={};i[n(9972)("toStringTag")]="z",t.exports="[object z]"===String(i)},5016:function(t,e,n){var i=n(4427),r=String;t.exports=function(t){if("Symbol"===i(t))throw new TypeError("Cannot convert a Symbol value to a string");return r(t)}},36:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},7776:function(t,e,n){var i=n(1664),r=0,o=Math.random(),s=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++r+o,36)}},6536:function(t,e,n){var i=n(772);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},1576:function(t,e,n){var i=n(3476),r=n(9957);t.exports=i&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4288:function(t,e,n){var i=n(6420),r=n(4328),o=i.WeakMap;t.exports=r(o)&&/native code/.test(String(o))},9972:function(t,e,n){var i=n(6420),r=n(4696),o=n(5152),s=n(7776),a=n(772),l=n(6536),c=i.Symbol,u=r("wks"),h=l?c.for||c:c&&c.withoutSetter||s;t.exports=function(t){return o(u,t)||(u[t]=a&&o(c,t)?c[t]:h("Symbol."+t)),u[t]}},6488:function(t,e,n){var i=n(5232),r=n(5152),o=n(3440),s=n(7e3),a=n(4024),l=n(9968),c=n(584),u=n(7512),h=n(8948),d=n(3480),p=n(3696),f=n(3476),m=n(7048);t.exports=function(t,e,n,g){var v="stackTraceLimit",b=g?2:1,y=t.split("."),w=y[y.length-1],_=i.apply(null,y);if(_){var x=_.prototype;if(!m&&r(x,"cause")&&delete x.cause,!n)return _;var E=i("Error"),A=e((function(t,e){var n=h(g?e:t,void 0),i=g?new _(t):new _;return void 0!==n&&o(i,"message",n),p(i,A,i.stack,2),this&&s(x,this)&&u(i,this,A),arguments.length>b&&d(i,arguments[b]),i}));if(A.prototype=x,"Error"!==w?a?a(A,E):l(A,E,{name:!0}):f&&v in _&&(c(A,_,v),c(A,_,"prepareStackTrace")),l(A,_),!m)try{x.name!==w&&o(x,"name",w),x.constructor=A}catch(t){}return A}}},7476:function(t,e,n){var i=n(9160),r=n(9957),o=n(1432),s=n(1632),a=n(4356),l=n(3556),c=n(4316),u=n(92),h=n(2568),d=n(953),p=n(9972),f=n(8504),m=p("isConcatSpreadable"),g=f>=51||!r((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),v=function(t){if(!s(t))return!1;var e=t[m];return void 0!==e?!!e:o(t)};i({target:"Array",proto:!0,arity:1,forced:!g||!d("concat")},{concat:function(t){var e,n,i,r,o,s=a(this),d=h(s,0),p=0;for(e=-1,i=arguments.length;e<i;e++)if(v(o=-1===e?s:arguments[e]))for(r=l(o),c(p+r),n=0;n<r;n++,p++)n in o&&u(d,p,o[n]);else c(p+1),u(d,p++,o);return d.length=p,d}})},6932:function(t,e,n){var i=n(9160),r=n(3364).filter;i({target:"Array",proto:!0,forced:!n(953)("filter")},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},700:function(t,e,n){var i=n(9160),r=n(1664),o=n(5712),s=n(4096),a=n(1496),l=r([].join);i({target:"Array",proto:!0,forced:o!==Object||!a("join",",")},{join:function(t){return l(s(this),void 0===t?",":t)}})},4456:function(t,e,n){var i=n(9160),r=n(3364).map;i({target:"Array",proto:!0,forced:!n(953)("map")},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},4728:function(t,e,n){var i=n(9160),r=n(4356),o=n(3556),s=n(6728),a=n(4316);i({target:"Array",proto:!0,arity:1,forced:n(9957)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=r(this),n=o(e),i=arguments.length;a(n+i);for(var l=0;l<i;l++)e[n]=arguments[l],n++;return s(e,n),n}})},8752:function(t,e,n){var i=n(9160),r=n(6420),o=n(908),s=n(6488),a="WebAssembly",l=r[a],c=7!==new Error("e",{cause:7}).cause,u=function(t,e){var n={};n[t]=s(t,e,c),i({global:!0,constructor:!0,arity:1,forced:c},n)},h=function(t,e){if(l&&l[t]){var n={};n[t]=s(a+"."+t,e,c),i({target:a,stat:!0,constructor:!0,arity:1,forced:c},n)}};u("Error",(function(t){return function(e){return o(t,this,arguments)}})),u("EvalError",(function(t){return function(e){return o(t,this,arguments)}})),u("RangeError",(function(t){return function(e){return o(t,this,arguments)}})),u("ReferenceError",(function(t){return function(e){return o(t,this,arguments)}})),u("SyntaxError",(function(t){return function(e){return o(t,this,arguments)}})),u("TypeError",(function(t){return function(e){return o(t,this,arguments)}})),u("URIError",(function(t){return function(e){return o(t,this,arguments)}})),h("CompileError",(function(t){return function(e){return o(t,this,arguments)}})),h("LinkError",(function(t){return function(e){return o(t,this,arguments)}})),h("RuntimeError",(function(t){return function(e){return o(t,this,arguments)}}))},508:function(t,e,n){var i=n(3476),r=n(6208).EXISTS,o=n(1664),s=n(2544),a=Function.prototype,l=o(a.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(c.exec);i&&!r&&s(a,"name",{configurable:!0,get:function(){try{return u(c,l(this))[1]}catch(t){return""}}})},232:function(t,e,n){var i=n(9160),r=n(9292);i({target:"Object",stat:!0,arity:2,forced:Object.assign!==r},{assign:r})},5443:function(t,e,n){var i=n(16),r=n(6076),o=n(7032);i||r(Object.prototype,"toString",o,{unsafe:!0})},880:function(t,e,n){var i=n(9160),r=n(7680);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},9836:function(t,e,n){var i=n(8448),r=n(7176),o=n(3951),s=n(9760),a=n(7584),l=n(5016),c=n(5436),u=n(4504),h=n(4764),d=n(9092);r("match",(function(t,e,n){return[function(e){var n=c(this),r=s(e)?void 0:u(e,t);return r?i(r,e,n):new RegExp(e)[t](l(n))},function(t){var i=o(this),r=l(t),s=n(e,i,r);if(s.done)return s.value;if(!i.global)return d(i,r);var c=i.unicode;i.lastIndex=0;for(var u,p=[],f=0;null!==(u=d(i,r));){var m=l(u[0]);p[f]=m,""===m&&(i.lastIndex=h(r,a(i.lastIndex),c)),f++}return 0===f?null:p}]}))},3536:function(t,e,n){var i=n(9160),r=n(6420),o=n(6100),s=n(3951),a=n(4328),l=n(7796),c=n(2544),u=n(92),h=n(9957),d=n(5152),p=n(9972),f=n(336).IteratorPrototype,m=n(3476),g=n(7048),v="constructor",b="Iterator",y=p("toStringTag"),w=TypeError,_=r[b],x=g||!a(_)||_.prototype!==f||!h((function(){_({})})),E=function(){if(o(this,f),l(this)===f)throw new w("Abstract class Iterator not directly constructable")},A=function(t,e){m?c(f,t,{configurable:!0,get:function(){return e},set:function(e){if(s(this),this===f)throw new w("You can't redefine this property");d(this,t)?this[t]=e:u(this,t,e)}}):f[t]=e};d(f,y)||A(y,b),!x&&d(f,v)&&f[v]!==Object||A(v,E),E.prototype=f,i({global:!0,constructor:!0,forced:x},{Iterator:E})},2144:function(t,e,n){var i=n(9160),r=n(8448),o=n(8952),s=n(3951),a=n(6752),l=n(9724),c=n(8696),u=n(7048),h=l((function(){for(var t,e,n=this.iterator,i=this.predicate,o=this.next;;){if(t=s(r(o,n)),this.done=!!t.done)return;if(e=t.value,c(n,i,[e,this.counter++],!0))return e}}));i({target:"Iterator",proto:!0,real:!0,forced:u},{filter:function(t){return s(this),o(t),new h(a(this),{predicate:t})}})},9080:function(t,e,n){var i=n(9160),r=n(5792);i({target:"Iterator",proto:!0,real:!0,forced:n(7048)},{map:r})}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var i={};return function(){n.d(i,{default:function(){return V}}),n(8752),n(6932),n(4456),n(508),n(232),n(5443),n(3536),n(2144),n(9080);var t=function(){},e={},r=[],o=[];function s(n,i){var s,a,l,c,u=o;for(c=arguments.length;c-- >2;)r.push(arguments[c]);for(i&&null!=i.children&&(r.length||r.push(i.children),delete i.children);r.length;)if((a=r.pop())&&void 0!==a.pop)for(c=a.length;c--;)r.push(a[c]);else"boolean"==typeof a&&(a=null),(l="function"!=typeof n)&&(null==a?a="":"number"==typeof a?a=String(a):"string"!=typeof a&&(l=!1)),l&&s?u[u.length-1]+=a:u===o?u=[a]:u.push(a),s=l;var h=new t;return h.nodeName=n,h.children=u,h.attributes=null==i?void 0:i,h.key=null==i?void 0:i.key,void 0!==e.vnode&&e.vnode(h),h}function a(t,e){for(var n in e)t[n]=e[n];return t}function l(t,e){t&&("function"==typeof t?t(e):t.current=e)}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,u=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,h=[];function d(t){!t._dirty&&(t._dirty=!0)&&1==h.push(t)&&(e.debounceRendering||c)(p)}function p(){for(var t;t=h.pop();)t._dirty&&M(t)}function f(t,e,n){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&m(t,e.nodeName):n||t._componentConstructor===e.nodeName}function m(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function g(t){var e=a({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var i in n)void 0===e[i]&&(e[i]=n[i]);return e}function v(t){var e=t.parentNode;e&&e.removeChild(t)}function b(t,e,n,i,r){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)l(n,null),l(i,t);else if("class"!==e||r)if("style"===e){if(i&&"string"!=typeof i&&"string"!=typeof n||(t.style.cssText=i||""),i&&"object"==typeof i){if("string"!=typeof n)for(var o in n)o in i||(t.style[o]="");for(var o in i)t.style[o]="number"==typeof i[o]&&!1===u.test(o)?i[o]+"px":i[o]}}else if("dangerouslySetInnerHTML"===e)i&&(t.innerHTML=i.__html||"");else if("o"==e[0]&&"n"==e[1]){var s=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),i?n||t.addEventListener(e,y,s):t.removeEventListener(e,y,s),(t._listeners||(t._listeners={}))[e]=i}else if("list"!==e&&"type"!==e&&!r&&e in t){try{t[e]=null==i?"":i}catch(t){}null!=i&&!1!==i||"spellcheck"==e||t.removeAttribute(e)}else{var a=r&&e!==(e=e.replace(/^xlink:?/,""));null==i||!1===i?a?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof i&&(a?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),i):t.setAttribute(e,i))}else t.className=i||""}function y(t){return this._listeners[t.type](e.event&&e.event(t)||t)}var w=[],_=0,x=!1,E=!1;function A(){for(var t;t=w.shift();)e.afterMount&&e.afterMount(t),t.componentDidMount&&t.componentDidMount()}function k(t,e,n,i,r,o){_++||(x=null!=r&&void 0!==r.ownerSVGElement,E=null!=t&&!("__preactattr_"in t));var s=N(t,e,n,i,o);return r&&s.parentNode!==r&&r.appendChild(s),--_||(E=!1,o||A()),s}function N(t,e,n,i,r){var o=t,s=x;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||r)?t.nodeValue!=e&&(t.nodeValue=e):(o=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(o,t),C(t,!0))),o.__preactattr_=!0,o;var a,l,c=e.nodeName;if("function"==typeof c)return function(t,e,n,i){for(var r=t&&t._component,o=r,s=t,a=r&&t._componentConstructor===e.nodeName,l=a,c=g(e);r&&!l&&(r=r._parentComponent);)l=r.constructor===e.nodeName;return r&&l&&(!i||r._component)?(I(r,c,3,n,i),t=r.base):(o&&!a&&(q(o),t=s=null),r=L(e.nodeName,c,n),t&&!r.nextBase&&(r.nextBase=t,s=null),I(r,c,1,n,i),t=r.base,s&&t!==s&&(s._component=null,C(s,!1))),t}(t,e,n,i);if(x="svg"===c||"foreignObject"!==c&&x,c=String(c),(!t||!m(t,c))&&(a=c,(l=x?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)).normalizedNodeName=a,o=l,t)){for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),C(t,!0)}var u=o.firstChild,h=o.__preactattr_,d=e.children;if(null==h){h=o.__preactattr_={};for(var p=o.attributes,y=p.length;y--;)h[p[y].name]=p[y].value}return!E&&d&&1===d.length&&"string"==typeof d[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=d[0]&&(u.nodeValue=d[0]):(d&&d.length||null!=u)&&function(t,e,n,i,r){var o,s,a,l,c,u=t.childNodes,h=[],d={},p=0,m=0,g=u.length,b=0,y=e?e.length:0;if(0!==g)for(var w=0;w<g;w++){var _=u[w],x=_.__preactattr_;null!=(E=y&&x?_._component?_._component.__key:x.key:null)?(p++,d[E]=_):(x||(void 0!==_.splitText?!r||_.nodeValue.trim():r))&&(h[b++]=_)}if(0!==y)for(w=0;w<y;w++){var E;if(c=null,null!=(E=(l=e[w]).key))p&&void 0!==d[E]&&(c=d[E],d[E]=void 0,p--);else if(m<b)for(o=m;o<b;o++)if(void 0!==h[o]&&f(s=h[o],l,r)){c=s,h[o]=void 0,o===b-1&&b--,o===m&&m++;break}c=N(c,l,n,i),a=u[w],c&&c!==t&&c!==a&&(null==a?t.appendChild(c):c===a.nextSibling?v(a):t.insertBefore(c,a))}if(p)for(var w in d)void 0!==d[w]&&C(d[w],!1);for(;m<=b;)void 0!==(c=h[b--])&&C(c,!1)}(o,d,n,i,E||null!=h.dangerouslySetInnerHTML),function(t,e,n){var i;for(i in n)e&&null!=e[i]||null==n[i]||b(t,i,n[i],n[i]=void 0,x);for(i in e)"children"===i||"innerHTML"===i||i in n&&e[i]===("value"===i||"checked"===i?t[i]:n[i])||b(t,i,n[i],n[i]=e[i],x)}(o,e.attributes,h),x=s,o}function C(t,e){var n=t._component;n?q(n):(null!=t.__preactattr_&&l(t.__preactattr_.ref,null),!1!==e&&null!=t.__preactattr_||v(t),S(t))}function S(t){for(t=t.lastChild;t;){var e=t.previousSibling;C(t,!0),t=e}}var T=[];function L(t,e,n){var i,r=T.length;for(t.prototype&&t.prototype.render?(i=new t(e,n),j.call(i,e,n)):((i=new j(e,n)).constructor=t,i.render=O);r--;)if(T[r].constructor===t)return i.nextBase=T[r].nextBase,T.splice(r,1),i;return i}function O(t,e,n){return this.constructor(t,n)}function I(t,n,i,r,o){t._disable||(t._disable=!0,t.__ref=n.ref,t.__key=n.key,delete n.ref,delete n.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||o?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r)),r&&r!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=r),t.prevProps||(t.prevProps=t.props),t.props=n,t._disable=!1,0!==i&&(1!==i&&!1===e.syncComponentUpdates&&t.base?d(t):M(t,1,o)),l(t.__ref,t))}function M(t,n,i,r){if(!t._disable){var o,s,l,c=t.props,u=t.state,h=t.context,d=t.prevProps||c,p=t.prevState||u,f=t.prevContext||h,m=t.base,v=t.nextBase,b=m||v,y=t._component,x=!1,E=f;if(t.constructor.getDerivedStateFromProps&&(u=a(a({},u),t.constructor.getDerivedStateFromProps(c,u)),t.state=u),m&&(t.props=d,t.state=p,t.context=f,2!==n&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(c,u,h)?x=!0:t.componentWillUpdate&&t.componentWillUpdate(c,u,h),t.props=c,t.state=u,t.context=h),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!x){o=t.render(c,u,h),t.getChildContext&&(h=a(a({},h),t.getChildContext())),m&&t.getSnapshotBeforeUpdate&&(E=t.getSnapshotBeforeUpdate(d,p));var N,S,T=o&&o.nodeName;if("function"==typeof T){var O=g(o);(s=y)&&s.constructor===T&&O.key==s.__key?I(s,O,1,h,!1):(N=s,t._component=s=L(T,O,h),s.nextBase=s.nextBase||v,s._parentComponent=t,I(s,O,0,h,!1),M(s,1,i,!0)),S=s.base}else l=b,(N=y)&&(l=t._component=null),(b||1===n)&&(l&&(l._component=null),S=k(l,o,h,i||!m,b&&b.parentNode,!0));if(b&&S!==b&&s!==y){var j=b.parentNode;j&&S!==j&&(j.replaceChild(S,b),N||(b._component=null,C(b,!1)))}if(N&&q(N),t.base=S,S&&!r){for(var D=t,B=t;B=B._parentComponent;)(D=B).base=S;S._component=D,S._componentConstructor=D.constructor}}for(!m||i?w.push(t):x||(t.componentDidUpdate&&t.componentDidUpdate(d,p,E),e.afterUpdate&&e.afterUpdate(t));t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);_||r||A()}}function q(t){e.beforeUnmount&&e.beforeUnmount(t);var n=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var i=t._component;i?q(i):n&&(null!=n.__preactattr_&&l(n.__preactattr_.ref,null),t.nextBase=n,v(n),T.push(t),S(n)),l(t.__ref,null)}function j(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function D(t,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D(t,e)}a(j.prototype,{setState:function(t,e){this.prevState||(this.prevState=this.state),this.state=a(a({},this.state),"function"==typeof t?t(this.state,this.props):t),e&&this._renderCallbacks.push(e),d(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),M(this,2)},render:function(){}}),n(700),n(4728),n(880),n(9836),n(7476);var B=function(t){var e,n;function i(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).state={bump:!1,debounced:!1},e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,D(e,n);var r=i.prototype;return r.componentWillMount=function(){var t,e,n=this;this.debounceStatusUpdate=(t=function(){if(!n.state.debounced){var t=!n.props.isInFocus||n.props.validChoiceMade;n.setState((function(e){return{bump:!e.bump,debounced:!0,silenced:t}}))}},function(){var n=this,i=arguments;clearTimeout(e),e=setTimeout((function(){e=null,t.apply(n,i)}),1400)})},r.componentWillReceiveProps=function(t){t.queryLength,this.setState({debounced:!1})},r.render=function(){var t,e=this.props,n=e.id,i=e.length,r=e.queryLength,o=e.minQueryLength,a=e.selectedOption,l=e.selectedOptionIndex,c=e.tQueryTooShort,u=e.tNoResults,h=e.tSelectedOption,d=e.tResults,p=e.className,f=this.state,m=f.bump,g=f.debounced,v=f.silenced,b=r<o,y=0===i,w=a?h(a,i,l):"";return t=b?c(o):y?u():d(i,w),this.debounceStatusUpdate(),s("div",{className:p,style:{border:"0",clip:"rect(0 0 0 0)",height:"1px",marginBottom:"-1px",marginRight:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},s("div",{id:n+"__status--A",role:"status","aria-atomic":"true","aria-live":"polite"},!v&&g&&m?t:""),s("div",{id:n+"__status--B",role:"status","aria-atomic":"true","aria-live":"polite"},v||!g||m?"":t))},i}(j);B.defaultProps={tQueryTooShort:function(t){return"Type in "+t+" or more characters for results"},tNoResults:function(){return"No search results"},tSelectedOption:function(t,e,n){return t+" "+(n+1)+" of "+e+" is highlighted"},tResults:function(t,e){return t+" "+(1===t?"result":"results")+" "+(1===t?"is":"are")+" available. "+e}};function P(){return P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},P.apply(this,arguments)}function R(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}var $={13:"enter",27:"escape",32:"space",38:"up",40:"down"};function U(){return"undefined"!=typeof navigator&&!(!navigator.userAgent.match(/(iPod|iPhone|iPad)/g)||!navigator.userAgent.match(/AppleWebKit/g))}var z=function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).elementReferences={},n.state={focused:null,hovered:null,menuOpen:!1,options:e.defaultValue?[e.defaultValue]:[],query:e.defaultValue,validChoiceMade:!1,selected:null,ariaHint:!0},n.handleComponentBlur=n.handleComponentBlur.bind(R(n)),n.handleKeyDown=n.handleKeyDown.bind(R(n)),n.handleUpArrow=n.handleUpArrow.bind(R(n)),n.handleDownArrow=n.handleDownArrow.bind(R(n)),n.handleEnter=n.handleEnter.bind(R(n)),n.handlePrintableKey=n.handlePrintableKey.bind(R(n)),n.handleListMouseLeave=n.handleListMouseLeave.bind(R(n)),n.handleOptionBlur=n.handleOptionBlur.bind(R(n)),n.handleOptionClick=n.handleOptionClick.bind(R(n)),n.handleOptionFocus=n.handleOptionFocus.bind(R(n)),n.handleOptionMouseDown=n.handleOptionMouseDown.bind(R(n)),n.handleOptionMouseEnter=n.handleOptionMouseEnter.bind(R(n)),n.handleInputBlur=n.handleInputBlur.bind(R(n)),n.handleInputChange=n.handleInputChange.bind(R(n)),n.handleInputClick=n.handleInputClick.bind(R(n)),n.handleInputFocus=n.handleInputFocus.bind(R(n)),n.pollInputElement=n.pollInputElement.bind(R(n)),n.getDirectInputChanges=n.getDirectInputChanges.bind(R(n)),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,F(e,n);var r=i.prototype;return r.isQueryAnOption=function(t,e){var n=this;return-1!==e.map((function(t){return n.templateInputValue(t).toLowerCase()})).indexOf(t.toLowerCase())},r.componentDidMount=function(){this.pollInputElement()},r.componentWillUnmount=function(){clearTimeout(this.$pollInput)},r.pollInputElement=function(){var t=this;this.getDirectInputChanges(),this.$pollInput=setTimeout((function(){t.pollInputElement()}),100)},r.getDirectInputChanges=function(){var t=this.elementReferences[-1];t&&t.value!==this.state.query&&this.handleInputChange({target:{value:t.value}})},r.componentDidUpdate=function(t,e){var n=this.state.focused,i=null===n,r=e.focused!==n;r&&!i&&this.elementReferences[n].focus();var o=-1===n,s=r&&null===e.focused;if(o&&s){var a=this.elementReferences[n];a.setSelectionRange(0,a.value.length)}},r.hasAutoselect=function(){return!U()&&this.props.autoselect},r.templateInputValue=function(t){var e=this.props.templates&&this.props.templates.inputValue;return e?e(t):t},r.templateSuggestion=function(t){var e=this.props.templates&&this.props.templates.suggestion;return e?e(t):t},r.handleComponentBlur=function(t){var e,n=this.state,i=n.options,r=n.query,o=n.selected;this.props.confirmOnBlur?(e=t.query||r,this.props.onConfirm(i[o])):e=r,this.setState({focused:null,menuOpen:t.menuOpen||!1,query:e,selected:null,validChoiceMade:this.isQueryAnOption(e,i)})},r.handleListMouseLeave=function(t){this.setState({hovered:null})},r.handleOptionBlur=function(t,e){var n=this.state,i=n.focused,r=n.menuOpen,o=n.options,s=n.selected,a=null===t.relatedTarget,l=t.relatedTarget===this.elementReferences[-1],c=i!==e&&-1!==i;if(!c&&a||!c&&!l){var u=r&&U();this.handleComponentBlur({menuOpen:u,query:this.templateInputValue(o[s])})}},r.handleInputBlur=function(t){var e=this.state,n=e.focused,i=e.menuOpen,r=e.options,o=e.query,s=e.selected;if(-1===n){var a=i&&U(),l=U()?o:this.templateInputValue(r[s]);this.handleComponentBlur({menuOpen:a,query:l})}},r.handleInputChange=function(t){var e=this,n=this.props,i=n.minLength,r=n.source,o=n.showAllValues,s=this.hasAutoselect(),a=t.target.value,l=0===a.length,c=this.state.query!==a,u=a.length>=i;this.setState({query:a,ariaHint:l}),o||!l&&c&&u?r(a,(function(t){var n=t.length>0;e.setState({menuOpen:n,options:t,selected:s&&n?0:-1,validChoiceMade:!1})})):!l&&u||this.setState({menuOpen:!1,options:[]})},r.handleInputClick=function(t){this.handleInputChange(t)},r.handleInputFocus=function(t){var e=this.state,n=e.query,i=e.validChoiceMade,r=e.options,o=this.props.minLength,s=!i&&n.length>=o&&r.length>0;s?this.setState((function(t){var e=t.menuOpen;return{focused:-1,menuOpen:s||e,selected:-1}})):this.setState({focused:-1})},r.handleOptionFocus=function(t){this.setState({focused:t,hovered:null,selected:t})},r.handleOptionMouseEnter=function(t,e){U()||this.setState({hovered:e})},r.handleOptionClick=function(t,e){var n=this.state.options[e],i=this.templateInputValue(n);this.props.onConfirm(n),this.setState({focused:-1,hovered:null,menuOpen:!1,query:i,selected:-1,validChoiceMade:!0}),this.forceUpdate()},r.handleOptionMouseDown=function(t){t.preventDefault()},r.handleUpArrow=function(t){t.preventDefault();var e=this.state,n=e.menuOpen,i=e.selected;-1!==i&&n&&this.handleOptionFocus(i-1)},r.handleDownArrow=function(t){var e=this;if(t.preventDefault(),this.props.showAllValues&&!1===this.state.menuOpen)t.preventDefault(),this.props.source("",(function(t){e.setState({menuOpen:!0,options:t,selected:0,focused:0,hovered:null})}));else if(!0===this.state.menuOpen){var n=this.state,i=n.menuOpen,r=n.options,o=n.selected;o!==r.length-1&&i&&this.handleOptionFocus(o+1)}},r.handleSpace=function(t){var e=this;this.props.showAllValues&&!1===this.state.menuOpen&&""===this.state.query&&(t.preventDefault(),this.props.source("",(function(t){e.setState({menuOpen:!0,options:t})}))),-1!==this.state.focused&&(t.preventDefault(),this.handleOptionClick(t,this.state.focused))},r.handleEnter=function(t){this.state.menuOpen&&(t.preventDefault(),this.state.selected>=0&&this.handleOptionClick(t,this.state.selected))},r.handlePrintableKey=function(t){var e=this.elementReferences[-1];t.target===e||e.focus()},r.handleKeyDown=function(t){switch($[t.keyCode]){case"up":this.handleUpArrow(t);break;case"down":this.handleDownArrow(t);break;case"space":this.handleSpace(t);break;case"enter":this.handleEnter(t);break;case"escape":this.handleComponentBlur({query:this.state.query});break;default:((e=t.keyCode)>47&&e<58||32===e||8===e||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223)&&this.handlePrintableKey(t)}var e},r.render=function(){var t,e=this,n=this.props,i=n.cssNamespace,r=n.displayMenu,o=n.id,a=n.minLength,l=n.name,c=n.placeholder,u=n.required,h=n.showAllValues,d=n.tNoResults,p=n.tStatusQueryTooShort,f=n.tStatusNoResults,m=n.tStatusSelectedOption,g=n.tStatusResults,v=n.tAssistiveHint,b=n.dropdownArrow,y=n.menuAttributes,w=n.inputClasses,_=n.hintClasses,x=n.menuClasses,E=this.state,A=E.focused,k=E.hovered,N=E.menuOpen,C=E.options,S=E.query,T=E.selected,L=E.ariaHint,O=E.validChoiceMade,I=this.hasAutoselect(),M=-1===A,q=0===C.length,j=0!==S.length,D=S.length>=a,R=this.props.showNoOptionsFound&&M&&q&&j&&D,F=i+"__wrapper",$=i+"__status",z=i+"__dropdown-arrow-down",H=-1!==A&&null!==A,W=i+"__option",V=i+"__hint",K=this.templateInputValue(C[T]),Y=K&&0===K.toLowerCase().indexOf(S.toLowerCase())&&I?S+K.substr(S.length):"",Z=o+"__assistiveHint",X={"aria-describedby":L?Z:null,"aria-expanded":N?"true":"false","aria-activedescendant":H?o+"__option--"+A:null,"aria-owns":o+"__listbox","aria-autocomplete":this.hasAutoselect()?"both":"list"};h&&"string"==typeof(t=b({className:z}))&&(t=s("div",{className:i+"__dropdown-arrow-down-wrapper",dangerouslySetInnerHTML:{__html:t}}));var G=i+"__input",Q=[G,this.props.showAllValues?G+"--show-all-values":G+"--default"];null!==A&&Q.push(G+"--focused"),w&&Q.push(w);var J=i+"__menu",tt=[J,J+"--"+r,J+"--"+(N||R?"visible":"hidden")];x&&tt.push(x),(null!=y&&y.class||null!=y&&y.className)&&tt.push((null==y?void 0:y.class)||(null==y?void 0:y.className));var et=Object.assign({},y,{id:o+"__listbox",role:"listbox",className:tt.join(" "),onMouseLeave:this.handleListMouseLeave});return delete et.class,s("div",{className:F,onKeyDown:this.handleKeyDown},s(B,{id:o,length:C.length,queryLength:S.length,minQueryLength:a,selectedOption:this.templateInputValue(C[T]),selectedOptionIndex:T,validChoiceMade:O,isInFocus:null!==this.state.focused,tQueryTooShort:p,tNoResults:f,tSelectedOption:m,tResults:g,className:$}),Y&&s("span",null,s("input",{className:[V,null===_?w:_].filter(Boolean).join(" "),readonly:!0,tabIndex:"-1",value:Y})),s("input",P({},X,{autoComplete:"off",className:Q.join(" "),id:o,onClick:this.handleInputClick,onBlur:this.handleInputBlur},{onInput:this.handleInputChange},{onFocus:this.handleInputFocus,name:l,placeholder:c,ref:function(t){e.elementReferences[-1]=t},type:"text",role:"combobox",required:u,value:S})),t,s("ul",et,C.map((function(t,n){var i=(-1===A?T===n:A===n)&&null===k?" "+W+"--focused":"",r=n%2?" "+W+"--odd":"",a=U()?"<span id="+o+"__option-suffix--"+n+' style="border:0;clip:rect(0 0 0 0);height:1px;marginBottom:-1px;marginRight:-1px;overflow:hidden;padding:0;position:absolute;whiteSpace:nowrap;width:1px"> '+(n+1)+" of "+C.length+"</span>":"";return s("li",{"aria-selected":A===n?"true":"false",className:""+W+i+r,dangerouslySetInnerHTML:{__html:e.templateSuggestion(t)+a},id:o+"__option--"+n,key:n,onBlur:function(t){return e.handleOptionBlur(t,n)},onClick:function(t){return e.handleOptionClick(t,n)},onMouseDown:e.handleOptionMouseDown,onMouseEnter:function(t){return e.handleOptionMouseEnter(t,n)},ref:function(t){e.elementReferences[n]=t},role:"option",tabIndex:"-1","aria-posinset":n+1,"aria-setsize":C.length})})),R&&s("li",{className:W+" "+W+"--no-results"},d())),s("span",{id:Z,style:{display:"none"}},v()))},i}(j);function H(t){if(!t.element)throw new Error("element is not defined");if(!t.id)throw new Error("id is not defined");if(!t.source)throw new Error("source is not defined");Array.isArray(t.source)&&(t.source=W(t.source)),function(t,e,n){k(n,t,{},!1,e,!1)}(s(z,t),t.element)}z.defaultProps={autoselect:!1,cssNamespace:"autocomplete",defaultValue:"",displayMenu:"inline",minLength:0,name:"input-autocomplete",placeholder:"",onConfirm:function(){},confirmOnBlur:!0,showNoOptionsFound:!0,showAllValues:!1,required:!1,tNoResults:function(){return"No results found"},tAssistiveHint:function(){return"When autocomplete results are available use up and down arrows to review and enter to select.  Touch device users, explore by touch or with swipe gestures."},dropdownArrow:function(t){return s("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t.className,focusable:"false"},s("g",{stroke:"none",fill:"none","fill-rule":"evenodd"},s("polygon",{fill:"#000000",points:"0 0 22 0 11 17"})))},menuAttributes:{},inputClasses:null,hintClasses:null,menuClasses:null};var W=function(t){return function(e,n){n(t.filter((function(t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())})))}};H.enhanceSelectElement=function(t){if(!t.selectElement)throw new Error("selectElement is not defined");if(!t.source){var e=[].filter.call(t.selectElement.options,(function(e){return e.value||t.preserveNullOptions}));t.source=e.map((function(t){return t.textContent||t.innerText}))}if(t.onConfirm=t.onConfirm||function(e){var n=[].filter.call(t.selectElement.options,(function(t){return(t.textContent||t.innerText)===e}))[0];n&&(n.selected=!0)},t.selectElement.value||void 0===t.defaultValue){var n=t.selectElement.options[t.selectElement.options.selectedIndex];t.defaultValue=n.textContent||n.innerText}void 0===t.name&&(t.name=""),void 0===t.id&&(void 0===t.selectElement.id?t.id="":t.id=t.selectElement.id),void 0===t.autoselect&&(t.autoselect=!0);var i=document.createElement("div");t.selectElement.parentNode.insertBefore(i,t.selectElement),H(Object.assign({},t,{element:i})),t.selectElement.style.display="none",t.selectElement.id=t.selectElement.id+"-select"};var V=H}(),i.default}()},17:t=>{"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(e)){if((i=e.length)!=n.length)return!1;for(r=i;0!=r--;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((i=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!=r--;){var s=o[r];if(!t(e[s],n[s]))return!1}return!0}return e!=e&&n!=n}},606:t=>{var e=-1,n=1,i=0;function r(t,m,g,v,b){if(t===m)return t?[[i,t]]:[];if(null!=g){var w=function(t,e,n){var i="number"==typeof n?{index:n,length:0}:n.oldRange,r="number"==typeof n?null:n.newRange,o=t.length,s=e.length;if(0===i.length&&(null===r||0===r.length)){var a=i.index,l=t.slice(0,a),c=t.slice(a),u=r?r.index:null,h=a+s-o;if((null===u||u===h)&&!(h<0||h>s)){var d=e.slice(0,h);if((m=e.slice(h))===c){var p=Math.min(a,h);if((v=l.slice(0,p))===(w=d.slice(0,p)))return y(v,l.slice(p),d.slice(p),c)}}if(null===u||u===a){var f=a,m=(d=e.slice(0,f),e.slice(f));if(d===l){var g=Math.min(o-f,s-f);if((b=c.slice(c.length-g))===(_=m.slice(m.length-g)))return y(l,c.slice(0,c.length-g),m.slice(0,m.length-g),b)}}}if(i.length>0&&r&&0===r.length){var v=t.slice(0,i.index),b=t.slice(i.index+i.length);if(!(s<(p=v.length)+(g=b.length))){var w=e.slice(0,p),_=e.slice(s-g);if(v===w&&b===_)return y(v,t.slice(p,o-g),e.slice(p,s-g),b)}}return null}(t,m,g);if(w)return w}var _=s(t,m),x=t.substring(0,_);_=l(t=t.substring(_),m=m.substring(_));var E=t.substring(t.length-_),A=function(t,a){var c;if(!t)return[[n,a]];if(!a)return[[e,t]];var u=t.length>a.length?t:a,h=t.length>a.length?a:t,d=u.indexOf(h);if(-1!==d)return c=[[n,u.substring(0,d)],[i,h],[n,u.substring(d+h.length)]],t.length>a.length&&(c[0][0]=c[2][0]=e),c;if(1===h.length)return[[e,t],[n,a]];var p=function(t,e){var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;function r(t,e,n){for(var i,r,o,a,c=t.substring(n,n+Math.floor(t.length/4)),u=-1,h="";-1!==(u=e.indexOf(c,u+1));){var d=s(t.substring(n),e.substring(u)),p=l(t.substring(0,n),e.substring(0,u));h.length<p+d&&(h=e.substring(u-p,u)+e.substring(u,u+d),i=t.substring(0,n-p),r=t.substring(n+d),o=e.substring(0,u-p),a=e.substring(u+d))}return 2*h.length>=t.length?[i,r,o,a,h]:null}var o,a,c,u,h,d=r(n,i,Math.ceil(n.length/4)),p=r(n,i,Math.ceil(n.length/2));return d||p?(o=p?d&&d[4].length>p[4].length?d:p:d,t.length>e.length?(a=o[0],c=o[1],u=o[2],h=o[3]):(u=o[0],h=o[1],a=o[2],c=o[3]),[a,c,u,h,o[4]]):null}(t,a);if(p){var f=p[0],m=p[1],g=p[2],v=p[3],b=p[4],y=r(f,g),w=r(m,v);return y.concat([[i,b]],w)}return function(t,i){for(var r=t.length,s=i.length,a=Math.ceil((r+s)/2),l=a,c=2*a,u=new Array(c),h=new Array(c),d=0;d<c;d++)u[d]=-1,h[d]=-1;u[l+1]=0,h[l+1]=0;for(var p=r-s,f=p%2!=0,m=0,g=0,v=0,b=0,y=0;y<a;y++){for(var w=-y+m;w<=y-g;w+=2){for(var _=l+w,x=(C=w===-y||w!==y&&u[_-1]<u[_+1]?u[_+1]:u[_-1]+1)-w;C<r&&x<s&&t.charAt(C)===i.charAt(x);)C++,x++;if(u[_]=C,C>r)g+=2;else if(x>s)m+=2;else if(f&&(k=l+p-w)>=0&&k<c&&-1!==h[k]&&C>=(A=r-h[k]))return o(t,i,C,x)}for(var E=-y+v;E<=y-b;E+=2){for(var A,k=l+E,N=(A=E===-y||E!==y&&h[k-1]<h[k+1]?h[k+1]:h[k-1]+1)-E;A<r&&N<s&&t.charAt(r-A-1)===i.charAt(s-N-1);)A++,N++;if(h[k]=A,A>r)b+=2;else if(N>s)v+=2;else if(!f){var C;if((_=l+p-E)>=0&&_<c&&-1!==u[_])if(x=l+(C=u[_])-_,C>=(A=r-A))return o(t,i,C,x)}}}return[[e,t],[n,i]]}(t,a)}(t=t.substring(0,t.length-_),m=m.substring(0,m.length-_));return x&&A.unshift([i,x]),E&&A.push([i,E]),f(A,b),v&&function(t){for(var r=!1,o=[],s=0,m=null,g=0,v=0,b=0,y=0,w=0;g<t.length;)t[g][0]==i?(o[s++]=g,v=y,b=w,y=0,w=0,m=t[g][1]):(t[g][0]==n?y+=t[g][1].length:w+=t[g][1].length,m&&m.length<=Math.max(v,b)&&m.length<=Math.max(y,w)&&(t.splice(o[s-1],0,[e,m]),t[o[s-1]+1][0]=n,s--,g=--s>0?o[s-1]:-1,v=0,b=0,y=0,w=0,m=null,r=!0)),g++;for(r&&f(t),function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),i=e.charAt(0),r=n.match(c),o=i.match(c),s=r&&n.match(u),a=o&&i.match(u),l=s&&n.match(h),f=a&&i.match(h),m=l&&t.match(d),g=f&&e.match(p);return m||g?5:l||f?4:r&&!s&&a?3:s||a?2:r||o?1:0}for(var n=1;n<t.length-1;){if(t[n-1][0]==i&&t[n+1][0]==i){var r=t[n-1][1],o=t[n][1],s=t[n+1][1],a=l(r,o);if(a){var f=o.substring(o.length-a);r=r.substring(0,r.length-a),o=f+o.substring(0,o.length-a),s=f+s}for(var m=r,g=o,v=s,b=e(r,o)+e(o,s);o.charAt(0)===s.charAt(0);){r+=o.charAt(0),o=o.substring(1)+s.charAt(0),s=s.substring(1);var y=e(r,o)+e(o,s);y>=b&&(b=y,m=r,g=o,v=s)}t[n-1][1]!=m&&(m?t[n-1][1]=m:(t.splice(n-1,1),n--),t[n][1]=g,v?t[n+1][1]=v:(t.splice(n+1,1),n--))}n++}}(t),g=1;g<t.length;){if(t[g-1][0]==e&&t[g][0]==n){var _=t[g-1][1],x=t[g][1],E=a(_,x),A=a(x,_);E>=A?(E>=_.length/2||E>=x.length/2)&&(t.splice(g,0,[i,x.substring(0,E)]),t[g-1][1]=_.substring(0,_.length-E),t[g+1][1]=x.substring(E),g++):(A>=_.length/2||A>=x.length/2)&&(t.splice(g,0,[i,_.substring(0,A)]),t[g-1][0]=n,t[g-1][1]=x.substring(0,x.length-A),t[g+1][0]=e,t[g+1][1]=_.substring(A),g++),g++}g++}}(A),A}function o(t,e,n,i){var o=t.substring(0,n),s=e.substring(0,i),a=t.substring(n),l=e.substring(i),c=r(o,s),u=r(a,l);return c.concat(u)}function s(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(o,r)==e.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return m(t.charCodeAt(r-1))&&r--,r}function a(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;n>i?t=t.substring(n-i):n<i&&(e=e.substring(0,n));var r=Math.min(n,i);if(t==e)return r;for(var o=0,s=1;;){var a=t.substring(r-s),l=e.indexOf(a);if(-1==l)return o;s+=l,0!=l&&t.substring(r-s)!=e.substring(0,s)||(o=s,s++)}}function l(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return g(t.charCodeAt(t.length-r))&&r--,r}var c=/[^a-zA-Z0-9]/,u=/\s/,h=/[\r\n]/,d=/\n\r?\n$/,p=/^\r?\n\r?\n/;function f(t,r){t.push([i,""]);for(var o,a=0,c=0,u=0,h="",d="";a<t.length;)if(a<t.length-1&&!t[a][1])t.splice(a,1);else switch(t[a][0]){case n:u++,d+=t[a][1],a++;break;case e:c++,h+=t[a][1],a++;break;case i:var p=a-u-c-1;if(r){if(p>=0&&b(t[p][1])){var m=t[p][1].slice(-1);if(t[p][1]=t[p][1].slice(0,-1),h=m+h,d=m+d,!t[p][1]){t.splice(p,1),a--;var g=p-1;t[g]&&t[g][0]===n&&(u++,d=t[g][1]+d,g--),t[g]&&t[g][0]===e&&(c++,h=t[g][1]+h,g--),p=g}}v(t[a][1])&&(m=t[a][1].charAt(0),t[a][1]=t[a][1].slice(1),h+=m,d+=m)}if(a<t.length-1&&!t[a][1]){t.splice(a,1);break}if(h.length>0||d.length>0){h.length>0&&d.length>0&&(0!==(o=s(d,h))&&(p>=0?t[p][1]+=d.substring(0,o):(t.splice(0,0,[i,d.substring(0,o)]),a++),d=d.substring(o),h=h.substring(o)),0!==(o=l(d,h))&&(t[a][1]=d.substring(d.length-o)+t[a][1],d=d.substring(0,d.length-o),h=h.substring(0,h.length-o)));var y=u+c;0===h.length&&0===d.length?(t.splice(a-y,y),a-=y):0===h.length?(t.splice(a-y,y,[n,d]),a=a-y+1):0===d.length?(t.splice(a-y,y,[e,h]),a=a-y+1):(t.splice(a-y,y,[e,h],[n,d]),a=a-y+2)}0!==a&&t[a-1][0]===i?(t[a-1][1]+=t[a][1],t.splice(a,1)):a++,u=0,c=0,h="",d=""}""===t[t.length-1][1]&&t.pop();var w=!1;for(a=1;a<t.length-1;)t[a-1][0]===i&&t[a+1][0]===i&&(t[a][1].substring(t[a][1].length-t[a-1][1].length)===t[a-1][1]?(t[a][1]=t[a-1][1]+t[a][1].substring(0,t[a][1].length-t[a-1][1].length),t[a+1][1]=t[a-1][1]+t[a+1][1],t.splice(a-1,1),w=!0):t[a][1].substring(0,t[a+1][1].length)==t[a+1][1]&&(t[a-1][1]+=t[a+1][1],t[a][1]=t[a][1].substring(t[a+1][1].length)+t[a+1][1],t.splice(a+1,1),w=!0)),a++;w&&f(t,r)}function m(t){return t>=55296&&t<=56319}function g(t){return t>=56320&&t<=57343}function v(t){return g(t.charCodeAt(0))}function b(t){return m(t.charCodeAt(t.length-1))}function y(t,r,o,s){return b(t)||v(s)?null:function(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}([[i,t],[e,r],[n,o],[i,s]])}function w(t,e,n,i){return r(t,e,n,i,!0)}w.INSERT=n,w.DELETE=e,w.EQUAL=i,t.exports=w},193:(t,e,n)=>{t=n.nmd(t);var i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",s="[object Boolean]",a="[object Date]",l="[object Function]",c="[object GeneratorFunction]",u="[object Map]",h="[object Number]",d="[object Object]",p="[object Promise]",f="[object RegExp]",m="[object Set]",g="[object String]",v="[object Symbol]",b="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",_="[object Float32Array]",x="[object Float64Array]",E="[object Int8Array]",A="[object Int16Array]",k="[object Int32Array]",N="[object Uint8Array]",C="[object Uint8ClampedArray]",S="[object Uint16Array]",T="[object Uint32Array]",L=/\w*$/,O=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,M={};M[o]=M["[object Array]"]=M[y]=M[w]=M[s]=M[a]=M[_]=M[x]=M[E]=M[A]=M[k]=M[u]=M[h]=M[d]=M[f]=M[m]=M[g]=M[v]=M[N]=M[C]=M[S]=M[T]=!0,M["[object Error]"]=M[l]=M[b]=!1;var q="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,j="object"==typeof self&&self&&self.Object===Object&&self,D=q||j||Function("return this")(),B=e&&!e.nodeType&&e,P=B&&t&&!t.nodeType&&t,R=P&&P.exports===B;function F(t,e){return t.set(e[0],e[1]),t}function $(t,e){return t.add(e),t}function U(t,e,n,i){var r=-1,o=t?t.length:0;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function z(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function H(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function W(t,e){return function(n){return t(e(n))}}function V(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var K,Y=Array.prototype,Z=Function.prototype,X=Object.prototype,G=D["__core-js_shared__"],Q=(K=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+K:"",J=Z.toString,tt=X.hasOwnProperty,et=X.toString,nt=RegExp("^"+J.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),it=R?D.Buffer:void 0,rt=D.Symbol,ot=D.Uint8Array,st=W(Object.getPrototypeOf,Object),at=Object.create,lt=X.propertyIsEnumerable,ct=Y.splice,ut=Object.getOwnPropertySymbols,ht=it?it.isBuffer:void 0,dt=W(Object.keys,Object),pt=Dt(D,"DataView"),ft=Dt(D,"Map"),mt=Dt(D,"Promise"),gt=Dt(D,"Set"),vt=Dt(D,"WeakMap"),bt=Dt(Object,"create"),yt=$t(pt),wt=$t(ft),_t=$t(mt),xt=$t(gt),Et=$t(vt),At=rt?rt.prototype:void 0,kt=At?At.valueOf:void 0;function Nt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Ct(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function St(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Tt(t){this.__data__=new Ct(t)}function Lt(t,e,n){var i=t[e];tt.call(t,e)&&Ut(i,n)&&(void 0!==n||e in t)||(t[e]=n)}function Ot(t,e){for(var n=t.length;n--;)if(Ut(t[n][0],e))return n;return-1}function It(t,e,n,i,r,p,b){var O;if(i&&(O=p?i(t,r,p,b):i(t)),void 0!==O)return O;if(!Kt(t))return t;var I=zt(t);if(I){if(O=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&tt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!e)return function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}(t,O)}else{var q=Pt(t),j=q==l||q==c;if(Wt(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(q==d||q==o||j&&!p){if(z(t))return p?t:{};if(O=function(t){return"function"!=typeof t.constructor||Ft(t)?{}:Kt(e=st(t))?at(e):{};var e}(j?{}:t),!e)return function(t,e){return qt(t,Bt(t),e)}(t,function(t,e){return t&&qt(e,Yt(e),t)}(O,t))}else{if(!M[q])return p?t:{};O=function(t,e,n,i){var r,o=t.constructor;switch(e){case y:return Mt(t);case s:case a:return new o(+t);case w:return function(t,e){var n=e?Mt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,i);case _:case x:case E:case A:case k:case N:case C:case S:case T:return function(t,e){var n=e?Mt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,i);case u:return function(t,e,n){return U(e?n(H(t),!0):H(t),F,new t.constructor)}(t,i,n);case h:case g:return new o(t);case f:return function(t){var e=new t.constructor(t.source,L.exec(t));return e.lastIndex=t.lastIndex,e}(t);case m:return function(t,e,n){return U(e?n(V(t),!0):V(t),$,new t.constructor)}(t,i,n);case v:return r=t,kt?Object(kt.call(r)):{}}}(t,q,It,e)}}b||(b=new Tt);var D=b.get(t);if(D)return D;if(b.set(t,O),!I)var B=n?function(t){return function(t,e,n){var i=e(t);return zt(t)?i:function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}(i,n(t))}(t,Yt,Bt)}(t):Yt(t);return function(t,e){for(var n=-1,i=t?t.length:0;++n<i&&!1!==e(t[n],n););}(B||t,(function(r,o){B&&(r=t[o=r]),Lt(O,o,It(r,e,n,i,o,t,b))})),O}function Mt(t){var e=new t.constructor(t.byteLength);return new ot(e).set(new ot(t)),e}function qt(t,e,n,i){n||(n={});for(var r=-1,o=e.length;++r<o;){var s=e[r],a=i?i(n[s],t[s],s,n,t):void 0;Lt(n,s,void 0===a?t[s]:a)}return n}function jt(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Dt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Kt(t)||(e=t,Q&&Q in e))&&(Vt(t)||z(t)?nt:O).test($t(t));var e}(n)?n:void 0}Nt.prototype.clear=function(){this.__data__=bt?bt(null):{}},Nt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Nt.prototype.get=function(t){var e=this.__data__;if(bt){var n=e[t];return n===i?void 0:n}return tt.call(e,t)?e[t]:void 0},Nt.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:tt.call(e,t)},Nt.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?i:e,this},Ct.prototype.clear=function(){this.__data__=[]},Ct.prototype.delete=function(t){var e=this.__data__,n=Ot(e,t);return!(n<0||(n==e.length-1?e.pop():ct.call(e,n,1),0))},Ct.prototype.get=function(t){var e=this.__data__,n=Ot(e,t);return n<0?void 0:e[n][1]},Ct.prototype.has=function(t){return Ot(this.__data__,t)>-1},Ct.prototype.set=function(t,e){var n=this.__data__,i=Ot(n,t);return i<0?n.push([t,e]):n[i][1]=e,this},St.prototype.clear=function(){this.__data__={hash:new Nt,map:new(ft||Ct),string:new Nt}},St.prototype.delete=function(t){return jt(this,t).delete(t)},St.prototype.get=function(t){return jt(this,t).get(t)},St.prototype.has=function(t){return jt(this,t).has(t)},St.prototype.set=function(t,e){return jt(this,t).set(t,e),this},Tt.prototype.clear=function(){this.__data__=new Ct},Tt.prototype.delete=function(t){return this.__data__.delete(t)},Tt.prototype.get=function(t){return this.__data__.get(t)},Tt.prototype.has=function(t){return this.__data__.has(t)},Tt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Ct){var i=n.__data__;if(!ft||i.length<199)return i.push([t,e]),this;n=this.__data__=new St(i)}return n.set(t,e),this};var Bt=ut?W(ut,Object):function(){return[]},Pt=function(t){return et.call(t)};function Rt(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||I.test(t))&&t>-1&&t%1==0&&t<e}function Ft(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||X)}function $t(t){if(null!=t){try{return J.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ut(t,e){return t===e||t!=t&&e!=e}(pt&&Pt(new pt(new ArrayBuffer(1)))!=w||ft&&Pt(new ft)!=u||mt&&Pt(mt.resolve())!=p||gt&&Pt(new gt)!=m||vt&&Pt(new vt)!=b)&&(Pt=function(t){var e=et.call(t),n=e==d?t.constructor:void 0,i=n?$t(n):void 0;if(i)switch(i){case yt:return w;case wt:return u;case _t:return p;case xt:return m;case Et:return b}return e});var zt=Array.isArray;function Ht(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!Vt(t)}var Wt=ht||function(){return!1};function Vt(t){var e=Kt(t)?et.call(t):"";return e==l||e==c}function Kt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Yt(t){return Ht(t)?function(t,e){var n=zt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Ht(t)}(t)&&tt.call(t,"callee")&&(!lt.call(t,"callee")||et.call(t)==o)}(t)?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],i=n.length,r=!!i;for(var s in t)!e&&!tt.call(t,s)||r&&("length"==s||Rt(s,i))||n.push(s);return n}(t):function(t){if(!Ft(t))return dt(t);var e=[];for(var n in Object(t))tt.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}t.exports=function(t){return It(t,!0,!0)}},142:(t,e,n)=>{t=n.nmd(t);var i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",h="[object Date]",d="[object Error]",p="[object Function]",f="[object GeneratorFunction]",m="[object Map]",g="[object Number]",v="[object Null]",b="[object Object]",y="[object Promise]",w="[object Proxy]",_="[object RegExp]",x="[object Set]",E="[object String]",A="[object Undefined]",k="[object WeakMap]",N="[object ArrayBuffer]",C="[object DataView]",S=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,L={};L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L[a]=L[l]=L[N]=L[u]=L[C]=L[h]=L[d]=L[p]=L[m]=L[g]=L[b]=L[_]=L[x]=L[E]=L[k]=!1;var O="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,I="object"==typeof self&&self&&self.Object===Object&&self,M=O||I||Function("return this")(),q=e&&!e.nodeType&&e,j=q&&t&&!t.nodeType&&t,D=j&&j.exports===q,B=D&&O.process,P=function(){try{return B&&B.binding&&B.binding("util")}catch(t){}}(),R=P&&P.isTypedArray;function F(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function $(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function U(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var z,H,W,V=Array.prototype,K=Function.prototype,Y=Object.prototype,Z=M["__core-js_shared__"],X=K.toString,G=Y.hasOwnProperty,Q=(z=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",J=Y.toString,tt=RegExp("^"+X.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=D?M.Buffer:void 0,nt=M.Symbol,it=M.Uint8Array,rt=Y.propertyIsEnumerable,ot=V.splice,st=nt?nt.toStringTag:void 0,at=Object.getOwnPropertySymbols,lt=et?et.isBuffer:void 0,ct=(H=Object.keys,W=Object,function(t){return H(W(t))}),ut=jt(M,"DataView"),ht=jt(M,"Map"),dt=jt(M,"Promise"),pt=jt(M,"Set"),ft=jt(M,"WeakMap"),mt=jt(Object,"create"),gt=Rt(ut),vt=Rt(ht),bt=Rt(dt),yt=Rt(pt),wt=Rt(ft),_t=nt?nt.prototype:void 0,xt=_t?_t.valueOf:void 0;function Et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function At(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function kt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Nt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new kt;++e<n;)this.add(t[e])}function Ct(t){var e=this.__data__=new At(t);this.size=e.size}function St(t,e){for(var n=t.length;n--;)if(Ft(t[n][0],e))return n;return-1}function Tt(t){return null==t?void 0===t?A:v:st&&st in Object(t)?function(t){var e=G.call(t,st),n=t[st];try{t[st]=void 0;var i=!0}catch(t){}var r=J.call(t);return i&&(e?t[st]=n:delete t[st]),r}(t):function(t){return J.call(t)}(t)}function Lt(t){return Kt(t)&&Tt(t)==a}function Ot(t,e,n,i,s){return t===e||(null==t||null==e||!Kt(t)&&!Kt(e)?t!=t&&e!=e:function(t,e,n,i,s,c){var p=Ut(t),f=Ut(e),v=p?l:Bt(t),y=f?l:Bt(e),w=(v=v==a?b:v)==b,A=(y=y==a?b:y)==b,k=v==y;if(k&&zt(t)){if(!zt(e))return!1;p=!0,w=!1}if(k&&!w)return c||(c=new Ct),p||Yt(t)?It(t,e,n,i,s,c):function(t,e,n,i,s,a,l){switch(n){case C:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case N:return!(t.byteLength!=e.byteLength||!a(new it(t),new it(e)));case u:case h:case g:return Ft(+t,+e);case d:return t.name==e.name&&t.message==e.message;case _:case E:return t==e+"";case m:var c=$;case x:var p=i&r;if(c||(c=U),t.size!=e.size&&!p)return!1;var f=l.get(t);if(f)return f==e;i|=o,l.set(t,e);var v=It(c(t),c(e),i,s,a,l);return l.delete(t),v;case"[object Symbol]":if(xt)return xt.call(t)==xt.call(e)}return!1}(t,e,v,n,i,s,c);if(!(n&r)){var S=w&&G.call(t,"__wrapped__"),T=A&&G.call(e,"__wrapped__");if(S||T){var L=S?t.value():t,O=T?e.value():e;return c||(c=new Ct),s(L,O,n,i,c)}}return!!k&&(c||(c=new Ct),function(t,e,n,i,o,s){var a=n&r,l=Mt(t),c=l.length;if(c!=Mt(e).length&&!a)return!1;for(var u=c;u--;){var h=l[u];if(!(a?h in e:G.call(e,h)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var p=!0;s.set(t,e),s.set(e,t);for(var f=a;++u<c;){var m=t[h=l[u]],g=e[h];if(i)var v=a?i(g,m,h,e,t,s):i(m,g,h,t,e,s);if(!(void 0===v?m===g||o(m,g,n,i,s):v)){p=!1;break}f||(f="constructor"==h)}if(p&&!f){var b=t.constructor,y=e.constructor;b==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,i,s,c))}(t,e,n,i,Ot,s))}function It(t,e,n,i,s,a){var l=n&r,c=t.length,u=e.length;if(c!=u&&!(l&&u>c))return!1;var h=a.get(t);if(h&&a.get(e))return h==e;var d=-1,p=!0,f=n&o?new Nt:void 0;for(a.set(t,e),a.set(e,t);++d<c;){var m=t[d],g=e[d];if(i)var v=l?i(g,m,d,e,t,a):i(m,g,d,t,e,a);if(void 0!==v){if(v)continue;p=!1;break}if(f){if(!F(e,(function(t,e){if(r=e,!f.has(r)&&(m===t||s(m,t,n,i,a)))return f.push(e);var r}))){p=!1;break}}else if(m!==g&&!s(m,g,n,i,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function Mt(t){return function(t,e,n){var i=e(t);return Ut(t)?i:function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}(i,n(t))}(t,Zt,Dt)}function qt(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function jt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Vt(t)||function(t){return!!Q&&Q in t}(t))&&(Ht(t)?tt:S).test(Rt(t))}(n)?n:void 0}Et.prototype.clear=function(){this.__data__=mt?mt(null):{},this.size=0},Et.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Et.prototype.get=function(t){var e=this.__data__;if(mt){var n=e[t];return n===i?void 0:n}return G.call(e,t)?e[t]:void 0},Et.prototype.has=function(t){var e=this.__data__;return mt?void 0!==e[t]:G.call(e,t)},Et.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=mt&&void 0===e?i:e,this},At.prototype.clear=function(){this.__data__=[],this.size=0},At.prototype.delete=function(t){var e=this.__data__,n=St(e,t);return!(n<0||(n==e.length-1?e.pop():ot.call(e,n,1),--this.size,0))},At.prototype.get=function(t){var e=this.__data__,n=St(e,t);return n<0?void 0:e[n][1]},At.prototype.has=function(t){return St(this.__data__,t)>-1},At.prototype.set=function(t,e){var n=this.__data__,i=St(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},kt.prototype.clear=function(){this.size=0,this.__data__={hash:new Et,map:new(ht||At),string:new Et}},kt.prototype.delete=function(t){var e=qt(this,t).delete(t);return this.size-=e?1:0,e},kt.prototype.get=function(t){return qt(this,t).get(t)},kt.prototype.has=function(t){return qt(this,t).has(t)},kt.prototype.set=function(t,e){var n=qt(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Nt.prototype.add=Nt.prototype.push=function(t){return this.__data__.set(t,i),this},Nt.prototype.has=function(t){return this.__data__.has(t)},Ct.prototype.clear=function(){this.__data__=new At,this.size=0},Ct.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ct.prototype.get=function(t){return this.__data__.get(t)},Ct.prototype.has=function(t){return this.__data__.has(t)},Ct.prototype.set=function(t,e){var n=this.__data__;if(n instanceof At){var i=n.__data__;if(!ht||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new kt(i)}return n.set(t,e),this.size=n.size,this};var Dt=at?function(t){return null==t?[]:(t=Object(t),function(e){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var s=e[n];a=s,rt.call(t,a)&&(o[r++]=s)}var a;return o}(at(t)))}:function(){return[]},Bt=Tt;function Pt(t,e){return!!(e=null==e?s:e)&&("number"==typeof t||T.test(t))&&t>-1&&t%1==0&&t<e}function Rt(t){if(null!=t){try{return X.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ft(t,e){return t===e||t!=t&&e!=e}(ut&&Bt(new ut(new ArrayBuffer(1)))!=C||ht&&Bt(new ht)!=m||dt&&Bt(dt.resolve())!=y||pt&&Bt(new pt)!=x||ft&&Bt(new ft)!=k)&&(Bt=function(t){var e=Tt(t),n=e==b?t.constructor:void 0,i=n?Rt(n):"";if(i)switch(i){case gt:return C;case vt:return m;case bt:return y;case yt:return x;case wt:return k}return e});var $t=Lt(function(){return arguments}())?Lt:function(t){return Kt(t)&&G.call(t,"callee")&&!rt.call(t,"callee")},Ut=Array.isArray,zt=lt||function(){return!1};function Ht(t){if(!Vt(t))return!1;var e=Tt(t);return e==p||e==f||e==c||e==w}function Wt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}function Vt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Kt(t){return null!=t&&"object"==typeof t}var Yt=R?function(t){return function(e){return t(e)}}(R):function(t){return Kt(t)&&Wt(t.length)&&!!L[Tt(t)]};function Zt(t){return null!=(e=t)&&Wt(e.length)&&!Ht(e)?function(t,e){var n=Ut(t),i=!n&&$t(t),r=!n&&!i&&zt(t),o=!n&&!i&&!r&&Yt(t),s=n||i||r||o,a=s?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=a.length;for(var c in t)!e&&!G.call(t,c)||s&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Pt(c,l))||a.push(c);return a}(t):function(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||Y))return ct(t);var e,n,i=[];for(var r in Object(t))G.call(t,r)&&"constructor"!=r&&i.push(r);return i}(t);var e}t.exports=function(t,e){return Ot(t,e)}},106:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(193),r=n(142);var o;!function(t){t.compose=function(t={},e={},n=!1){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});let r=i(e);n||(r=Object.keys(r).reduce(((t,e)=>(null!=r[e]&&(t[e]=r[e]),t)),{}));for(const n in t)void 0!==t[n]&&void 0===e[n]&&(r[n]=t[n]);return Object.keys(r).length>0?r:void 0},t.diff=function(t={},e={}){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});const n=Object.keys(t).concat(Object.keys(e)).reduce(((n,i)=>(r(t[i],e[i])||(n[i]=void 0===e[i]?null:e[i]),n)),{});return Object.keys(n).length>0?n:void 0},t.invert=function(t={},e={}){t=t||{};const n=Object.keys(e).reduce(((n,i)=>(e[i]!==t[i]&&void 0!==t[i]&&(n[i]=e[i]),n)),{});return Object.keys(t).reduce(((n,i)=>(t[i]!==e[i]&&void 0===e[i]&&(n[i]=null),n)),n)},t.transform=function(t,e,n=!1){if("object"!=typeof t)return e;if("object"!=typeof e)return;if(!n)return e;const i=Object.keys(e).reduce(((n,i)=>(void 0===t[i]&&(n[i]=e[i]),n)),{});return Object.keys(i).length>0?i:void 0}}(o||(o={})),e.default=o},660:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const i=n(606),r=n(193),o=n(142),s=n(106);e.AttributeMap=s.default;const a=n(759);e.Op=a.default;const l=n(317);e.OpIterator=l.default;const c=String.fromCharCode(0),u=(t,e)=>{if("object"!=typeof t||null===t)throw new Error("cannot retain a "+typeof t);if("object"!=typeof e||null===e)throw new Error("cannot retain a "+typeof e);const n=Object.keys(t)[0];if(!n||n!==Object.keys(e)[0])throw new Error(`embed types not matched: ${n} != ${Object.keys(e)[0]}`);return[n,t[n],e[n]]};class h{constructor(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}static registerEmbed(t,e){this.handlers[t]=e}static unregisterEmbed(t){delete this.handlers[t]}static getHandler(t){const e=this.handlers[t];if(!e)throw new Error(`no handlers for embed type "${t}"`);return e}insert(t,e){const n={};return"string"==typeof t&&0===t.length?this:(n.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n))}delete(t){return t<=0?this:this.push({delete:t})}retain(t,e){if("number"==typeof t&&t<=0)return this;const n={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)}push(t){let e=this.ops.length,n=this.ops[e-1];if(t=r(t),"object"==typeof n){if("number"==typeof t.delete&&"number"==typeof n.delete)return this.ops[e-1]={delete:n.delete+t.delete},this;if("number"==typeof n.delete&&null!=t.insert&&(e-=1,n=this.ops[e-1],"object"!=typeof n))return this.ops.unshift(t),this;if(o(t.attributes,n.attributes)){if("string"==typeof t.insert&&"string"==typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this}chop(){const t=this.ops[this.ops.length-1];return t&&"number"==typeof t.retain&&!t.attributes&&this.ops.pop(),this}filter(t){return this.ops.filter(t)}forEach(t){this.ops.forEach(t)}map(t){return this.ops.map(t)}partition(t){const e=[],n=[];return this.forEach((i=>{(t(i)?e:n).push(i)})),[e,n]}reduce(t,e){return this.ops.reduce(t,e)}changeLength(){return this.reduce(((t,e)=>e.insert?t+a.default.length(e):e.delete?t-e.delete:t),0)}length(){return this.reduce(((t,e)=>t+a.default.length(e)),0)}slice(t=0,e=1/0){const n=[],i=new l.default(this.ops);let r=0;for(;r<e&&i.hasNext();){let o;r<t?o=i.next(t-r):(o=i.next(e-r),n.push(o)),r+=a.default.length(o)}return new h(n)}compose(t){const e=new l.default(this.ops),n=new l.default(t.ops),i=[],r=n.peek();if(null!=r&&"number"==typeof r.retain&&null==r.attributes){let t=r.retain;for(;"insert"===e.peekType()&&e.peekLength()<=t;)t-=e.peekLength(),i.push(e.next());r.retain-t>0&&n.next(r.retain-t)}const a=new h(i);for(;e.hasNext()||n.hasNext();)if("insert"===n.peekType())a.push(n.next());else if("delete"===e.peekType())a.push(e.next());else{const t=Math.min(e.peekLength(),n.peekLength()),i=e.next(t),r=n.next(t);if(r.retain){const l={};if("number"==typeof i.retain)l.retain="number"==typeof r.retain?t:r.retain;else if("number"==typeof r.retain)null==i.retain?l.insert=i.insert:l.retain=i.retain;else{const t=null==i.retain?"insert":"retain",[e,n,o]=u(i[t],r.retain),s=h.getHandler(e);l[t]={[e]:s.compose(n,o,"retain"===t)}}const c=s.default.compose(i.attributes,r.attributes,"number"==typeof i.retain);if(c&&(l.attributes=c),a.push(l),!n.hasNext()&&o(a.ops[a.ops.length-1],l)){const t=new h(e.rest());return a.concat(t).chop()}}else"number"==typeof r.delete&&("number"==typeof i.retain||"object"==typeof i.retain&&null!==i.retain)&&a.push(r)}return a.chop()}concat(t){const e=new h(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e}diff(t,e){if(this.ops===t.ops)return new h;const n=[this,t].map((e=>e.map((n=>{if(null!=n.insert)return"string"==typeof n.insert?n.insert:c;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join(""))),r=new h,a=i(n[0],n[1],e,!0),u=new l.default(this.ops),d=new l.default(t.ops);return a.forEach((t=>{let e=t[1].length;for(;e>0;){let n=0;switch(t[0]){case i.INSERT:n=Math.min(d.peekLength(),e),r.push(d.next(n));break;case i.DELETE:n=Math.min(e,u.peekLength()),u.next(n),r.delete(n);break;case i.EQUAL:n=Math.min(u.peekLength(),d.peekLength(),e);const t=u.next(n),a=d.next(n);o(t.insert,a.insert)?r.retain(n,s.default.diff(t.attributes,a.attributes)):r.push(a).delete(n)}e-=n}})),r.chop()}eachLine(t,e="\n"){const n=new l.default(this.ops);let i=new h,r=0;for(;n.hasNext();){if("insert"!==n.peekType())return;const o=n.peek(),s=a.default.length(o)-n.peekLength(),l="string"==typeof o.insert?o.insert.indexOf(e,s)-s:-1;if(l<0)i.push(n.next());else if(l>0)i.push(n.next(l));else{if(!1===t(i,n.next(1).attributes||{},r))return;r+=1,i=new h}}i.length()>0&&t(i,{},r)}invert(t){const e=new h;return this.reduce(((n,i)=>{if(i.insert)e.delete(a.default.length(i));else{if("number"==typeof i.retain&&null==i.attributes)return e.retain(i.retain),n+i.retain;if(i.delete||"number"==typeof i.retain){const r=i.delete||i.retain;return t.slice(n,n+r).forEach((t=>{i.delete?e.push(t):i.retain&&i.attributes&&e.retain(a.default.length(t),s.default.invert(i.attributes,t.attributes))})),n+r}if("object"==typeof i.retain&&null!==i.retain){const r=t.slice(n,n+1),o=new l.default(r.ops).next(),[a,c,d]=u(i.retain,o.insert),p=h.getHandler(a);return e.retain({[a]:p.invert(c,d)},s.default.invert(i.attributes,o.attributes)),n+1}}return n}),0),e.chop()}transform(t,e=!1){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);const n=t,i=new l.default(this.ops),r=new l.default(n.ops),o=new h;for(;i.hasNext()||r.hasNext();)if("insert"!==i.peekType()||!e&&"insert"===r.peekType())if("insert"===r.peekType())o.push(r.next());else{const t=Math.min(i.peekLength(),r.peekLength()),n=i.next(t),a=r.next(t);if(n.delete)continue;if(a.delete)o.push(a);else{const i=n.retain,r=a.retain;let l="object"==typeof r&&null!==r?r:t;if("object"==typeof i&&null!==i&&"object"==typeof r&&null!==r){const t=Object.keys(i)[0];if(t===Object.keys(r)[0]){const n=h.getHandler(t);n&&(l={[t]:n.transform(i[t],r[t],e)})}}o.retain(l,s.default.transform(n.attributes,a.attributes,e))}}else o.retain(a.default.length(i.next()));return o.chop()}transformPosition(t,e=!1){e=!!e;const n=new l.default(this.ops);let i=0;for(;n.hasNext()&&i<=t;){const r=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(i<t||!e)&&(t+=r),i+=r):t-=Math.min(r,t-i)}return t}}h.Op=a.default,h.OpIterator=l.default,h.AttributeMap=s.default,h.handlers={},e.default=h,t.exports=h,t.exports.default=h},759:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.length=function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"object"==typeof t.retain&&null!==t.retain?1:"string"==typeof t.insert?t.insert.length:1}}(n||(n={})),e.default=n},317:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(759);e.default=class{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);const e=this.ops[this.index];if(e){const n=this.offset,r=i.default.length(e);if(t>=r-n?(t=r-n,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};{const i={};return e.attributes&&(i.attributes=e.attributes),"number"==typeof e.retain?i.retain=t:"object"==typeof e.retain&&null!==e.retain?i.retain=e.retain:"string"==typeof e.insert?i.insert=e.insert.substr(n,t):i.insert=e.insert,i}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?i.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?"number"==typeof t.delete?"delete":"number"==typeof t.retain||"object"==typeof t.retain&&null!==t.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const t=this.offset,e=this.index,n=this.next(),i=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(i)}}return[]}}},697:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,o||t,s),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var l,c,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,r),!0;case 5:return u.fn.call(u.context,e,i,r,o),!0;case 6:return u.fn.call(u.context,e,i,r,o,s),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,i);break;case 4:u[c].fn.call(u[c].context,e,i,r);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,i,r){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||s(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==e||r&&!a[l].once||i&&a[l].context!==i)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i](o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t={};n.r(t),n.d(t,{afterMain:()=>ne,afterRead:()=>Jt,afterWrite:()=>oe,applyStyles:()=>de,arrow:()=>Ie,auto:()=>$t,basePlacements:()=>Ut,beforeMain:()=>te,beforeRead:()=>Gt,beforeWrite:()=>ie,bottom:()=>Pt,clippingParents:()=>Wt,computeStyles:()=>De,createPopper:()=>dn,createPopperBase:()=>hn,createPopperLite:()=>pn,detectOverflow:()=>Ge,end:()=>Ht,eventListeners:()=>Pe,flip:()=>Qe,hide:()=>en,left:()=>Ft,main:()=>ee,modifierPhases:()=>se,offset:()=>nn,placements:()=>Xt,popper:()=>Kt,popperGenerator:()=>un,popperOffsets:()=>rn,preventOverflow:()=>on,read:()=>Qt,reference:()=>Yt,right:()=>Rt,start:()=>zt,top:()=>Bt,variationPlacements:()=>Zt,viewport:()=>Vt,write:()=>re});var e={};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}n.r(e),n.d(e,{Attributor:()=>ld,AttributorStore:()=>gd,BlockBlot:()=>Sd,ClassAttributor:()=>pd,ContainerBlot:()=>Ld,EmbedBlot:()=>Od,InlineBlot:()=>Nd,LeafBlot:()=>wd,ParentBlot:()=>Ad,Registry:()=>hd,Scope:()=>ad,ScrollBlot:()=>qd,StyleAttributor:()=>md,TextBlot:()=>Dd}),"function"==typeof SuppressedError&&SuppressedError;var r=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(e)){if((i=e.length)!=n.length)return!1;for(r=i;0!=r--;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((i=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!=r--;){var s=o[r];if(!t(e[s],n[s]))return!1}return!0}return e!=e&&n!=n},o=i(r);const s="__googleMapsScriptId";var a;!function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"}(a||(a={}));class l{constructor({apiKey:t,authReferrerPolicy:e,channel:n,client:i,id:r=s,language:a,libraries:c=[],mapIds:u,nonce:h,region:d,retries:p=3,url:f="https://maps.googleapis.com/maps/api/js",version:m}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=e,this.channel=n,this.client=i,this.id=r||s,this.language=a,this.libraries=c,this.mapIds=u,this.nonce=h,this.region=d,this.retries=p,this.url=f,this.version=m,l.instance){if(!o(this.options,l.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(l.instance.options)}`);return l.instance}l.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?a.FAILURE:this.done?a.SUCCESS:this.loading?a.LOADING:a.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise(((t,e)=>{this.loadCallback((n=>{n?e(n.error):t(window.google)}))}))}importLibrary(t){return this.execute(),google.maps.importLibrary(t)}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){var t,e;if(document.getElementById(this.id))return void this.callback();const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach((t=>!n[t]&&delete n[t])),(null===(e=null===(t=null===window||void 0===window?void 0:window.google)||void 0===t?void 0:t.maps)||void 0===e?void 0:e.importLibrary)||(t=>{let e,n,i,r="The Google Maps JavaScript API",o="google",s="importLibrary",a="__ib__",l=document,c=window;c=c[o]||(c[o]={});const u=c.maps||(c.maps={}),h=new Set,d=new URLSearchParams,p=()=>e||(e=new Promise(((s,c)=>{return p=this,f=void 0,g=function*(){var p;for(i in yield n=l.createElement("script"),n.id=this.id,d.set("libraries",[...h]+""),t)d.set(i.replace(/[A-Z]/g,(t=>"_"+t[0].toLowerCase())),t[i]);d.set("callback",o+".maps."+a),n.src=this.url+"?"+d,u[a]=s,n.onerror=()=>e=c(Error(r+" could not load.")),n.nonce=this.nonce||(null===(p=l.querySelector("script[nonce]"))||void 0===p?void 0:p.nonce)||"",l.head.append(n)},new((m=void 0)||(m=Promise))((function(t,e){function n(t){try{r(g.next(t))}catch(t){e(t)}}function i(t){try{r(g.throw(t))}catch(t){e(t)}}function r(e){var r;e.done?t(e.value):(r=e.value,r instanceof m?r:new m((function(t){t(r)}))).then(n,i)}r((g=g.apply(p,f||[])).next())}));var p,f,m,g})));u[s]?console.warn(r+" only loads once. Ignoring:",t):u[s]=(t,...e)=>h.add(t)&&p().then((()=>u[s](t,...e)))})(n);const i=this.libraries.map((t=>this.importLibrary(t)));i.length||i.push(this.importLibrary("core")),Promise.all(i).then((()=>this.callback()),(t=>{const e=new ErrorEvent("error",{error:t});this.loadErrorCallback(e)}))}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout((()=>{this.deleteScript(),this.setScript()}),t)}else this.onerrorEvent=t,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((t=>{t(this.onerrorEvent)})),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading=!0,this.setScript()}}}const c=document.getElementById("contributeMapDropPin"),u=document.getElementById("contributeRemoveMarker");let h=[];const d=(t,e)=>{console.log(t,e),document.getElementById("itemLocation").value=`${t},${e}`},p=()=>{c.classList.toggle("d-none"),c.classList.toggle("d-block"),u.classList.toggle("d-none"),u.classList.toggle("d-block")},f=[{id:1,name:"item 1",location:{lat:52.3800615066451,lng:-4.071716911632866}},{id:2,name:"item 2",location:{lat:52.360018502737624,lng:-3.978870650984919}},{id:3,name:"item 3",location:{lat:52.45746704195877,lng:-3.9424178113956887}}];var m=n(17),g=n.n(m);const v=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class b{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[e,n]=new Uint8Array(t,0,2);if(219!==e)throw new Error("Data does not appear to be in a KDBush format.");const i=n>>4;if(1!==i)throw new Error(`Got v${i} data when expected v1.`);const r=v[15&n];if(!r)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(t,2,1),[s]=new Uint32Array(t,4,1);return new b(s,o,r,t)}constructor(t,e=64,n=Float64Array,i){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const r=v.indexOf(this.ArrayType),o=2*t*this.ArrayType.BYTES_PER_ELEMENT,s=t*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-s%8)%8;if(r<0)throw new Error(`Unexpected typed array class: ${n}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+a,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+o+s+a),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+a,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+r]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t)}add(t,e){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return y(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,e,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:o,nodeSize:s}=this,a=[0,r.length-1,0],l=[];for(;a.length;){const c=a.pop()||0,u=a.pop()||0,h=a.pop()||0;if(u-h<=s){for(let s=h;s<=u;s++){const a=o[2*s],c=o[2*s+1];a>=t&&a<=n&&c>=e&&c<=i&&l.push(r[s])}continue}const d=h+u>>1,p=o[2*d],f=o[2*d+1];p>=t&&p<=n&&f>=e&&f<=i&&l.push(r[d]),(0===c?t<=p:e<=f)&&(a.push(h),a.push(d-1),a.push(1-c)),(0===c?n>=p:i>=f)&&(a.push(d+1),a.push(u),a.push(1-c))}return l}within(t,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:r,nodeSize:o}=this,s=[0,i.length-1,0],a=[],l=n*n;for(;s.length;){const c=s.pop()||0,u=s.pop()||0,h=s.pop()||0;if(u-h<=o){for(let n=h;n<=u;n++)E(r[2*n],r[2*n+1],t,e)<=l&&a.push(i[n]);continue}const d=h+u>>1,p=r[2*d],f=r[2*d+1];E(p,f,t,e)<=l&&a.push(i[d]),(0===c?t-n<=p:e-n<=f)&&(s.push(h),s.push(d-1),s.push(1-c)),(0===c?t+n>=p:e+n>=f)&&(s.push(d+1),s.push(u),s.push(1-c))}return a}}function y(t,e,n,i,r,o){if(r-i<=n)return;const s=i+r>>1;w(t,e,s,i,r,o),y(t,e,n,i,s-1,1-o),y(t,e,n,s+1,r,1-o)}function w(t,e,n,i,r,o){for(;r>i;){if(r-i>600){const s=r-i+1,a=n-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(s-c)/s)*(a-s/2<0?-1:1);w(t,e,n,Math.max(i,Math.floor(n-a*c/s+u)),Math.min(r,Math.floor(n+(s-a)*c/s+u)),o)}const s=e[2*n+o];let a=i,l=r;for(_(t,e,i,n),e[2*r+o]>s&&_(t,e,i,r);a<l;){for(_(t,e,a,l),a++,l--;e[2*a+o]<s;)a++;for(;e[2*l+o]>s;)l--}e[2*i+o]===s?_(t,e,i,l):(l++,_(t,e,l,r)),l<=n&&(i=l+1),n<=l&&(r=l-1)}}function _(t,e,n,i){x(t,n,i),x(e,2*n,2*i),x(e,2*n+1,2*i+1)}function x(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function E(t,e,n,i){const r=t-n,o=e-i;return r*r+o*o}const A={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},k=Math.fround||(N=new Float32Array(1),t=>(N[0]=+t,N[0]));var N;const C=3,S=5,T=6;class L{constructor(t){this.options=Object.assign(Object.create(A),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:e,minZoom:n,maxZoom:i}=this.options;e&&console.time("total time");const r=`prepare ${t.length} points`;e&&console.time(r),this.points=t;const o=[];for(let e=0;e<t.length;e++){const n=t[e];if(!n.geometry)continue;const[i,r]=n.geometry.coordinates,s=k(M(i)),a=k(q(r));o.push(s,a,1/0,e,-1,1),this.options.reduce&&o.push(0)}let s=this.trees[i+1]=this._createTree(o);e&&console.timeEnd(r);for(let t=i;t>=n;t--){const n=+Date.now();s=this.trees[t]=this._createTree(this._cluster(s,t)),e&&console.log("z%d: %d clusters in %dms",t,s.numItems,+Date.now()-n)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,t[1]));let r=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,r=180;else if(n>r){const t=this.getClusters([n,i,180,o],e),s=this.getClusters([-180,i,r,o],e);return t.concat(s)}const s=this.trees[this._limitZoom(e)],a=s.range(M(n),q(o),M(r),q(i)),l=s.data,c=[];for(const t of a){const e=this.stride*t;c.push(l[e+S]>1?O(l,e,this.clusterProps):this.points[l[e+C]])}return c}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);const o=r.data;if(e*this.stride>=o.length)throw new Error(i);const s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=o[e*this.stride],l=o[e*this.stride+1],c=r.within(a,l,s),u=[];for(const e of c){const n=e*this.stride;o[n+4]===t&&u.push(o[n+S]>1?O(o,n,this.clusterProps):this.points[o[n+C]])}if(0===u.length)throw new Error(i);return u}getLeaves(t,e,n){e=e||10,n=n||0;const i=[];return this._appendLeaves(i,t,e,n,0),i}getTile(t,e,n){const i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),{extent:o,radius:s}=this.options,a=s/o,l=(n-a)/r,c=(n+1+a)/r,u={features:[]};return this._addTileFeatures(i.range((e-a)/r,l,(e+1+a)/r,c),i.data,e,n,r,u),0===e&&this._addTileFeatures(i.range(1-a/r,l,1,c),i.data,r,n,r,u),e===r-1&&this._addTileFeatures(i.range(0,l,a/r,c),i.data,-1,n,r,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,i,r){const o=this.getChildren(e);for(const e of o){const o=e.properties;if(o&&o.cluster?r+o.point_count<=i?r+=o.point_count:r=this._appendLeaves(t,o.cluster_id,n,i,r):r<i?r++:t.push(e),t.length===n)break}return r}_createTree(t){const e=new b(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<t.length;n+=this.stride)e.add(t[n],t[n+1]);return e.finish(),e.data=t,e}_addTileFeatures(t,e,n,i,r,o){for(const s of t){const t=s*this.stride,a=e[t+S]>1;let l,c,u;if(a)l=I(e,t,this.clusterProps),c=e[t],u=e[t+1];else{const n=this.points[e[t+C]];l=n.properties;const[i,r]=n.geometry.coordinates;c=M(i),u=q(r)}const h={type:1,geometry:[[Math.round(this.options.extent*(c*r-n)),Math.round(this.options.extent*(u*r-i))]],tags:l};let d;d=a||this.options.generateId?e[t+C]:this.points[e[t+C]].id,void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const{radius:n,extent:i,reduce:r,minPoints:o}=this.options,s=n/(i*Math.pow(2,e)),a=t.data,l=[],c=this.stride;for(let n=0;n<a.length;n+=c){if(a[n+2]<=e)continue;a[n+2]=e;const i=a[n],u=a[n+1],h=t.within(a[n],a[n+1],s),d=a[n+S];let p=d;for(const t of h){const n=t*c;a[n+2]>e&&(p+=a[n+S])}if(p>d&&p>=o){let t,o=i*d,s=u*d,f=-1;const m=(n/c<<5)+(e+1)+this.points.length;for(const i of h){const l=i*c;if(a[l+2]<=e)continue;a[l+2]=e;const u=a[l+S];o+=a[l]*u,s+=a[l+1]*u,a[l+4]=m,r&&(t||(t=this._map(a,n,!0),f=this.clusterProps.length,this.clusterProps.push(t)),r(t,this._map(a,l)))}a[n+4]=m,l.push(o/p,s/p,1/0,m,-1,p),r&&l.push(f)}else{for(let t=0;t<c;t++)l.push(a[n+t]);if(p>1)for(const t of h){const n=t*c;if(!(a[n+2]<=e)){a[n+2]=e;for(let t=0;t<c;t++)l.push(a[n+t])}}}}return l}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e,n){if(t[e+S]>1){const i=this.clusterProps[t[e+T]];return n?Object.assign({},i):i}const i=this.points[t[e+C]].properties,r=this.options.map(i);return n&&r===i?Object.assign({},r):r}}function O(t,e,n){return{type:"Feature",id:t[e+C],properties:I(t,e,n),geometry:{type:"Point",coordinates:[(i=t[e],360*(i-.5)),j(t[e+1])]}};var i}function I(t,e,n){const i=t[e+S],r=i>=1e4?`${Math.round(i/1e3)}k`:i>=1e3?Math.round(i/100)/10+"k":i,o=t[e+T],s=-1===o?{}:Object.assign({},n[o]);return Object.assign(s,{cluster:!0,cluster_id:t[e+C],point_count:i,point_count_abbreviated:r})}function M(t){return t/360+.5}function q(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function j(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}class D{static isAdvancedMarkerAvailable(t){return google.maps.marker&&!0===t.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(t){return google.maps.marker&&t instanceof google.maps.marker.AdvancedMarkerElement}static setMap(t,e){this.isAdvancedMarker(t)?t.map=e:t.setMap(e)}static getPosition(t){if(this.isAdvancedMarker(t)){if(t.position){if(t.position instanceof google.maps.LatLng)return t.position;if(t.position.lat&&t.position.lng)return new google.maps.LatLng(t.position.lat,t.position.lng)}return new google.maps.LatLng(null)}return t.getPosition()}static getVisible(t){return!!this.isAdvancedMarker(t)||t.getVisible()}}class B{constructor({markers:t,position:e}){this.markers=t,e&&(e instanceof google.maps.LatLng?this._position=e:this._position=new google.maps.LatLng(e))}get bounds(){if(0===this.markers.length&&!this._position)return;const t=new google.maps.LatLngBounds(this._position,this._position);for(const e of this.markers)t.extend(D.getPosition(e));return t}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((t=>D.getVisible(t))).length}push(t){this.markers.push(t)}delete(){this.marker&&(D.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class P{constructor({maxZoom:t=16}){this.maxZoom=t}noop({markers:t}){return R(t)}}const R=t=>t.map((t=>new B({position:D.getPosition(t),markers:[t]})));class F extends P{constructor(t){var{maxZoom:e,radius:n=60}=t,i=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["maxZoom","radius"]);super({maxZoom:e}),this.state={zoom:-1},this.superCluster=new L(Object.assign({maxZoom:this.maxZoom,radius:n},i))}calculate(t){let e=!1;const n={zoom:t.map.getZoom()};if(!g()(t.markers,this.markers)){e=!0,this.markers=[...t.markers];const n=this.markers.map((t=>{const e=D.getPosition(t);return{type:"Feature",geometry:{type:"Point",coordinates:[e.lng(),e.lat()]},properties:{marker:t}}}));this.superCluster.load(n)}return e||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(e=!g()(this.state,n)),this.state=n,e&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:e}}cluster({map:t}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map((t=>this.transformCluster(t)))}transformCluster({geometry:{coordinates:[t,e]},properties:n}){if(n.cluster)return new B({markers:this.superCluster.getLeaves(n.cluster_id,1/0).map((t=>t.properties.marker)),position:{lat:e,lng:t}});const i=n.marker;return new B({markers:[i],position:D.getPosition(i)})}}class ${constructor(t,e){this.markers={sum:t.length};const n=e.map((t=>t.count)),i=n.reduce(((t,e)=>t+e),0);this.clusters={count:e.length,markers:{mean:i/e.length,sum:i,min:Math.min(...n),max:Math.max(...n)}}}}class U{render({count:t,position:e},n,i){const r=`<svg fill="${t>Math.max(10,n.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${t}</text>\n</svg>`,o=`Cluster of ${t} markers`,s=Number(google.maps.Marker.MAX_ZINDEX)+t;if(D.isAdvancedMarkerAvailable(i)){const t=(new DOMParser).parseFromString(r,"image/svg+xml").documentElement;t.setAttribute("transform","translate(0 25)");const n={map:i,position:e,zIndex:s,title:o,content:t};return new google.maps.marker.AdvancedMarkerElement(n)}const a={position:e,zIndex:s,title:o,icon:{url:`data:image/svg+xml;base64,${btoa(r)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(a)}}class z{constructor(){!function(t,e){for(let n in e.prototype)t.prototype[n]=e.prototype[n]}(z,google.maps.OverlayView)}}var H;!function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"}(H||(H={}));const W=(t,e,n)=>{n.fitBounds(e.bounds)};class V extends z{constructor({map:t,markers:e=[],algorithmOptions:n={},algorithm:i=new F(n),renderer:r=new U,onClusterClick:o=W}){super(),this.markers=[...e],this.clusters=[],this.algorithm=i,this.renderer=r,this.onClusterClick=o,t&&this.setMap(t)}addMarker(t,e){this.markers.includes(t)||(this.markers.push(t),e||this.render())}addMarkers(t,e){t.forEach((t=>{this.addMarker(t,!0)})),e||this.render()}removeMarker(t,e){const n=this.markers.indexOf(t);return-1!==n&&(D.setMap(t,null),this.markers.splice(n,1),e||this.render(),!0)}removeMarkers(t,e){let n=!1;return t.forEach((t=>{n=this.removeMarker(t,!0)||n})),n&&!e&&this.render(),n}clearMarkers(t){this.markers.length=0,t||this.render()}render(){const t=this.getMap();if(t instanceof google.maps.Map&&t.getProjection()){google.maps.event.trigger(this,H.CLUSTERING_BEGIN,this);const{clusters:e,changed:n}=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()});if(n||null==n){const t=new Set;for(const n of e)1==n.markers.length&&t.add(n.markers[0]);const n=[];for(const e of this.clusters)null!=e.marker&&(1==e.markers.length?t.has(e.marker)||D.setMap(e.marker,null):n.push(e.marker));this.clusters=e,this.renderClusters(),requestAnimationFrame((()=>n.forEach((t=>D.setMap(t,null)))))}google.maps.event.trigger(this,H.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((t=>D.setMap(t,null))),this.clusters.forEach((t=>t.delete())),this.clusters=[]}renderClusters(){const t=new $(this.markers,this.clusters),e=this.getMap();this.clusters.forEach((n=>{1===n.markers.length?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,t,e),n.markers.forEach((t=>D.setMap(t,null))),this.onClusterClick&&n.marker.addListener("click",(t=>{google.maps.event.trigger(this,H.CLUSTER_CLICK,n),this.onClusterClick(t,n,e)}))),D.setMap(n.marker,e)}))}}const K=document.getElementById("mapLocateSidebarItems"),Y=document.getElementById("mapLocateSidebarSearch"),Z=document.getElementById("mapLocateSidebarClose"),X=document.getElementById("mapSidebarOpenButton"),G=document.getElementById("locateBackToItemsButton"),Q=document.getElementById("locateSidebarSearchContainer"),J=document.getElementById("locateSidebarItemsContainer"),tt=document.getElementById("locateSidebarItemsPreview"),et=document.getElementById("locateSidebarPagination"),nt=document.getElementById("locateSidebarItemPreview"),it=document.getElementById("locateNumberResults");let rt,ot,st,at,lt,ct,ut=[],ht="",dt=80;const pt=()=>{dt=it.value,wt()},ft=()=>{K.classList.add("locate-sidebar-nav-active"),Y.classList.remove("locate-sidebar-nav-active"),Q.style.display="none",nt.style.display="none",J.style.display="block",et.style.display="block",vt()},mt=()=>{K.classList.remove("locate-sidebar-nav-active"),Y.classList.add("locate-sidebar-nav-active"),Q.style.display="block",J.style.display="none",et.style.display="none",nt.style.display="none",vt()},gt=()=>{K.classList.add("locate-sidebar-nav-active"),nt.style.display="none",J.style.display="block",et.style.display="block",vt()},vt=()=>{At(),xt(),Tt()&&Ct()},bt=()=>{document.getElementById("mapSidebar").style.display="none",document.getElementById("mapSidebarOpenButton").style.display="flex"},yt=()=>{document.getElementById("mapSidebar").style.display="flex",document.getElementById("mapSidebarOpenButton").style.display="none"},wt=async()=>{const t=`https://www.peoplescollection.wales/locate/geojson?zoom=${rt.getZoom()}&bbox=${_t().west},${_t().north},${_t().east},${_t().south}&num_results=${dt}`;console.log("GeoJSON URL:",t);try{const e=await fetch(t),n=await e.json();console.log("GeoJSON data:",n),lt=n,xt()}catch(t){console.error("Failed to load GeoJSON data",t)}},_t=()=>{const t=rt.getBounds(),e=t.getNorthEast(),n=t.getSouthWest();return{north:e.lat(),south:n.lat(),east:e.lng(),west:n.lng()}},xt=()=>{At(),ut=[],lt.features.forEach((t=>{let e=t.geometry.coordinates[1],n=t.geometry.coordinates[0];const i=new ot({map:rt,position:{lat:e,lng:n},title:t.properties.title});ut.push(i),i.addListener("click",(function(){console.log("Marker was clicked",t.properties.nid)})),St(t.properties)})),st?(st.clearMarkers(),st.addMarkers(ut)):st=new V({map:rt,markers:ut}),document.querySelectorAll(".locate-sidebar-img").forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault();t.id;const n=t.src;var i;i=n,K.classList.remove("locate-sidebar-nav-active"),nt.style.display="block",J.style.display="none",et.style.display="none",document.getElementById("locateSideNodeImagePreview").src=i,At(),Et({lat:51.481583,lng:-3.17909}),ht="preview"}))}))},Et=t=>{const e=new ot({map:rt,position:t,title:"Item Location"});ut.push(e),rt.setCenter(t)},At=()=>{ut.forEach((t=>t.setMap(null))),ut=[],window.markerClusterer&&window.markerClusterer.clearMarkers(),kt(),tt.innerHTML=""},kt=()=>{rt.data.forEach((t=>{rt.data.remove(t)}))},Nt=()=>{if("preview"===ht)return;At(),wt();const t=rt.getCenter(),e=rt.getZoom(),n=rt.getBounds();at={lat:t.lat(),lng:t.lng(),zoom:e,bounds:{north:n.getNorthEast().lat(),south:n.getSouthWest().lat(),east:n.getNorthEast().lng(),west:n.getSouthWest().lng()}}},Ct=()=>{const{lat:t,lng:e,zoom:n}=at;rt.setCenter({lat:t,lng:e}),rt.setZoom(n),google.maps.event.addListenerOnce(rt,"idle",(()=>{ht=""}))},St=t=>{const e=`                   \n        <div class="col d-flex align-items-stretch m-0 p-1">\n            <div class="card text-center w-100 discover-result-node">\n                <a href="#">\n                    <img id="locateNode${t.nid}" src="${t.thumbnail}"\n                    class="card-img-top locate-sidebar-img mx-auto" alt="${t.title}">\n                </a>\n            </div>\n        </div>`;tt.insertAdjacentHTML("beforeend",e)},Tt=()=>{const t=rt.getCenter(),e=rt.getZoom(),n=rt.getBounds(),i=t.lat(),r=t.lng(),o=e,s=n.getNorthEast().lat(),a=n.getSouthWest().lat(),l=n.getNorthEast().lng(),c=n.getSouthWest().lng();return i!==at.lat||r!==at.lng||o!==at.zoom||s!==at.bounds.north||a!==at.bounds.south||l!==at.bounds.east||c!==at.bounds.west},Lt={lat:52.41371375319883,lng:-4.084020475317442};let Ot;const It={lat:52.41371375319883,lng:-4.084020475317442},Mt=new l({apiKey:"AIzaSyD2IjeESJzSXKrTzkHZVsxtkVTgXBSMW8M",version:"weekly"}),qt=t=>{const e={google:"roadmap","1staddition":{id:"1staddition",url:"https://api.maptiler.com/tiles/004511f7-2020-4596-9223-fa674e0a4c97/{z}/{x}/{y}.png?key=1CYucAPOyljr43DBNflu"},"2ndaddition":{id:"2ndaddition",url:"https://api.maptiler.com/tiles/e0355e0d-6f76-4eef-903f-d4557c351379/{z}/{x}/{y}.png?key=1CYucAPOyljr43DBNflu"},"3rdaddition":{id:"3rdaddition",url:"https://api.maptiler.com/tiles/975ee73d-5cb6-4249-b7d2-5e813b68742e/{z}/{x}/{y}.png?key=1CYucAPOyljr43DBNflu"},"4thaddition":{id:"4thaddition",url:"https://api.maptiler.com/tiles/fac1ce11-ff10-48b3-b67f-863e552b08b4/{z}/{x}/{y}.png?key=1CYucAPOyljr43DBNflu"},tithe:{id:"tithe",url:"https://api.maptiler.com/tiles/ee8ebe51-0b4e-4a32-b444-ae919ed160ad/{z}/{x}/{y}?key=78ieVgsnZ53wgUTt8E8j"}};if("google"===t)Ot.setMapTypeId(google.maps.MapTypeId.ROADMAP);else{const{id:n,url:i}=e[t],r=new google.maps.ImageMapType({name:n,getTileUrl:(t,e)=>i.replace("{x}",t.x).replace("{y}",t.y).replace("{z}",e),tileSize:new google.maps.Size(256,256),minZoom:1,maxZoom:20});Ot.mapTypes.set(n,r),Ot.setMapTypeId(n)}document.querySelectorAll(".historical-map-layer").forEach((t=>{t.classList.remove("layer-button-active")})),document.getElementById(`map-layer-${t}`).classList.add("layer-button-active")},jt=t=>{let e=document.querySelectorAll(".historical-map-layer");t?e.forEach((t=>{t.classList.add("disabled")})):e.forEach((t=>{t.classList.remove("disabled")}))};function Dt(t){"add-to-story-button"===t.target.id?(document.getElementById("add-to-collection-button").classList.remove("active"),document.getElementById("add-to-story-button").classList.add("active"),document.getElementById("add-to-collection-container").classList.add("d-none"),document.getElementById("add-to-story-container").classList.remove("d-none")):(document.getElementById("add-to-story-button").classList.remove("active"),document.getElementById("add-to-collection-button").classList.add("active"),document.getElementById("add-to-collection-container").classList.remove("d-none"),document.getElementById("add-to-story-container").classList.add("d-none"))}var Bt="top",Pt="bottom",Rt="right",Ft="left",$t="auto",Ut=[Bt,Pt,Rt,Ft],zt="start",Ht="end",Wt="clippingParents",Vt="viewport",Kt="popper",Yt="reference",Zt=Ut.reduce((function(t,e){return t.concat([e+"-"+zt,e+"-"+Ht])}),[]),Xt=[].concat(Ut,[$t]).reduce((function(t,e){return t.concat([e,e+"-"+zt,e+"-"+Ht])}),[]),Gt="beforeRead",Qt="read",Jt="afterRead",te="beforeMain",ee="main",ne="afterMain",ie="beforeWrite",re="write",oe="afterWrite",se=[Gt,Qt,Jt,te,ee,ne,ie,re,oe];function ae(t){return t?(t.nodeName||"").toLowerCase():null}function le(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ce(t){return t instanceof le(t).Element||t instanceof Element}function ue(t){return t instanceof le(t).HTMLElement||t instanceof HTMLElement}function he(t){return"undefined"!=typeof ShadowRoot&&(t instanceof le(t).ShadowRoot||t instanceof ShadowRoot)}const de={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];ue(r)&&ae(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});ue(i)&&ae(i)&&(Object.assign(i.style,o),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]};function pe(t){return t.split("-")[0]}var fe=Math.max,me=Math.min,ge=Math.round;function ve(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function be(){return!/^((?!chrome|android).)*safari/i.test(ve())}function ye(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),r=1,o=1;e&&ue(t)&&(r=t.offsetWidth>0&&ge(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&ge(i.height)/t.offsetHeight||1);var s=(ce(t)?le(t):window).visualViewport,a=!be()&&n,l=(i.left+(a&&s?s.offsetLeft:0))/r,c=(i.top+(a&&s?s.offsetTop:0))/o,u=i.width/r,h=i.height/o;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l,x:l,y:c}}function we(t){var e=ye(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function _e(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&he(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function xe(t){return le(t).getComputedStyle(t)}function Ee(t){return["table","td","th"].indexOf(ae(t))>=0}function Ae(t){return((ce(t)?t.ownerDocument:t.document)||window.document).documentElement}function ke(t){return"html"===ae(t)?t:t.assignedSlot||t.parentNode||(he(t)?t.host:null)||Ae(t)}function Ne(t){return ue(t)&&"fixed"!==xe(t).position?t.offsetParent:null}function Ce(t){for(var e=le(t),n=Ne(t);n&&Ee(n)&&"static"===xe(n).position;)n=Ne(n);return n&&("html"===ae(n)||"body"===ae(n)&&"static"===xe(n).position)?e:n||function(t){var e=/firefox/i.test(ve());if(/Trident/i.test(ve())&&ue(t)&&"fixed"===xe(t).position)return null;var n=ke(t);for(he(n)&&(n=n.host);ue(n)&&["html","body"].indexOf(ae(n))<0;){var i=xe(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}function Se(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Te(t,e,n){return fe(t,me(e,n))}function Le(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Oe(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}const Ie={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=pe(n.placement),l=Se(a),c=[Ft,Rt].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(t,e){return Le("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Oe(t,Ut))}(r.padding,n),h=we(o),d="y"===l?Bt:Ft,p="y"===l?Pt:Rt,f=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],m=s[l]-n.rects.reference[l],g=Ce(o),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,b=f/2-m/2,y=u[d],w=v-h[c]-u[p],_=v/2-h[c]/2+b,x=Te(y,_,w),E=l;n.modifiersData[i]=((e={})[E]=x,e.centerOffset=x-_,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=e.elements.popper.querySelector(i)))&&_e(e.elements.popper,i)&&(e.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Me(t){return t.split("-")[1]}var qe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function je(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,d=s.x,p=void 0===d?0:d,f=s.y,m=void 0===f?0:f,g="function"==typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=s.hasOwnProperty("x"),b=s.hasOwnProperty("y"),y=Ft,w=Bt,_=window;if(c){var x=Ce(n),E="clientHeight",A="clientWidth";x===le(n)&&"static"!==xe(x=Ae(n)).position&&"absolute"===a&&(E="scrollHeight",A="scrollWidth"),(r===Bt||(r===Ft||r===Rt)&&o===Ht)&&(w=Pt,m-=(h&&x===_&&_.visualViewport?_.visualViewport.height:x[E])-i.height,m*=l?1:-1),r!==Ft&&(r!==Bt&&r!==Pt||o!==Ht)||(y=Rt,p-=(h&&x===_&&_.visualViewport?_.visualViewport.width:x[A])-i.width,p*=l?1:-1)}var k,N=Object.assign({position:a},c&&qe),C=!0===u?function(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:ge(n*r)/r||0,y:ge(i*r)/r||0}}({x:p,y:m},le(n)):{x:p,y:m};return p=C.x,m=C.y,l?Object.assign({},N,((k={})[w]=b?"0":"",k[y]=v?"0":"",k.transform=(_.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",k)):Object.assign({},N,((e={})[w]=b?m+"px":"",e[y]=v?p+"px":"",e.transform="",e))}const De={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,c={placement:pe(e.placement),variation:Me(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,je(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,je(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var Be={passive:!0};const Pe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=void 0===r||r,s=i.resize,a=void 0===s||s,l=le(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach((function(t){t.addEventListener("scroll",n.update,Be)})),a&&l.addEventListener("resize",n.update,Be),function(){o&&c.forEach((function(t){t.removeEventListener("scroll",n.update,Be)})),a&&l.removeEventListener("resize",n.update,Be)}},data:{}};var Re={left:"right",right:"left",bottom:"top",top:"bottom"};function Fe(t){return t.replace(/left|right|bottom|top/g,(function(t){return Re[t]}))}var $e={start:"end",end:"start"};function Ue(t){return t.replace(/start|end/g,(function(t){return $e[t]}))}function ze(t){var e=le(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function He(t){return ye(Ae(t)).left+ze(t).scrollLeft}function We(t){var e=xe(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Ve(t){return["html","body","#document"].indexOf(ae(t))>=0?t.ownerDocument.body:ue(t)&&We(t)?t:Ve(ke(t))}function Ke(t,e){var n;void 0===e&&(e=[]);var i=Ve(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),o=le(i),s=r?[o].concat(o.visualViewport||[],We(i)?i:[]):i,a=e.concat(s);return r?a:a.concat(Ke(ke(s)))}function Ye(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ze(t,e,n){return e===Vt?Ye(function(t,e){var n=le(t),i=Ae(t),r=n.visualViewport,o=i.clientWidth,s=i.clientHeight,a=0,l=0;if(r){o=r.width,s=r.height;var c=be();(c||!c&&"fixed"===e)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:o,height:s,x:a+He(t),y:l}}(t,n)):ce(e)?function(t,e){var n=ye(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):Ye(function(t){var e,n=Ae(t),i=ze(t),r=null==(e=t.ownerDocument)?void 0:e.body,o=fe(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=fe(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+He(t),l=-i.scrollTop;return"rtl"===xe(r||n).direction&&(a+=fe(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(Ae(t)))}function Xe(t){var e,n=t.reference,i=t.element,r=t.placement,o=r?pe(r):null,s=r?Me(r):null,a=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(o){case Bt:e={x:a,y:n.y-i.height};break;case Pt:e={x:a,y:n.y+n.height};break;case Rt:e={x:n.x+n.width,y:l};break;case Ft:e={x:n.x-i.width,y:l};break;default:e={x:n.x,y:n.y}}var c=o?Se(o):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case zt:e[c]=e[c]-(n[u]/2-i[u]/2);break;case Ht:e[c]=e[c]+(n[u]/2-i[u]/2)}}return e}function Ge(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=void 0===i?t.placement:i,o=n.strategy,s=void 0===o?t.strategy:o,a=n.boundary,l=void 0===a?Wt:a,c=n.rootBoundary,u=void 0===c?Vt:c,h=n.elementContext,d=void 0===h?Kt:h,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,v=Le("number"!=typeof g?g:Oe(g,Ut)),b=d===Kt?Yt:Kt,y=t.rects.popper,w=t.elements[f?b:d],_=function(t,e,n,i){var r="clippingParents"===e?function(t){var e=Ke(ke(t)),n=["absolute","fixed"].indexOf(xe(t).position)>=0&&ue(t)?Ce(t):t;return ce(n)?e.filter((function(t){return ce(t)&&_e(t,n)&&"body"!==ae(t)})):[]}(t):[].concat(e),o=[].concat(r,[n]),s=o[0],a=o.reduce((function(e,n){var r=Ze(t,n,i);return e.top=fe(r.top,e.top),e.right=me(r.right,e.right),e.bottom=me(r.bottom,e.bottom),e.left=fe(r.left,e.left),e}),Ze(t,s,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(ce(w)?w:w.contextElement||Ae(t.elements.popper),l,u,s),x=ye(t.elements.reference),E=Xe({reference:x,element:y,strategy:"absolute",placement:r}),A=Ye(Object.assign({},y,E)),k=d===Kt?A:x,N={top:_.top-k.top+v.top,bottom:k.bottom-_.bottom+v.bottom,left:_.left-k.left+v.left,right:k.right-_.right+v.right},C=t.modifiersData.offset;if(d===Kt&&C){var S=C[r];Object.keys(N).forEach((function(t){var e=[Rt,Pt].indexOf(t)>=0?1:-1,n=[Bt,Pt].indexOf(t)>=0?"y":"x";N[t]+=S[n]*e}))}return N}const Qe={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=e.options.placement,v=pe(g),b=l||(v!==g&&f?function(t){if(pe(t)===$t)return[];var e=Fe(t);return[Ue(t),e,Ue(e)]}(g):[Fe(g)]),y=[g].concat(b).reduce((function(t,n){return t.concat(pe(n)===$t?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Xt:l,u=Me(i),h=u?a?Zt:Zt.filter((function(t){return Me(t)===u})):Ut,d=h.filter((function(t){return c.indexOf(t)>=0}));0===d.length&&(d=h);var p=d.reduce((function(e,n){return e[n]=Ge(t,{placement:n,boundary:r,rootBoundary:o,padding:s})[pe(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:n,boundary:u,rootBoundary:h,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),w=e.rects.reference,_=e.rects.popper,x=new Map,E=!0,A=y[0],k=0;k<y.length;k++){var N=y[k],C=pe(N),S=Me(N)===zt,T=[Bt,Pt].indexOf(C)>=0,L=T?"width":"height",O=Ge(e,{placement:N,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),I=T?S?Rt:Ft:S?Pt:Bt;w[L]>_[L]&&(I=Fe(I));var M=Fe(I),q=[];if(o&&q.push(O[C]<=0),a&&q.push(O[I]<=0,O[M]<=0),q.every((function(t){return t}))){A=N,E=!1;break}x.set(N,q)}if(E)for(var j=function(t){var e=y.find((function(e){var n=x.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return A=e,"break"},D=f?3:1;D>0&&"break"!==j(D);D--);e.placement!==A&&(e.modifiersData[i]._skip=!0,e.placement=A,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Je(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function tn(t){return[Bt,Rt,Pt,Ft].some((function(e){return t[e]>=0}))}const en={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,s=Ge(e,{elementContext:"reference"}),a=Ge(e,{altBoundary:!0}),l=Je(s,i),c=Je(a,r,o),u=tn(l),h=tn(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}},nn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=void 0===r?[0,0]:r,s=Xt.reduce((function(t,n){return t[n]=function(t,e,n){var i=pe(t),r=[Ft,Bt].indexOf(i)>=0?-1:1,o="function"==typeof n?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*r,[Ft,Rt].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}(n,e.rects,o),t}),{}),a=s[e.placement],l=a.x,c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=s}},rn={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=Xe({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},on={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,p=void 0===d||d,f=n.tetherOffset,m=void 0===f?0:f,g=Ge(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),v=pe(e.placement),b=Me(e.placement),y=!b,w=Se(v),_="x"===w?"y":"x",x=e.modifiersData.popperOffsets,E=e.rects.reference,A=e.rects.popper,k="function"==typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,N="number"==typeof k?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),C=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,S={x:0,y:0};if(x){if(o){var T,L="y"===w?Bt:Ft,O="y"===w?Pt:Rt,I="y"===w?"height":"width",M=x[w],q=M+g[L],j=M-g[O],D=p?-A[I]/2:0,B=b===zt?E[I]:A[I],P=b===zt?-A[I]:-E[I],R=e.elements.arrow,F=p&&R?we(R):{width:0,height:0},$=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},U=$[L],z=$[O],H=Te(0,E[I],F[I]),W=y?E[I]/2-D-H-U-N.mainAxis:B-H-U-N.mainAxis,V=y?-E[I]/2+D+H+z+N.mainAxis:P+H+z+N.mainAxis,K=e.elements.arrow&&Ce(e.elements.arrow),Y=K?"y"===w?K.clientTop||0:K.clientLeft||0:0,Z=null!=(T=null==C?void 0:C[w])?T:0,X=M+V-Z,G=Te(p?me(q,M+W-Z-Y):q,M,p?fe(j,X):j);x[w]=G,S[w]=G-M}if(a){var Q,J="x"===w?Bt:Ft,tt="x"===w?Pt:Rt,et=x[_],nt="y"===_?"height":"width",it=et+g[J],rt=et-g[tt],ot=-1!==[Bt,Ft].indexOf(v),st=null!=(Q=null==C?void 0:C[_])?Q:0,at=ot?it:et-E[nt]-A[nt]-st+N.altAxis,lt=ot?et+E[nt]+A[nt]-st-N.altAxis:rt,ct=p&&ot?function(t,e,n){var i=Te(t,e,n);return i>n?n:i}(at,et,lt):Te(p?at:it,et,p?lt:rt);x[_]=ct,S[_]=ct-et}e.modifiersData[i]=S}},requiresIfExists:["offset"]};function sn(t,e,n){void 0===n&&(n=!1);var i,r,o=ue(e),s=ue(e)&&function(t){var e=t.getBoundingClientRect(),n=ge(e.width)/t.offsetWidth||1,i=ge(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),a=Ae(e),l=ye(t,s,n),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(o||!o&&!n)&&(("body"!==ae(e)||We(a))&&(c=(i=e)!==le(i)&&ue(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:ze(i)),ue(e)?((u=ye(e,!0)).x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=He(a))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function an(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}var ln={placement:"bottom",modifiers:[],strategy:"absolute"};function cn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function un(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,o=void 0===r?ln:r;return function(t,e,n){void 0===n&&(n=o);var r,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},ln,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],c=!1,u={state:a,setOptions:function(n){var r="function"==typeof n?n(a.options):n;h(),a.options=Object.assign({},o,a.options,r),a.scrollParents={reference:ce(t)?Ke(t):t.contextElement?Ke(t.contextElement):[],popper:Ke(e)};var s,c,d=function(t){var e=an(t);return se.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((s=[].concat(i,a.options.modifiers),c=s.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(c).map((function(t){return c[t]}))));return a.orderedModifiers=d.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var o=r({state:a,name:e,instance:u,options:i});l.push(o||function(){})}})),u.update()},forceUpdate:function(){if(!c){var t=a.elements,e=t.reference,n=t.popper;if(cn(e,n)){a.rects={reference:sn(e,Ce(n),"fixed"===a.options.strategy),popper:we(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<a.orderedModifiers.length;i++)if(!0!==a.reset){var r=a.orderedModifiers[i],o=r.fn,s=r.options,l=void 0===s?{}:s,h=r.name;"function"==typeof o&&(a=o({state:a,options:l,name:h,instance:u})||a)}else a.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(t){u.forceUpdate(),t(a)}))},function(){return s||(s=new Promise((function(t){Promise.resolve().then((function(){s=void 0,t(r())}))}))),s}),destroy:function(){h(),c=!0}};if(!cn(t,e))return u;function h(){l.forEach((function(t){return t()})),l=[]}return u.setOptions(n).then((function(t){!c&&n.onFirstUpdate&&n.onFirstUpdate(t)})),u}}var hn=un(),dn=un({defaultModifiers:[Pe,rn,De,de,nn,Qe,on,Ie,en]}),pn=un({defaultModifiers:[Pe,rn,De,de]});const fn=new Map,mn={set(t,e,n){fn.has(t)||fn.set(t,new Map);const i=fn.get(t);i.has(e)||0===i.size?i.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(t,e)=>fn.has(t)&&fn.get(t).get(e)||null,remove(t,e){if(!fn.has(t))return;const n=fn.get(t);n.delete(e),0===n.size&&fn.delete(t)}},gn="transitionend",vn=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,((t,e)=>`#${CSS.escape(e)}`))),t),bn=t=>{t.dispatchEvent(new Event(gn))},yn=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),wn=t=>yn(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(vn(t)):null,_n=t=>{if(!yn(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n)return!1;if(null===e)return!1}return e},xn=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")),En=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?En(t.parentNode):null},An=()=>{},kn=t=>{t.offsetHeight},Nn=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Cn=[],Sn=()=>"rtl"===document.documentElement.dir,Tn=t=>{var e;e=()=>{const e=Nn();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}},"loading"===document.readyState?(Cn.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of Cn)t()})),Cn.push(e)):e()},Ln=(t,e=[],n=t)=>"function"==typeof t?t(...e):n,On=(t,e,n=!0)=>{if(!n)return void Ln(t);const i=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return i||r?(e=e.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(n))):0})(e)+5;let r=!1;const o=({target:n})=>{n===e&&(r=!0,e.removeEventListener(gn,o),Ln(t))};e.addEventListener(gn,o),setTimeout((()=>{r||bn(e)}),i)},In=(t,e,n,i)=>{const r=t.length;let o=t.indexOf(e);return-1===o?!n&&i?t[r-1]:t[0]:(o+=n?1:-1,i&&(o=(o+r)%r),t[Math.max(0,Math.min(o,r-1))])},Mn=/[^.]*(?=\..*)\.|.*/,qn=/\..*/,jn=/::\d+$/,Dn={};let Bn=1;const Pn={mouseenter:"mouseover",mouseleave:"mouseout"},Rn=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Fn(t,e){return e&&`${e}::${Bn++}`||t.uidEvent||Bn++}function $n(t){const e=Fn(t);return t.uidEvent=e,Dn[e]=Dn[e]||{},Dn[e]}function Un(t,e,n=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===n))}function zn(t,e,n){const i="string"==typeof e,r=i?n:e||n;let o=Kn(t);return Rn.has(o)||(o=t),[i,r,o]}function Hn(t,e,n,i,r){if("string"!=typeof e||!t)return;let[o,s,a]=zn(e,n,i);if(e in Pn){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};s=t(s)}const l=$n(t),c=l[a]||(l[a]={}),u=Un(c,s,o?n:null);if(u)return void(u.oneOff=u.oneOff&&r);const h=Fn(s,e.replace(Mn,"")),d=o?function(t,e,n){return function i(r){const o=t.querySelectorAll(e);for(let{target:s}=r;s&&s!==this;s=s.parentNode)for(const a of o)if(a===s)return Zn(r,{delegateTarget:s}),i.oneOff&&Yn.off(t,r.type,e,n),n.apply(s,[r])}}(t,n,s):function(t,e){return function n(i){return Zn(i,{delegateTarget:t}),n.oneOff&&Yn.off(t,i.type,e),e.apply(t,[i])}}(t,s);d.delegationSelector=o?n:null,d.callable=s,d.oneOff=r,d.uidEvent=h,c[h]=d,t.addEventListener(a,d,o)}function Wn(t,e,n,i,r){const o=Un(e[n],i,r);o&&(t.removeEventListener(n,o,Boolean(r)),delete e[n][o.uidEvent])}function Vn(t,e,n,i){const r=e[n]||{};for(const[o,s]of Object.entries(r))o.includes(i)&&Wn(t,e,n,s.callable,s.delegationSelector)}function Kn(t){return t=t.replace(qn,""),Pn[t]||t}const Yn={on(t,e,n,i){Hn(t,e,n,i,!1)},one(t,e,n,i){Hn(t,e,n,i,!0)},off(t,e,n,i){if("string"!=typeof e||!t)return;const[r,o,s]=zn(e,n,i),a=s!==e,l=$n(t),c=l[s]||{},u=e.startsWith(".");if(void 0===o){if(u)for(const n of Object.keys(l))Vn(t,l,n,e.slice(1));for(const[n,i]of Object.entries(c)){const r=n.replace(jn,"");a&&!e.includes(r)||Wn(t,l,s,i.callable,i.delegationSelector)}}else{if(!Object.keys(c).length)return;Wn(t,l,s,o,r?n:null)}},trigger(t,e,n){if("string"!=typeof e||!t)return null;const i=Nn();let r=null,o=!0,s=!0,a=!1;e!==Kn(e)&&i&&(r=i.Event(e,n),i(t).trigger(r),o=!r.isPropagationStopped(),s=!r.isImmediatePropagationStopped(),a=r.isDefaultPrevented());const l=Zn(new Event(e,{bubbles:o,cancelable:!0}),n);return a&&l.preventDefault(),s&&t.dispatchEvent(l),l.defaultPrevented&&r&&r.preventDefault(),l}};function Zn(t,e={}){for(const[n,i]of Object.entries(e))try{t[n]=i}catch(e){Object.defineProperty(t,n,{configurable:!0,get:()=>i})}return t}function Xn(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function Gn(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const Qn={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${Gn(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Gn(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const i of n){let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=Xn(t.dataset[i])}return e},getDataAttribute:(t,e)=>Xn(t.getAttribute(`data-bs-${Gn(e)}`))};class Jn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=yn(e)?Qn.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...yn(e)?Qn.getDataAttributes(e):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[i,r]of Object.entries(e)){const e=t[i],o=yn(e)?"element":null==(n=e)?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}var n}}class ti extends Jn{constructor(t,e){super(),(t=wn(t))&&(this._element=t,this._config=this._getConfig(e),mn.set(this._element,this.constructor.DATA_KEY,this))}dispose(){mn.remove(this._element,this.constructor.DATA_KEY),Yn.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){On(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return mn.get(wn(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const ei=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return e?e.split(",").map((t=>vn(t))).join(","):null},ni={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const n=[];let i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!xn(t)&&_n(t)))},getSelectorFromElement(t){const e=ei(t);return e&&ni.findOne(e)?e:null},getElementFromSelector(t){const e=ei(t);return e?ni.findOne(e):null},getMultipleElementsFromSelector(t){const e=ei(t);return e?ni.find(e):[]}},ii=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;Yn.on(document,n,`[data-bs-dismiss="${i}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),xn(this))return;const r=ni.getElementFromSelector(this)||this.closest(`.${i}`);t.getOrCreateInstance(r)[e]()}))},ri=".bs.alert",oi=`close${ri}`,si=`closed${ri}`;class ai extends ti{static get NAME(){return"alert"}close(){if(Yn.trigger(this._element,oi).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),Yn.trigger(this._element,si),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=ai.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}ii(ai,"close"),Tn(ai);const li='[data-bs-toggle="button"]';class ci extends ti{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=ci.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}Yn.on(document,"click.bs.button.data-api",li,(t=>{t.preventDefault();const e=t.target.closest(li);ci.getOrCreateInstance(e).toggle()})),Tn(ci);const ui=".bs.swipe",hi=`touchstart${ui}`,di=`touchmove${ui}`,pi=`touchend${ui}`,fi=`pointerdown${ui}`,mi=`pointerup${ui}`,gi={endCallback:null,leftCallback:null,rightCallback:null},vi={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class bi extends Jn{constructor(t,e){super(),this._element=t,t&&bi.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return gi}static get DefaultType(){return vi}static get NAME(){return"swipe"}dispose(){Yn.off(this._element,ui)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Ln(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&Ln(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Yn.on(this._element,fi,(t=>this._start(t))),Yn.on(this._element,mi,(t=>this._end(t))),this._element.classList.add("pointer-event")):(Yn.on(this._element,hi,(t=>this._start(t))),Yn.on(this._element,di,(t=>this._move(t))),Yn.on(this._element,pi,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const yi=".bs.carousel",wi=".data-api",_i="ArrowLeft",xi="ArrowRight",Ei="next",Ai="prev",ki="left",Ni="right",Ci=`slide${yi}`,Si=`slid${yi}`,Ti=`keydown${yi}`,Li=`mouseenter${yi}`,Oi=`mouseleave${yi}`,Ii=`dragstart${yi}`,Mi=`load${yi}${wi}`,qi=`click${yi}${wi}`,ji="carousel",Di="active",Bi=".active",Pi=".carousel-item",Ri=Bi+Pi,Fi={[_i]:Ni,[xi]:ki},$i={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ui={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class zi extends ti{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ni.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===ji&&this.cycle()}static get Default(){return $i}static get DefaultType(){return Ui}static get NAME(){return"carousel"}next(){this._slide(Ei)}nextWhenVisible(){!document.hidden&&_n(this._element)&&this.next()}prev(){this._slide(Ai)}pause(){this._isSliding&&bn(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Yn.one(this._element,Si,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void Yn.one(this._element,Si,(()=>this.to(t)));const n=this._getItemIndex(this._getActive());if(n===t)return;const i=t>n?Ei:Ai;this._slide(i,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&Yn.on(this._element,Ti,(t=>this._keydown(t))),"hover"===this._config.pause&&(Yn.on(this._element,Li,(()=>this.pause())),Yn.on(this._element,Oi,(()=>this._maybeEnableCycle()))),this._config.touch&&bi.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of ni.find(".carousel-item img",this._element))Yn.on(t,Ii,(t=>t.preventDefault()));const t={leftCallback:()=>this._slide(this._directionToOrder(ki)),rightCallback:()=>this._slide(this._directionToOrder(Ni)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new bi(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Fi[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=ni.findOne(Bi,this._indicatorsElement);e.classList.remove(Di),e.removeAttribute("aria-current");const n=ni.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(Di),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),i=t===Ei,r=e||In(this._getItems(),n,i,this._config.wrap);if(r===n)return;const o=this._getItemIndex(r),s=e=>Yn.trigger(this._element,e,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:o});if(s(Ci).defaultPrevented)return;if(!n||!r)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const l=i?"carousel-item-start":"carousel-item-end",c=i?"carousel-item-next":"carousel-item-prev";r.classList.add(c),kn(r),n.classList.add(l),r.classList.add(l),this._queueCallback((()=>{r.classList.remove(l,c),r.classList.add(Di),n.classList.remove(Di,c,l),this._isSliding=!1,s(Si)}),n,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return ni.findOne(Ri,this._element)}_getItems(){return ni.find(Pi,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Sn()?t===ki?Ai:Ei:t===ki?Ei:Ai}_orderToDirection(t){return Sn()?t===Ai?ki:Ni:t===Ai?Ni:ki}static jQueryInterface(t){return this.each((function(){const e=zi.getOrCreateInstance(this,t);if("number"!=typeof t){if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}Yn.on(document,qi,"[data-bs-slide], [data-bs-slide-to]",(function(t){const e=ni.getElementFromSelector(this);if(!e||!e.classList.contains(ji))return;t.preventDefault();const n=zi.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===Qn.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),Yn.on(window,Mi,(()=>{const t=ni.find('[data-bs-ride="carousel"]');for(const e of t)zi.getOrCreateInstance(e)})),Tn(zi);const Hi=".bs.collapse",Wi=`show${Hi}`,Vi=`shown${Hi}`,Ki=`hide${Hi}`,Yi=`hidden${Hi}`,Zi=`click${Hi}.data-api`,Xi="show",Gi="collapse",Qi="collapsing",Ji=`:scope .${Gi} .${Gi}`,tr='[data-bs-toggle="collapse"]',er={parent:null,toggle:!0},nr={parent:"(null|element)",toggle:"boolean"};class ir extends ti{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=ni.find(tr);for(const t of n){const e=ni.getSelectorFromElement(t),n=ni.find(e).filter((t=>t===this._element));null!==e&&n.length&&this._triggerArray.push(t)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return er}static get DefaultType(){return nr}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((t=>t!==this._element)).map((t=>ir.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;if(Yn.trigger(this._element,Wi).defaultPrevented)return;for(const e of t)e.hide();const e=this._getDimension();this._element.classList.remove(Gi),this._element.classList.add(Qi),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=`scroll${e[0].toUpperCase()+e.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Qi),this._element.classList.add(Gi,Xi),this._element.style[e]="",Yn.trigger(this._element,Vi)}),this._element,!0),this._element.style[e]=`${this._element[n]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(Yn.trigger(this._element,Ki).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,kn(this._element),this._element.classList.add(Qi),this._element.classList.remove(Gi,Xi);for(const t of this._triggerArray){const e=ni.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Qi),this._element.classList.add(Gi),Yn.trigger(this._element,Yi)}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(Xi)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=wn(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(tr);for(const e of t){const t=ni.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=ni.find(Ji,this._config.parent);return ni.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle("collapsed",!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const n=ir.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}Yn.on(document,Zi,tr,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const t of ni.getMultipleElementsFromSelector(this))ir.getOrCreateInstance(t,{toggle:!1}).toggle()})),Tn(ir);const rr="dropdown",or=".bs.dropdown",sr=".data-api",ar="ArrowUp",lr="ArrowDown",cr=`hide${or}`,ur=`hidden${or}`,hr=`show${or}`,dr=`shown${or}`,pr=`click${or}${sr}`,fr=`keydown${or}${sr}`,mr=`keyup${or}${sr}`,gr="show",vr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',br=`${vr}.${gr}`,yr=".dropdown-menu",wr=Sn()?"top-end":"top-start",_r=Sn()?"top-start":"top-end",xr=Sn()?"bottom-end":"bottom-start",Er=Sn()?"bottom-start":"bottom-end",Ar=Sn()?"left-start":"right-start",kr=Sn()?"right-start":"left-start",Nr={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Cr={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Sr extends ti{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=ni.next(this._element,yr)[0]||ni.prev(this._element,yr)[0]||ni.findOne(yr,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Nr}static get DefaultType(){return Cr}static get NAME(){return rr}toggle(){return this._isShown()?this.hide():this.show()}show(){if(xn(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!Yn.trigger(this._element,hr,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const t of[].concat(...document.body.children))Yn.on(t,"mouseover",An);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(gr),this._element.classList.add(gr),Yn.trigger(this._element,dr,t)}}hide(){if(xn(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!Yn.trigger(this._element,cr,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))Yn.off(t,"mouseover",An);this._popper&&this._popper.destroy(),this._menu.classList.remove(gr),this._element.classList.remove(gr),this._element.setAttribute("aria-expanded","false"),Qn.removeDataAttribute(this._menu,"popper"),Yn.trigger(this._element,ur,t)}}_getConfig(t){if("object"==typeof(t=super._getConfig(t)).reference&&!yn(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${rr.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){let t=this._element;"parent"===this._config.reference?t=this._parent:yn(this._config.reference)?t=wn(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=dn(t,this._menu,e)}_isShown(){return this._menu.classList.contains(gr)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return Ar;if(t.classList.contains("dropstart"))return kr;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?_r:wr:e?Er:xr}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Qn.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Ln(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const n=ni.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((t=>_n(t)));n.length&&In(n,e,t===lr,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=Sr.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const e=ni.find(br);for(const n of e){const e=Sr.getInstance(n);if(!e||!1===e._config.autoClose)continue;const i=t.composedPath(),r=i.includes(e._menu);if(i.includes(e._element)||"inside"===e._config.autoClose&&!r||"outside"===e._config.autoClose&&r)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:e._element};"click"===t.type&&(o.clickEvent=t),e._completeHide(o)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n="Escape"===t.key,i=[ar,lr].includes(t.key);if(!i&&!n)return;if(e&&!n)return;t.preventDefault();const r=this.matches(vr)?this:ni.prev(this,vr)[0]||ni.next(this,vr)[0]||ni.findOne(vr,t.delegateTarget.parentNode),o=Sr.getOrCreateInstance(r);if(i)return t.stopPropagation(),o.show(),void o._selectMenuItem(t);o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}Yn.on(document,fr,vr,Sr.dataApiKeydownHandler),Yn.on(document,fr,yr,Sr.dataApiKeydownHandler),Yn.on(document,pr,Sr.clearMenus),Yn.on(document,mr,Sr.clearMenus),Yn.on(document,pr,vr,(function(t){t.preventDefault(),Sr.getOrCreateInstance(this).toggle()})),Tn(Sr);const Tr="backdrop",Lr="show",Or=`mousedown.bs.${Tr}`,Ir={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Mr={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class qr extends Jn{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Ir}static get DefaultType(){return Mr}static get NAME(){return Tr}show(t){if(!this._config.isVisible)return void Ln(t);this._append();const e=this._getElement();this._config.isAnimated&&kn(e),e.classList.add(Lr),this._emulateAnimation((()=>{Ln(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(Lr),this._emulateAnimation((()=>{this.dispose(),Ln(t)}))):Ln(t)}dispose(){this._isAppended&&(Yn.off(this._element,Or),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=wn(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),Yn.on(t,Or,(()=>{Ln(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){On(t,this._getElement(),this._config.isAnimated)}}const jr=".bs.focustrap",Dr=`focusin${jr}`,Br=`keydown.tab${jr}`,Pr="backward",Rr={autofocus:!0,trapElement:null},Fr={autofocus:"boolean",trapElement:"element"};class $r extends Jn{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Rr}static get DefaultType(){return Fr}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Yn.off(document,jr),Yn.on(document,Dr,(t=>this._handleFocusin(t))),Yn.on(document,Br,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Yn.off(document,jr))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=ni.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===Pr?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?Pr:"forward")}}const Ur=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",zr=".sticky-top",Hr="padding-right",Wr="margin-right";class Vr{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Hr,(e=>e+t)),this._setElementAttributes(Ur,Hr,(e=>e+t)),this._setElementAttributes(zr,Wr,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Hr),this._resetElementAttributes(Ur,Hr),this._resetElementAttributes(zr,Wr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const r=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${n(Number.parseFloat(r))}px`)}))}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&Qn.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const n=Qn.getDataAttribute(t,e);null!==n?(Qn.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)}))}_applyManipulationCallback(t,e){if(yn(t))e(t);else for(const n of ni.find(t,this._element))e(n)}}const Kr=".bs.modal",Yr=`hide${Kr}`,Zr=`hidePrevented${Kr}`,Xr=`hidden${Kr}`,Gr=`show${Kr}`,Qr=`shown${Kr}`,Jr=`resize${Kr}`,to=`click.dismiss${Kr}`,eo=`mousedown.dismiss${Kr}`,no=`keydown.dismiss${Kr}`,io=`click${Kr}.data-api`,ro="modal-open",oo="show",so="modal-static",ao={backdrop:!0,focus:!0,keyboard:!0},lo={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class co extends ti{constructor(t,e){super(t,e),this._dialog=ni.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Vr,this._addEventListeners()}static get Default(){return ao}static get DefaultType(){return lo}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||Yn.trigger(this._element,Gr,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ro),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){this._isShown&&!this._isTransitioning&&(Yn.trigger(this._element,Yr).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(oo),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){Yn.off(window,Kr),Yn.off(this._dialog,Kr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new qr({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new $r({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=ni.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),kn(this._element),this._element.classList.add(oo),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Yn.trigger(this._element,Qr,{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){Yn.on(this._element,no,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),Yn.on(window,Jr,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),Yn.on(this._element,eo,(t=>{Yn.one(this._element,to,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(ro),this._resetAdjustments(),this._scrollBar.reset(),Yn.trigger(this._element,Xr)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Yn.trigger(this._element,Zr).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;"hidden"===e||this._element.classList.contains(so)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(so),this._queueCallback((()=>{this._element.classList.remove(so),this._queueCallback((()=>{this._element.style.overflowY=e}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=Sn()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=Sn()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=co.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}Yn.on(document,io,'[data-bs-toggle="modal"]',(function(t){const e=ni.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),Yn.one(e,Gr,(t=>{t.defaultPrevented||Yn.one(e,Xr,(()=>{_n(this)&&this.focus()}))}));const n=ni.findOne(".modal.show");n&&co.getInstance(n).hide(),co.getOrCreateInstance(e).toggle(this)})),ii(co),Tn(co);const uo=".bs.offcanvas",ho=".data-api",po=`load${uo}${ho}`,fo="show",mo="showing",go="hiding",vo=".offcanvas.show",bo=`show${uo}`,yo=`shown${uo}`,wo=`hide${uo}`,_o=`hidePrevented${uo}`,xo=`hidden${uo}`,Eo=`resize${uo}`,Ao=`click${uo}${ho}`,ko=`keydown.dismiss${uo}`,No={backdrop:!0,keyboard:!0,scroll:!1},Co={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class So extends ti{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return No}static get DefaultType(){return Co}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||Yn.trigger(this._element,bo,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Vr).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(mo),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(fo),this._element.classList.remove(mo),Yn.trigger(this._element,yo,{relatedTarget:t})}),this._element,!0))}hide(){this._isShown&&(Yn.trigger(this._element,wo).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(go),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(fo,go),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Vr).reset(),Yn.trigger(this._element,xo)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new qr({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():Yn.trigger(this._element,_o)}:null})}_initializeFocusTrap(){return new $r({trapElement:this._element})}_addEventListeners(){Yn.on(this._element,ko,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():Yn.trigger(this._element,_o))}))}static jQueryInterface(t){return this.each((function(){const e=So.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}Yn.on(document,Ao,'[data-bs-toggle="offcanvas"]',(function(t){const e=ni.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),xn(this))return;Yn.one(e,xo,(()=>{_n(this)&&this.focus()}));const n=ni.findOne(vo);n&&n!==e&&So.getInstance(n).hide(),So.getOrCreateInstance(e).toggle(this)})),Yn.on(window,po,(()=>{for(const t of ni.find(vo))So.getOrCreateInstance(t).show()})),Yn.on(window,Eo,(()=>{for(const t of ni.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&So.getOrCreateInstance(t).hide()})),ii(So),Tn(So);const To={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Lo=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Oo=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Io=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!Lo.has(n)||Boolean(Oo.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(n)))},Mo={allowList:To,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},qo={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},jo={entry:"(string|element|function|null)",selector:"(string|element)"};class Do extends Jn{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Mo}static get DefaultType(){return qo}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[e,n]of Object.entries(this._config.content))this._setContent(t,n,e);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},jo)}_setContent(t,e,n){const i=ni.findOne(n,t);i&&((e=this._resolvePossibleFunction(e))?yn(e)?this._putElementInTemplate(wn(e),i):this._config.html?i.innerHTML=this._maybeSanitize(e):i.textContent=e:i.remove())}_maybeSanitize(t){return this._config.sanitize?function(t,e,n){if(!t.length)return t;if(n&&"function"==typeof n)return n(t);const i=(new window.DOMParser).parseFromString(t,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(const t of r){const n=t.nodeName.toLowerCase();if(!Object.keys(e).includes(n)){t.remove();continue}const i=[].concat(...t.attributes),r=[].concat(e["*"]||[],e[n]||[]);for(const e of i)Io(e,r)||t.removeAttribute(e.nodeName)}return i.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Ln(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const Bo=new Set(["sanitize","allowList","sanitizeFn"]),Po="fade",Ro="show",Fo=".tooltip-inner",$o=".modal",Uo="hide.bs.modal",zo="hover",Ho="focus",Wo={AUTO:"auto",TOP:"top",RIGHT:Sn()?"left":"right",BOTTOM:"bottom",LEFT:Sn()?"right":"left"},Vo={allowList:To,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Ko={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Yo extends ti{constructor(t,e){super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Vo}static get DefaultType(){return Ko}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Yn.off(this._element.closest($o),Uo,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=Yn.trigger(this._element,this.constructor.eventName("show")),e=(En(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(n),Yn.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(Ro),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))Yn.on(t,"mouseover",An);this._queueCallback((()=>{Yn.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!Yn.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Ro),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))Yn.off(t,"mouseover",An);this._activeTrigger.click=!1,this._activeTrigger[Ho]=!1,this._activeTrigger[zo]=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Yn.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Po,Ro),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(Po),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Do({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Fo]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Po)}_isShown(){return this.tip&&this.tip.classList.contains(Ro)}_createPopper(t){const e=Ln(this._config.placement,[this,t,this._element]),n=Wo[e.toUpperCase()];return dn(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return Ln(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...Ln(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)Yn.on(this._element,this.constructor.eventName("click"),this._config.selector,(t=>{this._initializeOnDelegatedTarget(t).toggle()}));else if("manual"!==e){const t=e===zo?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=e===zo?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");Yn.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?Ho:zo]=!0,e._enter()})),Yn.on(this._element,n,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?Ho:zo]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},Yn.on(this._element.closest($o),Uo,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=Qn.getDataAttributes(this._element);for(const t of Object.keys(e))Bo.has(t)&&delete e[t];return t={...e,..."object"==typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:wn(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,n]of Object.entries(this._config))this.constructor.Default[e]!==n&&(t[e]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=Yo.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Tn(Yo);const Zo=".popover-header",Xo=".popover-body",Go={...Yo.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Qo={...Yo.DefaultType,content:"(null|string|element|function)"};class Jo extends Yo{static get Default(){return Go}static get DefaultType(){return Qo}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Zo]:this._getTitle(),[Xo]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=Jo.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Tn(Jo);const ts=".bs.scrollspy",es=`activate${ts}`,ns=`click${ts}`,is=`load${ts}.data-api`,rs="active",os="[href]",ss=".nav-link",as=`${ss}, .nav-item > ${ss}, .list-group-item`,ls={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},cs={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class us extends ti{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ls}static get DefaultType(){return cs}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=wn(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Yn.off(this._config.target,ns),Yn.on(this._config.target,ns,os,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,i=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:i,behavior:"smooth"});n.scrollTop=i}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const t=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&t){if(n(o),!i)return}else r||t||n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=ni.find(os,this._config.target);for(const e of t){if(!e.hash||xn(e))continue;const t=ni.findOne(decodeURI(e.hash),this._element);_n(t)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(rs),this._activateParents(t),Yn.trigger(this._element,es,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))ni.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(rs);else for(const e of ni.parents(t,".nav, .list-group"))for(const t of ni.prev(e,as))t.classList.add(rs)}_clearActiveClass(t){t.classList.remove(rs);const e=ni.find(`${os}.${rs}`,t);for(const t of e)t.classList.remove(rs)}static jQueryInterface(t){return this.each((function(){const e=us.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Yn.on(window,is,(()=>{for(const t of ni.find('[data-bs-spy="scroll"]'))us.getOrCreateInstance(t)})),Tn(us);const hs=".bs.tab",ds=`hide${hs}`,ps=`hidden${hs}`,fs=`show${hs}`,ms=`shown${hs}`,gs=`click${hs}`,vs=`keydown${hs}`,bs=`load${hs}`,ys="ArrowLeft",ws="ArrowRight",_s="ArrowUp",xs="ArrowDown",Es="Home",As="End",ks="active",Ns="fade",Cs="show",Ss=".dropdown-toggle",Ts=`:not(${Ss})`,Ls='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Os=`.nav-link${Ts}, .list-group-item${Ts}, [role="tab"]${Ts}, ${Ls}`,Is=`.${ks}[data-bs-toggle="tab"], .${ks}[data-bs-toggle="pill"], .${ks}[data-bs-toggle="list"]`;class Ms extends ti{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Yn.on(this._element,vs,(t=>this._keydown(t))))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?Yn.trigger(e,ds,{relatedTarget:t}):null;Yn.trigger(t,fs,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){t&&(t.classList.add(ks),this._activate(ni.getElementFromSelector(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),Yn.trigger(t,ms,{relatedTarget:e})):t.classList.add(Cs)}),t,t.classList.contains(Ns)))}_deactivate(t,e){t&&(t.classList.remove(ks),t.blur(),this._deactivate(ni.getElementFromSelector(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),Yn.trigger(t,ps,{relatedTarget:e})):t.classList.remove(Cs)}),t,t.classList.contains(Ns)))}_keydown(t){if(![ys,ws,_s,xs,Es,As].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter((t=>!xn(t)));let n;if([Es,As].includes(t.key))n=e[t.key===Es?0:e.length-1];else{const i=[ws,xs].includes(t.key);n=In(e,t.target,i,!0)}n&&(n.focus({preventScroll:!0}),Ms.getOrCreateInstance(n).show())}_getChildren(){return ni.find(Os,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const t of e)this._setInitialAttributesOnChild(t)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=ni.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains("dropdown"))return;const i=(t,i)=>{const r=ni.findOne(t,n);r&&r.classList.toggle(i,e)};i(Ss,ks),i(".dropdown-menu",Cs),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(ks)}_getInnerElement(t){return t.matches(Os)?t:ni.findOne(Os,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each((function(){const e=Ms.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Yn.on(document,gs,Ls,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),xn(this)||Ms.getOrCreateInstance(this).show()})),Yn.on(window,bs,(()=>{for(const t of ni.find(Is))Ms.getOrCreateInstance(t)})),Tn(Ms);const qs=".bs.toast",js=`mouseover${qs}`,Ds=`mouseout${qs}`,Bs=`focusin${qs}`,Ps=`focusout${qs}`,Rs=`hide${qs}`,Fs=`hidden${qs}`,$s=`show${qs}`,Us=`shown${qs}`,zs="hide",Hs="show",Ws="showing",Vs={animation:"boolean",autohide:"boolean",delay:"number"},Ks={animation:!0,autohide:!0,delay:5e3};class Ys extends ti{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Ks}static get DefaultType(){return Vs}static get NAME(){return"toast"}show(){Yn.trigger(this._element,$s).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(zs),kn(this._element),this._element.classList.add(Hs,Ws),this._queueCallback((()=>{this._element.classList.remove(Ws),Yn.trigger(this._element,Us),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(Yn.trigger(this._element,Rs).defaultPrevented||(this._element.classList.add(Ws),this._queueCallback((()=>{this._element.classList.add(zs),this._element.classList.remove(Ws,Hs),Yn.trigger(this._element,Fs)}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Hs),super.dispose()}isShown(){return this._element.classList.contains(Hs)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){Yn.on(this._element,js,(t=>this._onInteraction(t,!0))),Yn.on(this._element,Ds,(t=>this._onInteraction(t,!1))),Yn.on(this._element,Bs,(t=>this._onInteraction(t,!0))),Yn.on(this._element,Ps,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=Ys.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}ii(Ys),Tn(Ys);const Zs=document.getElementsByClassName("contribute-tooltip"),Xs=()=>{const t=document.getElementById("contributeModalToolip"),e=new co(t,{keyboard:!0});t.addEventListener("hidden.bs.modal",(t=>{document.getElementById("contributeModalToolipTitle").innerText="",document.getElementById("contributeModalToolipBody").innerHTML=""})),e.show()},Gs=t=>{"contributeTooltipTitle"===t&&(document.getElementById("contributeModalToolipTitle").innerText="Title",document.getElementById("contributeModalToolipBody").innerHTML='<p>The title of your story is the first thing people will see. Follow our advised Who, What, Where, When title format, for example âMrs Enid Jones milking a goat, Carmarthen, 1962</p>\n            <p><iframe width="100%" height="400" src="https://www.youtube.com/embed/GPQ1wt-PusY?si=nmLd-vXbHlZ62V3m" \n            title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; \n            clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" \n            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></p>'),"contributeTooltipDescription"===t&&(document.getElementById("contributeModalToolipTitle").innerText="Description",document.getElementById("contributeModalToolipBody").innerHTML='<p>The description of your item is where you can add as much information as possible about. Think about how you can make this item a useful resource for other people.</p>\n        <p><iframe width="100%" height="400" src="https://www.youtube.com/embed/8_UnANdDqJc?si=XNjvH8VmZ6bSRwvA" \n        title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; \n        gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></p>'),"contributeUploadTooltip"===t&&(document.getElementById("contributeModalToolipTitle").innerText="How to Upload",document.getElementById("contributeModalToolipBody").innerHTML='<p>Here are instructions about what and how to upload</p>\n        <iframe width="100%" height="400vh" src="https://www.youtube.com/embed/jqgqsb-a34c?si=m6-dk_G8OghoaiPA" \n        title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; \n        gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>')};async function Qs(t,e,n){try{const i=await fetch("https://translation.googleapis.com/language/translate/v2?key=AIzaSyD2IjeESJzSXKrTzkHZVsxtkVTgXBSMW8M",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({q:[t],source:e,target:n,format:"text"})}),r=await i.json();if(i.ok)return r.data.translations[0].translatedText;throw console.error("API Error:",JSON.stringify(r,null,2)),new Error(r.error.message)}catch(t){return console.error("Network or other error:",t.message),"Translation failed or invalid API response."}}document.getElementById("contribute-english-title"),document.getElementById("contribute-welsh-title"),document.getElementById("contribute-english-description"),document.getElementById("contribute-welsh-description");let Js={};var ta=n(912),ea=n.n(ta);let na=0;const ia=["Cymru","France","Germany","United Kingdom","Afghanistan","Australia","Austria","Belgium","Brazil","Canada","China","Denmark","Egypt","Finland","Greece","Hungary","India","Indonesia","Ireland","Israel","Italy","Japan","Kenya","Luxembourg","Malaysia","Mexico","Nepal","Netherlands","New Zealand","Nigeria","Norway","Pakistan","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Saudi Arabia","Singapore","South Africa","South Korea","Spain","Sri Lanka","Sweden","Switzerland","Taiwan","Thailand","Turkey","United Arab Emirates","United States","Venezuela","Vietnam","Zimbabwe"];function ra(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function oa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ra(Object(n),!0).forEach((function(e){aa(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ra(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function sa(t){return sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sa(t)}function aa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function la(){return la=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},la.apply(this,arguments)}function ca(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var ua=ca(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ha=ca(/Edge/i),da=ca(/firefox/i),pa=ca(/safari/i)&&!ca(/chrome/i)&&!ca(/android/i),fa=ca(/iP(ad|od|hone)/i),ma=ca(/chrome/i)&&ca(/android/i),ga={capture:!1,passive:!1};function va(t,e,n){t.addEventListener(e,n,!ua&&ga)}function ba(t,e,n){t.removeEventListener(e,n,!ua&&ga)}function ya(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function wa(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function _a(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&ya(t,e):ya(t,e))||i&&t===n)return t;if(t===n)break}while(t=wa(t))}return null}var xa,Ea=/\s+/g;function Aa(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(Ea," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(Ea," ")}}function ka(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||-1!==e.indexOf("webkit")||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function Na(t,e){var n="";if("string"==typeof t)n=t;else do{var i=ka(t,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function Ca(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function Sa(){return document.scrollingElement||document.documentElement}function Ta(t,e,n,i,r){if(t.getBoundingClientRect||t===window){var o,s,a,l,c,u,h;if(t!==window&&t.parentNode&&t!==Sa()?(s=(o=t.getBoundingClientRect()).top,a=o.left,l=o.bottom,c=o.right,u=o.height,h=o.width):(s=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!ua))do{if(r&&r.getBoundingClientRect&&("none"!==ka(r,"transform")||n&&"static"!==ka(r,"position"))){var d=r.getBoundingClientRect();s-=d.top+parseInt(ka(r,"border-top-width")),a-=d.left+parseInt(ka(r,"border-left-width")),l=s+o.height,c=a+o.width;break}}while(r=r.parentNode);if(i&&t!==window){var p=Na(r||t),f=p&&p.a,m=p&&p.d;p&&(l=(s/=m)+(u/=m),c=(a/=f)+(h/=f))}return{top:s,left:a,bottom:l,right:c,width:h,height:u}}}function La(t,e,n){for(var i=ja(t,!0),r=Ta(t)[e];i;){var o=Ta(i)[n];if(!("top"===n||"left"===n?r>=o:r<=o))return i;if(i===Sa())break;i=ja(i,!1)}return!1}function Oa(t,e,n,i){for(var r=0,o=0,s=t.children;o<s.length;){if("none"!==s[o].style.display&&s[o]!==Pl.ghost&&(i||s[o]!==Pl.dragged)&&_a(s[o],n.draggable,t,!1)){if(r===e)return s[o];r++}o++}return null}function Ia(t,e){for(var n=t.lastElementChild;n&&(n===Pl.ghost||"none"===ka(n,"display")||e&&!ya(n,e));)n=n.previousElementSibling;return n||null}function Ma(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Pl.clone||e&&!ya(t,e)||n++;return n}function qa(t){var e=0,n=0,i=Sa();if(t)do{var r=Na(t),o=r.a,s=r.d;e+=t.scrollLeft*o,n+=t.scrollTop*s}while(t!==i&&(t=t.parentNode));return[e,n]}function ja(t,e){if(!t||!t.getBoundingClientRect)return Sa();var n=t,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=ka(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return Sa();if(i||e)return n;i=!0}}}while(n=n.parentNode);return Sa()}function Da(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function Ba(t,e){return function(){if(!xa){var n=arguments;1===n.length?t.call(this,n[0]):t.apply(this,n),xa=setTimeout((function(){xa=void 0}),e)}}}function Pa(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Ra(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Fa(t,e,n){var i={};return Array.from(t.children).forEach((function(r){var o,s,a,l;if(_a(r,e.draggable,t,!1)&&!r.animated&&r!==n){var c=Ta(r);i.left=Math.min(null!==(o=i.left)&&void 0!==o?o:1/0,c.left),i.top=Math.min(null!==(s=i.top)&&void 0!==s?s:1/0,c.top),i.right=Math.max(null!==(a=i.right)&&void 0!==a?a:-1/0,c.right),i.bottom=Math.max(null!==(l=i.bottom)&&void 0!==l?l:-1/0,c.bottom)}})),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var $a="Sortable"+(new Date).getTime();var Ua=[],za={initializeByDefault:!0},Ha={mount:function(t){for(var e in za)za.hasOwnProperty(e)&&!(e in t)&&(t[e]=za[e]);Ua.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),Ua.push(t)},pluginEvent:function(t,e,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var r=t+"Global";Ua.forEach((function(i){e[i.pluginName]&&(e[i.pluginName][r]&&e[i.pluginName][r](oa({sortable:e},n)),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t](oa({sortable:e},n)))}))},initializePlugins:function(t,e,n,i){for(var r in Ua.forEach((function(i){var r=i.pluginName;if(t.options[r]||i.initializeByDefault){var o=new i(t,e,t.options);o.sortable=t,o.options=t.options,t[r]=o,la(n,o.defaults)}})),t.options)if(t.options.hasOwnProperty(r)){var o=this.modifyOption(t,r,t.options[r]);void 0!==o&&(t.options[r]=o)}},getEventProperties:function(t,e){var n={};return Ua.forEach((function(i){"function"==typeof i.eventProperties&&la(n,i.eventProperties.call(e[i.pluginName],t))})),n},modifyOption:function(t,e,n){var i;return Ua.forEach((function(r){t[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[e]&&(i=r.optionListeners[e].call(t[r.pluginName],n))})),i}};var Wa=["evt"],Va=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,r=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(n,Wa);Ha.pluginEvent.bind(Pl)(t,e,oa({dragEl:Ya,parentEl:Za,ghostEl:Xa,rootEl:Ga,nextEl:Qa,lastDownEl:Ja,cloneEl:tl,cloneHidden:el,dragStarted:fl,putSortable:al,activeSortable:Pl.active,originalEvent:i,oldIndex:nl,oldDraggableIndex:rl,newIndex:il,newDraggableIndex:ol,hideGhostForTarget:ql,unhideGhostForTarget:jl,cloneNowHidden:function(){el=!0},cloneNowShown:function(){el=!1},dispatchSortableEvent:function(t){Ka({sortable:e,name:t,originalEvent:i})}},r))};function Ka(t){!function(t){var e=t.sortable,n=t.rootEl,i=t.name,r=t.targetEl,o=t.cloneEl,s=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,h=t.newDraggableIndex,d=t.originalEvent,p=t.putSortable,f=t.extraEventProperties;if(e=e||n&&n[$a]){var m,g=e.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||ua||ha?(m=document.createEvent("Event")).initEvent(i,!0,!0):m=new CustomEvent(i,{bubbles:!0,cancelable:!0}),m.to=s||n,m.from=a||n,m.item=r||n,m.clone=o,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=h,m.originalEvent=d,m.pullMode=p?p.lastPutMode:void 0;var b=oa(oa({},f),Ha.getEventProperties(i,e));for(var y in b)m[y]=b[y];n&&n.dispatchEvent(m),g[v]&&g[v].call(e,m)}}(oa({putSortable:al,cloneEl:tl,targetEl:Ya,rootEl:Ga,oldIndex:nl,oldDraggableIndex:rl,newIndex:il,newDraggableIndex:ol},t))}var Ya,Za,Xa,Ga,Qa,Ja,tl,el,nl,il,rl,ol,sl,al,ll,cl,ul,hl,dl,pl,fl,ml,gl,vl,bl,yl=!1,wl=!1,_l=[],xl=!1,El=!1,Al=[],kl=!1,Nl=[],Cl="undefined"!=typeof document,Sl=fa,Tl=ha||ua?"cssFloat":"float",Ll=Cl&&!ma&&!fa&&"draggable"in document.createElement("div"),Ol=function(){if(Cl){if(ua)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Il=function(t,e){var n=ka(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=Oa(t,0,e),o=Oa(t,1,e),s=r&&ka(r),a=o&&ka(o),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Ta(r).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ta(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&"none"!==s.float){var u="left"===s.float?"left":"right";return!o||"both"!==a.clear&&a.clear!==u?"horizontal":"vertical"}return r&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||l>=i&&"none"===n[Tl]||o&&"none"===n[Tl]&&l+c>i)?"vertical":"horizontal"},Ml=function(t){function e(t,n){return function(i,r,o,s){var a=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;if(null==t&&(n||a))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(i,r,o,s),n)(i,r,o,s);var l=(n?i:r).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var n={},i=t.group;i&&"object"==sa(i)||(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n},ql=function(){!Ol&&Xa&&ka(Xa,"display","none")},jl=function(){!Ol&&Xa&&ka(Xa,"display","")};Cl&&!ma&&document.addEventListener("click",(function(t){if(wl)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),wl=!1,!1}),!0);var Dl=function(t){if(Ya){t=t.touches?t.touches[0]:t;var e=(r=t.clientX,o=t.clientY,_l.some((function(t){var e=t[$a].options.emptyInsertThreshold;if(e&&!Ia(t)){var n=Ta(t),i=r>=n.left-e&&r<=n.right+e,a=o>=n.top-e&&o<=n.bottom+e;return i&&a?s=t:void 0}})),s);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[$a]._onDragOver(n)}}var r,o,s},Bl=function(t){Ya&&Ya.parentNode[$a]._isOutsideThisEl(t.target)};function Pl(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=la({},e),t[$a]=this;var n,i,r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Il(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Pl.supportPointer&&"PointerEvent"in window&&!pa,emptyInsertThreshold:5};for(var o in Ha.initializePlugins(this,t,r),r)!(o in e)&&(e[o]=r[o]);for(var s in Ml(e),this)"_"===s.charAt(0)&&"function"==typeof this[s]&&(this[s]=this[s].bind(this));this.nativeDraggable=!e.forceFallback&&Ll,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?va(t,"pointerdown",this._onTapStart):(va(t,"mousedown",this._onTapStart),va(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(va(t,"dragover",this),va(t,"dragenter",this)),_l.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),la(this,(i=[],{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(t){if("none"!==ka(t,"display")&&t!==Pl.ghost){i.push({target:t,rect:Ta(t)});var e=oa({},i[i.length-1].rect);if(t.thisAnimationDuration){var n=Na(t,!0);n&&(e.top-=n.f,e.left-=n.e)}t.fromRect=e}}))},addAnimationState:function(t){i.push(t)},removeAnimationState:function(t){i.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n);return-1}(i,{target:t}),1)},animateAll:function(t){var e=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof t&&t());var r=!1,o=0;i.forEach((function(t){var n=0,i=t.target,s=i.fromRect,a=Ta(i),l=i.prevFromRect,c=i.prevToRect,u=t.rect,h=Na(i,!0);h&&(a.top-=h.f,a.left-=h.e),i.toRect=a,i.thisAnimationDuration&&Da(l,a)&&!Da(s,a)&&(u.top-a.top)/(u.left-a.left)==(s.top-a.top)/(s.left-a.left)&&(n=function(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}(u,l,c,e.options)),Da(a,s)||(i.prevFromRect=s,i.prevToRect=a,n||(n=e.options.animation),e.animate(i,u,a,n)),n&&(r=!0,o=Math.max(o,n),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),n),i.thisAnimationDuration=n)})),clearTimeout(n),r?n=setTimeout((function(){"function"==typeof t&&t()}),o):"function"==typeof t&&t(),i=[]},animate:function(t,e,n,i){if(i){ka(t,"transition",""),ka(t,"transform","");var r=Na(this.el),o=r&&r.a,s=r&&r.d,a=(e.left-n.left)/(o||1),l=(e.top-n.top)/(s||1);t.animatingX=!!a,t.animatingY=!!l,ka(t,"transform","translate3d("+a+"px,"+l+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),ka(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),ka(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){ka(t,"transition",""),ka(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),i)}}}))}function Rl(t,e,n,i,r,o,s,a){var l,c,u=t[$a],h=u.options.onMove;return!window.CustomEvent||ua||ha?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=r||e,l.relatedRect=o||Ta(e),l.willInsertAfter=a,l.originalEvent=s,t.dispatchEvent(l),h&&(c=h.call(u,l,s)),c}function Fl(t){t.draggable=!1}function $l(){kl=!1}function Ul(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function zl(t){return setTimeout(t,0)}function Hl(t){return clearTimeout(t)}Pl.prototype={constructor:Pl,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(ml=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Ya):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,i=this.options,r=i.preventOnFilter,o=t.type,s=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,a=(s||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||a,c=i.filter;if(function(t){Nl.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&Nl.push(i)}}(n),!Ya&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||i.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!pa||!a||"SELECT"!==a.tagName.toUpperCase())&&!((a=_a(a,i.draggable,n,!1))&&a.animated||Ja===a)){if(nl=Ma(a),rl=Ma(a,i.draggable),"function"==typeof c){if(c.call(this,t,a,this))return Ka({sortable:e,rootEl:l,name:"filter",targetEl:a,toEl:n,fromEl:n}),Va("filter",e,{evt:t}),void(r&&t.cancelable&&t.preventDefault())}else if(c&&(c=c.split(",").some((function(i){if(i=_a(l,i.trim(),n,!1))return Ka({sortable:e,rootEl:i,name:"filter",targetEl:a,fromEl:n,toEl:n}),Va("filter",e,{evt:t}),!0}))))return void(r&&t.cancelable&&t.preventDefault());i.handle&&!_a(l,i.handle,n,!1)||this._prepareDragStart(t,s,a)}}},_prepareDragStart:function(t,e,n){var i,r=this,o=r.el,s=r.options,a=o.ownerDocument;if(n&&!Ya&&n.parentNode===o){var l=Ta(n);if(Ga=o,Za=(Ya=n).parentNode,Qa=Ya.nextSibling,Ja=n,sl=s.group,Pl.dragged=Ya,ll={target:Ya,clientX:(e||t).clientX,clientY:(e||t).clientY},dl=ll.clientX-l.left,pl=ll.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Ya.style["will-change"]="all",i=function(){Va("delayEnded",r,{evt:t}),Pl.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!da&&r.nativeDraggable&&(Ya.draggable=!0),r._triggerDragStart(t,e),Ka({sortable:r,name:"choose",originalEvent:t}),Aa(Ya,s.chosenClass,!0))},s.ignore.split(",").forEach((function(t){Ca(Ya,t.trim(),Fl)})),va(a,"dragover",Dl),va(a,"mousemove",Dl),va(a,"touchmove",Dl),va(a,"mouseup",r._onDrop),va(a,"touchend",r._onDrop),va(a,"touchcancel",r._onDrop),da&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Ya.draggable=!0),Va("delayStart",this,{evt:t}),!s.delay||s.delayOnTouchOnly&&!e||this.nativeDraggable&&(ha||ua))i();else{if(Pl.eventCanceled)return void this._onDrop();va(a,"mouseup",r._disableDelayedDrag),va(a,"touchend",r._disableDelayedDrag),va(a,"touchcancel",r._disableDelayedDrag),va(a,"mousemove",r._delayedDragTouchMoveHandler),va(a,"touchmove",r._delayedDragTouchMoveHandler),s.supportPointer&&va(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,s.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Ya&&Fl(Ya),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;ba(t,"mouseup",this._disableDelayedDrag),ba(t,"touchend",this._disableDelayedDrag),ba(t,"touchcancel",this._disableDelayedDrag),ba(t,"mousemove",this._delayedDragTouchMoveHandler),ba(t,"touchmove",this._delayedDragTouchMoveHandler),ba(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?va(document,"pointermove",this._onTouchMove):va(document,e?"touchmove":"mousemove",this._onTouchMove):(va(Ya,"dragend",this),va(Ga,"dragstart",this._onDragStart));try{document.selection?zl((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(yl=!1,Ga&&Ya){Va("dragStarted",this,{evt:e}),this.nativeDraggable&&va(document,"dragover",Bl);var n=this.options;!t&&Aa(Ya,n.dragClass,!1),Aa(Ya,n.ghostClass,!0),Pl.active=this,t&&this._appendGhost(),Ka({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(cl){this._lastX=cl.clientX,this._lastY=cl.clientY,ql();for(var t=document.elementFromPoint(cl.clientX,cl.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(cl.clientX,cl.clientY))!==e;)e=t;if(Ya.parentNode[$a]._isOutsideThisEl(t),e)do{if(e[$a]&&e[$a]._onDragOver({clientX:cl.clientX,clientY:cl.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=wa(e));jl()}},_onTouchMove:function(t){if(ll){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,r=t.touches?t.touches[0]:t,o=Xa&&Na(Xa,!0),s=Xa&&o&&o.a,a=Xa&&o&&o.d,l=Sl&&bl&&qa(bl),c=(r.clientX-ll.clientX+i.x)/(s||1)+(l?l[0]-Al[0]:0)/(s||1),u=(r.clientY-ll.clientY+i.y)/(a||1)+(l?l[1]-Al[1]:0)/(a||1);if(!Pl.active&&!yl){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Xa){o?(o.e+=c-(ul||0),o.f+=u-(hl||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");ka(Xa,"webkitTransform",h),ka(Xa,"mozTransform",h),ka(Xa,"msTransform",h),ka(Xa,"transform",h),ul=c,hl=u,cl=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Xa){var t=this.options.fallbackOnBody?document.body:Ga,e=Ta(Ya,!0,Sl,!0,t),n=this.options;if(Sl){for(bl=t;"static"===ka(bl,"position")&&"none"===ka(bl,"transform")&&bl!==document;)bl=bl.parentNode;bl!==document.body&&bl!==document.documentElement?(bl===document&&(bl=Sa()),e.top+=bl.scrollTop,e.left+=bl.scrollLeft):bl=Sa(),Al=qa(bl)}Aa(Xa=Ya.cloneNode(!0),n.ghostClass,!1),Aa(Xa,n.fallbackClass,!0),Aa(Xa,n.dragClass,!0),ka(Xa,"transition",""),ka(Xa,"transform",""),ka(Xa,"box-sizing","border-box"),ka(Xa,"margin",0),ka(Xa,"top",e.top),ka(Xa,"left",e.left),ka(Xa,"width",e.width),ka(Xa,"height",e.height),ka(Xa,"opacity","0.8"),ka(Xa,"position",Sl?"absolute":"fixed"),ka(Xa,"zIndex","100000"),ka(Xa,"pointerEvents","none"),Pl.ghost=Xa,t.appendChild(Xa),ka(Xa,"transform-origin",dl/parseInt(Xa.style.width)*100+"% "+pl/parseInt(Xa.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,r=n.options;Va("dragStart",this,{evt:t}),Pl.eventCanceled?this._onDrop():(Va("setupClone",this),Pl.eventCanceled||((tl=Ra(Ya)).removeAttribute("id"),tl.draggable=!1,tl.style["will-change"]="",this._hideClone(),Aa(tl,this.options.chosenClass,!1),Pl.clone=tl),n.cloneId=zl((function(){Va("clone",n),Pl.eventCanceled||(n.options.removeCloneOnHide||Ga.insertBefore(tl,Ya),n._hideClone(),Ka({sortable:n,name:"clone"}))})),!e&&Aa(Ya,r.dragClass,!0),e?(wl=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ba(document,"mouseup",n._onDrop),ba(document,"touchend",n._onDrop),ba(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,Ya)),va(document,"drop",n),ka(Ya,"transform","translateZ(0)")),yl=!0,n._dragStartId=zl(n._dragStarted.bind(n,e,t)),va(document,"selectstart",n),fl=!0,pa&&ka(document.body,"user-select","none"))},_onDragOver:function(t){var e,n,i,r,o=this.el,s=t.target,a=this.options,l=a.group,c=Pl.active,u=sl===l,h=a.sort,d=al||c,p=this,f=!1;if(!kl){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),s=_a(s,a.draggable,o,!0),T("dragOver"),Pl.eventCanceled)return f;if(Ya.contains(t.target)||s.animated&&s.animatingX&&s.animatingY||p._ignoreWhileAnimating===s)return O(!1);if(wl=!1,c&&!a.disabled&&(u?h||(i=Za!==Ga):al===this||(this.lastPutMode=sl.checkPull(this,c,Ya,t))&&l.checkPut(this,c,Ya,t))){if(r="vertical"===this._getDirection(t,s),e=Ta(Ya),T("dragOverValid"),Pl.eventCanceled)return f;if(i)return Za=Ga,L(),this._hideClone(),T("revert"),Pl.eventCanceled||(Qa?Ga.insertBefore(Ya,Qa):Ga.appendChild(Ya)),O(!0);var m=Ia(o,a.draggable);if(!m||function(t,e,n){var i=Ta(Ia(n.el,n.options.draggable)),r=Fa(n.el,n.options,Xa);return e?t.clientX>r.right+10||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>r.bottom+10||t.clientX>i.right&&t.clientY>i.top}(t,r,this)&&!m.animated){if(m===Ya)return O(!1);if(m&&o===t.target&&(s=m),s&&(n=Ta(s)),!1!==Rl(Ga,o,Ya,e,s,n,t,!!s))return L(),m&&m.nextSibling?o.insertBefore(Ya,m.nextSibling):o.appendChild(Ya),Za=o,I(),O(!0)}else if(m&&function(t,e,n){var i=Ta(Oa(n.el,0,n.options,!0)),r=Fa(n.el,n.options,Xa);return e?t.clientX<r.left-10||t.clientY<i.top&&t.clientX<i.right:t.clientY<r.top-10||t.clientY<i.bottom&&t.clientX<i.left}(t,r,this)){var g=Oa(o,0,a,!0);if(g===Ya)return O(!1);if(n=Ta(s=g),!1!==Rl(Ga,o,Ya,e,s,n,t,!1))return L(),o.insertBefore(Ya,g),Za=o,I(),O(!0)}else if(s.parentNode===o){n=Ta(s);var v,b,y,w=Ya.parentNode!==o,_=!function(t,e,n){var i=n?t.left:t.top,r=n?t.right:t.bottom,o=n?t.width:t.height,s=n?e.left:e.top,a=n?e.right:e.bottom,l=n?e.width:e.height;return i===s||r===a||i+o/2===s+l/2}(Ya.animated&&Ya.toRect||e,s.animated&&s.toRect||n,r),x=r?"top":"left",E=La(s,"top","top")||La(Ya,"top","top"),A=E?E.scrollTop:void 0;if(ml!==s&&(b=n[x],xl=!1,El=!_&&a.invertSwap||w),v=function(t,e,n,i,r,o,s,a){var l=i?t.clientY:t.clientX,c=i?n.height:n.width,u=i?n.top:n.left,h=i?n.bottom:n.right,d=!1;if(!s)if(a&&vl<c*r){if(!xl&&(1===gl?l>u+c*o/2:l<h-c*o/2)&&(xl=!0),xl)d=!0;else if(1===gl?l<u+vl:l>h-vl)return-gl}else if(l>u+c*(1-r)/2&&l<h-c*(1-r)/2)return function(t){return Ma(Ya)<Ma(t)?1:-1}(e);return(d=d||s)&&(l<u+c*o/2||l>h-c*o/2)?l>u+c/2?1:-1:0}(t,s,n,r,_?1:a.swapThreshold,null==a.invertedSwapThreshold?a.swapThreshold:a.invertedSwapThreshold,El,ml===s),0!==v){var k=Ma(Ya);do{k-=v,y=Za.children[k]}while(y&&("none"===ka(y,"display")||y===Xa))}if(0===v||y===s)return O(!1);ml=s,gl=v;var N=s.nextElementSibling,C=!1,S=Rl(Ga,o,Ya,e,s,n,t,C=1===v);if(!1!==S)return 1!==S&&-1!==S||(C=1===S),kl=!0,setTimeout($l,30),L(),C&&!N?o.appendChild(Ya):s.parentNode.insertBefore(Ya,C?N:s),E&&Pa(E,0,A-E.scrollTop),Za=Ya.parentNode,void 0===b||El||(vl=Math.abs(b-Ta(s)[x])),I(),O(!0)}if(o.contains(Ya))return O(!1)}return!1}function T(a,l){Va(a,p,oa({evt:t,isOwner:u,axis:r?"vertical":"horizontal",revert:i,dragRect:e,targetRect:n,canSort:h,fromSortable:d,target:s,completed:O,onMove:function(n,i){return Rl(Ga,o,Ya,e,n,Ta(n),t,i)},changed:I},l))}function L(){T("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function O(e){return T("dragOverCompleted",{insertion:e}),e&&(u?c._hideClone():c._showClone(p),p!==d&&(Aa(Ya,al?al.options.ghostClass:c.options.ghostClass,!1),Aa(Ya,a.ghostClass,!0)),al!==p&&p!==Pl.active?al=p:p===Pl.active&&al&&(al=null),d===p&&(p._ignoreWhileAnimating=s),p.animateAll((function(){T("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(s===Ya&&!Ya.animated||s===o&&!s.animated)&&(ml=null),a.dragoverBubble||t.rootEl||s===document||(Ya.parentNode[$a]._isOutsideThisEl(t.target),!e&&Dl(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),f=!0}function I(){il=Ma(Ya),ol=Ma(Ya,a.draggable),Ka({sortable:p,name:"change",toEl:o,newIndex:il,newDraggableIndex:ol,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){ba(document,"mousemove",this._onTouchMove),ba(document,"touchmove",this._onTouchMove),ba(document,"pointermove",this._onTouchMove),ba(document,"dragover",Dl),ba(document,"mousemove",Dl),ba(document,"touchmove",Dl)},_offUpEvents:function(){var t=this.el.ownerDocument;ba(t,"mouseup",this._onDrop),ba(t,"touchend",this._onDrop),ba(t,"pointerup",this._onDrop),ba(t,"touchcancel",this._onDrop),ba(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;il=Ma(Ya),ol=Ma(Ya,n.draggable),Va("drop",this,{evt:t}),Za=Ya&&Ya.parentNode,il=Ma(Ya),ol=Ma(Ya,n.draggable),Pl.eventCanceled||(yl=!1,El=!1,xl=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Hl(this.cloneId),Hl(this._dragStartId),this.nativeDraggable&&(ba(document,"drop",this),ba(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),pa&&ka(document.body,"user-select",""),ka(Ya,"transform",""),t&&(fl&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Xa&&Xa.parentNode&&Xa.parentNode.removeChild(Xa),(Ga===Za||al&&"clone"!==al.lastPutMode)&&tl&&tl.parentNode&&tl.parentNode.removeChild(tl),Ya&&(this.nativeDraggable&&ba(Ya,"dragend",this),Fl(Ya),Ya.style["will-change"]="",fl&&!yl&&Aa(Ya,al?al.options.ghostClass:this.options.ghostClass,!1),Aa(Ya,this.options.chosenClass,!1),Ka({sortable:this,name:"unchoose",toEl:Za,newIndex:null,newDraggableIndex:null,originalEvent:t}),Ga!==Za?(il>=0&&(Ka({rootEl:Za,name:"add",toEl:Za,fromEl:Ga,originalEvent:t}),Ka({sortable:this,name:"remove",toEl:Za,originalEvent:t}),Ka({rootEl:Za,name:"sort",toEl:Za,fromEl:Ga,originalEvent:t}),Ka({sortable:this,name:"sort",toEl:Za,originalEvent:t})),al&&al.save()):il!==nl&&il>=0&&(Ka({sortable:this,name:"update",toEl:Za,originalEvent:t}),Ka({sortable:this,name:"sort",toEl:Za,originalEvent:t})),Pl.active&&(null!=il&&-1!==il||(il=nl,ol=rl),Ka({sortable:this,name:"end",toEl:Za,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){Va("nulling",this),Ga=Ya=Za=Xa=Qa=tl=Ja=el=ll=cl=fl=il=ol=nl=rl=ml=gl=al=sl=Pl.dragged=Pl.ghost=Pl.clone=Pl.active=null,Nl.forEach((function(t){t.checked=!0})),Nl.length=ul=hl=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Ya&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)_a(t=n[i],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||Ul(t));return e},sort:function(t,e){var n={},i=this.el;this.toArray().forEach((function(t,e){var r=i.children[e];_a(r,this.options.draggable,i,!1)&&(n[t]=r)}),this),e&&this.captureAnimationState(),t.forEach((function(t){n[t]&&(i.removeChild(n[t]),i.appendChild(n[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return _a(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var i=Ha.modifyOption(this,t,e);n[t]=void 0!==i?i:e,"group"===t&&Ml(n)},destroy:function(){Va("destroy",this);var t=this.el;t[$a]=null,ba(t,"mousedown",this._onTapStart),ba(t,"touchstart",this._onTapStart),ba(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(ba(t,"dragover",this),ba(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),_l.splice(_l.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!el){if(Va("hideClone",this),Pl.eventCanceled)return;ka(tl,"display","none"),this.options.removeCloneOnHide&&tl.parentNode&&tl.parentNode.removeChild(tl),el=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(el){if(Va("showClone",this),Pl.eventCanceled)return;Ya.parentNode!=Ga||this.options.group.revertClone?Qa?Ga.insertBefore(tl,Qa):Ga.appendChild(tl):Ga.insertBefore(tl,Ya),this.options.group.revertClone&&this.animate(Ya,tl),ka(tl,"display",""),el=!1}}else this._hideClone()}},Cl&&va(document,"touchmove",(function(t){(Pl.active||yl)&&t.cancelable&&t.preventDefault()})),Pl.utils={on:va,off:ba,css:ka,find:Ca,is:function(t,e){return!!_a(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:Ba,closest:_a,toggleClass:Aa,clone:Ra,index:Ma,nextTick:zl,cancelNextTick:Hl,detectDirection:Il,getChild:Oa,expando:$a},Pl.get=function(t){return t[$a]},Pl.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Pl.utils=oa(oa({},Pl.utils),t.utils)),Ha.mount(t)}))},Pl.create=function(t,e){return new Pl(t,e)},Pl.version="1.15.3";var Wl,Vl,Kl,Yl,Zl,Xl,Gl=[],Ql=!1;function Jl(){Gl.forEach((function(t){clearInterval(t.pid)})),Gl=[]}function tc(){clearInterval(Xl)}var ec=Ba((function(t,e,n,i){if(e.scroll){var r,o=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,l=e.scrollSpeed,c=Sa(),u=!1;Vl!==n&&(Vl=n,Jl(),Wl=e.scroll,r=e.scrollFn,!0===Wl&&(Wl=ja(n,!0)));var h=0,d=Wl;do{var p=d,f=Ta(p),m=f.top,g=f.bottom,v=f.left,b=f.right,y=f.width,w=f.height,_=void 0,x=void 0,E=p.scrollWidth,A=p.scrollHeight,k=ka(p),N=p.scrollLeft,C=p.scrollTop;p===c?(_=y<E&&("auto"===k.overflowX||"scroll"===k.overflowX||"visible"===k.overflowX),x=w<A&&("auto"===k.overflowY||"scroll"===k.overflowY||"visible"===k.overflowY)):(_=y<E&&("auto"===k.overflowX||"scroll"===k.overflowX),x=w<A&&("auto"===k.overflowY||"scroll"===k.overflowY));var S=_&&(Math.abs(b-o)<=a&&N+y<E)-(Math.abs(v-o)<=a&&!!N),T=x&&(Math.abs(g-s)<=a&&C+w<A)-(Math.abs(m-s)<=a&&!!C);if(!Gl[h])for(var L=0;L<=h;L++)Gl[L]||(Gl[L]={});Gl[h].vx==S&&Gl[h].vy==T&&Gl[h].el===p||(Gl[h].el=p,Gl[h].vx=S,Gl[h].vy=T,clearInterval(Gl[h].pid),0==S&&0==T||(u=!0,Gl[h].pid=setInterval(function(){i&&0===this.layer&&Pl.active._onTouchMove(Zl);var e=Gl[this.layer].vy?Gl[this.layer].vy*l:0,n=Gl[this.layer].vx?Gl[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(Pl.dragged.parentNode[$a],n,e,t,Zl,Gl[this.layer].el)||Pa(Gl[this.layer].el,n,e)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==c&&(d=ja(d,!1)));Ql=u}}),30),nc=function(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,r=t.activeSortable,o=t.dispatchSortableEvent,s=t.hideGhostForTarget,a=t.unhideGhostForTarget;if(e){var l=n||r;s();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(c.clientX,c.clientY);a(),l&&!l.el.contains(u)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function ic(){}function rc(){}ic.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=Oa(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:nc},la(ic,{pluginName:"revertOnSpill"}),rc.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:nc},la(rc,{pluginName:"removeOnSpill"}),Pl.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?va(document,"dragover",this._handleAutoScroll):this.options.supportPointer?va(document,"pointermove",this._handleFallbackAutoScroll):e.touches?va(document,"touchmove",this._handleFallbackAutoScroll):va(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?ba(document,"dragover",this._handleAutoScroll):(ba(document,"pointermove",this._handleFallbackAutoScroll),ba(document,"touchmove",this._handleFallbackAutoScroll),ba(document,"mousemove",this._handleFallbackAutoScroll)),tc(),Jl(),clearTimeout(xa),xa=void 0},nulling:function(){Zl=Vl=Wl=Ql=Xl=Kl=Yl=null,Gl.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,i=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(i,r);if(Zl=t,e||this.options.forceAutoScrollFallback||ha||ua||pa){ec(t,this.options,o,e);var s=ja(o,!0);!Ql||Xl&&i===Kl&&r===Yl||(Xl&&tc(),Xl=setInterval((function(){var o=ja(document.elementFromPoint(i,r),!0);o!==s&&(s=o,Jl()),ec(t,n.options,o,e)}),10),Kl=i,Yl=r)}else{if(!this.options.bubbleScroll||ja(o,!0)===Sa())return void Jl();ec(t,this.options,ja(o,!1),!1)}}},la(t,{pluginName:"scroll",initializeByDefault:!0})}),Pl.mount(rc,ic);const oc=Pl;let sc={};function ac(t={}){sc={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function lc(t){return t?sc[t]:sc}function cc(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function uc(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap((t=>{const n=t.matches(e),i=Array.from(t.querySelectorAll(e));return[...n?[t]:[],...i]})).filter((t=>"none"!==getComputedStyle(t).pointerEvents&&function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}(t)))}function hc(t){if(!t||function(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}(t))return;const e=lc("smoothScroll");t.scrollIntoView({behavior:!e||dc(t)?"auto":"smooth",inline:"center",block:"center"})}function dc(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}let pc={};function fc(t,e){pc[t]=e}function mc(t){return t?pc[t]:pc}function gc(){pc={}}let vc={};function bc(t,e){vc[t]=e}function yc(t){var e;null==(e=vc[t])||e.call(vc)}function wc(t){if(!t)return;const e=t.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height};fc("__activeStagePosition",n),_c(n)}function _c(t){const e=mc("__overlaySvg");if(!e)return void function(t){const e=function(t){const e=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",xc(t)),r.style.fill=lc("overlayColor")||"rgb(0,0,0)",r.style.opacity=`${lc("overlayOpacity")}`,r.style.pointerEvents="auto",r.style.cursor="auto",i.appendChild(r),i}(t);document.body.appendChild(e),Sc(e,(t=>{"path"===t.target.tagName&&yc("overlayClick")})),fc("__overlaySvg",e)}(t);const n=e.firstElementChild;if("path"!==(null==n?void 0:n.tagName))throw new Error("no path element found in stage svg");n.setAttribute("d",xc(t))}function xc(t){const e=window.innerWidth,n=window.innerHeight,i=lc("stagePadding")||0,r=lc("stageRadius")||0,o=t.width+2*i,s=t.height+2*i,a=Math.min(r,o/2,s/2),l=Math.floor(Math.max(a,0)),c=o-2*l,u=s-2*l;return`M${e},0L0,0L0,${n}L${e},${n}L${e},0Z\n    M${t.x-i+l},${t.y-i} h${c} a${l},${l} 0 0 1 ${l},${l} v${u} a${l},${l} 0 0 1 -${l},${l} h-${c} a${l},${l} 0 0 1 -${l},-${l} v-${u} a${l},${l} 0 0 1 ${l},-${l} z`}function Ec(t){const{element:e}=t;let n="string"==typeof e?document.querySelector(e):e;n||(n=function(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}()),function(t,e){const n=Date.now(),i=mc("__activeStep"),r=mc("__activeElement")||t,o=!r||r===t,s="driver-dummy-element"===t.id,a="driver-dummy-element"===r.id,l=lc("animate"),c=e.onHighlightStarted||lc("onHighlightStarted"),u=(null==e?void 0:e.onHighlighted)||lc("onHighlighted"),h=(null==i?void 0:i.onDeselected)||lc("onDeselected"),d=lc(),p=mc();!o&&h&&h(a?void 0:r,i,{config:d,state:p}),c&&c(s?void 0:t,e,{config:d,state:p});const f=!o&&l;let m=!1;(function(){const t=mc("popover");t&&(t.wrapper.style.display="none")})(),fc("previousStep",i),fc("previousElement",r),fc("activeStep",e),fc("activeElement",t);const g=()=>{if(mc("__transitionCallback")!==g)return;const o=Date.now()-n,a=400-o<=200;e.popover&&a&&!m&&f&&(Tc(t,e),m=!0),lc("animate")&&o<400?function(t,e,n,i){let r=mc("__activeStagePosition");const o=r||n.getBoundingClientRect(),s=i.getBoundingClientRect();r={x:cc(t,o.x,s.x-o.x,e),y:cc(t,o.y,s.y-o.y,e),width:cc(t,o.width,s.width-o.width,e),height:cc(t,o.height,s.height-o.height,e)},_c(r),fc("__activeStagePosition",r)}(o,400,r,t):(wc(t),u&&u(s?void 0:t,e,{config:lc(),state:mc()}),fc("__transitionCallback",void 0),fc("__previousStep",i),fc("__previousElement",r),fc("__activeStep",e),fc("__activeElement",t)),window.requestAnimationFrame(g)};fc("__transitionCallback",g),window.requestAnimationFrame(g),hc(t),!f&&e.popover&&Tc(t,e),r.classList.remove("driver-active-element","driver-no-interaction"),r.removeAttribute("aria-haspopup"),r.removeAttribute("aria-expanded"),r.removeAttribute("aria-controls"),lc("disableActiveInteraction")&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}(n,t)}function Ac(){const t=mc("__activeElement"),e=mc("__activeStep");t&&(wc(t),function(){const t=mc("__activeStagePosition"),e=mc("__overlaySvg");if(!t)return;if(!e)return void console.warn("No stage svg found.");const n=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${n} ${i}`)}(),Mc(t,e))}function kc(){const t=mc("__resizeTimeout");t&&window.cancelAnimationFrame(t),fc("__resizeTimeout",window.requestAnimationFrame(Ac))}function Nc(t){var e;if(!mc("isInitialized")||"Tab"!==t.key&&9!==t.keyCode)return;const n=mc("__activeElement"),i=null==(e=mc("popover"))?void 0:e.wrapper,r=uc([...i?[i]:[],...n?[n]:[]]),o=r[0],s=r[r.length-1];if(t.preventDefault(),t.shiftKey){const t=r[r.indexOf(document.activeElement)-1]||s;null==t||t.focus()}else{const t=r[r.indexOf(document.activeElement)+1]||o;null==t||t.focus()}}function Cc(t){var e;(null==(e=lc("allowKeyboardControl"))||e)&&("Escape"===t.key?yc("escapePress"):"ArrowRight"===t.key?yc("arrowRightPress"):"ArrowLeft"===t.key&&yc("arrowLeftPress"))}function Sc(t,e,n){const i=(e,i)=>{const r=e.target;t.contains(r)&&((!n||n(r))&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),null==i||i(e))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",(t=>{i(t,e)}),!0)}function Tc(t,e){var n,i;let r=mc("popover");r&&document.body.removeChild(r.wrapper),r=function(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const r=document.createElement("button");r.type="button",r.classList.add("driver-popover-close-btn"),r.setAttribute("aria-label","Close"),r.innerHTML="&times;";const o=document.createElement("footer");o.classList.add("driver-popover-footer");const s=document.createElement("span");s.classList.add("driver-popover-progress-text"),s.innerText="";const a=document.createElement("span");a.classList.add("driver-popover-navigation-btns");const l=document.createElement("button");l.type="button",l.classList.add("driver-popover-prev-btn"),l.innerHTML="&larr; Previous";const c=document.createElement("button");return c.type="button",c.classList.add("driver-popover-next-btn"),c.innerHTML="Next &rarr;",a.appendChild(l),a.appendChild(c),o.appendChild(s),o.appendChild(a),t.appendChild(r),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(o),{wrapper:t,arrow:e,title:n,description:i,footer:o,previousButton:l,nextButton:c,closeButton:r,footerButtons:a,progress:s}}(),document.body.appendChild(r.wrapper);const{title:o,description:s,showButtons:a,disableButtons:l,showProgress:c,nextBtnText:u=lc("nextBtnText")||"Next &rarr;",prevBtnText:h=lc("prevBtnText")||"&larr; Previous",progressText:d=lc("progressText")||"{current} of {total}"}=e.popover||{};r.nextButton.innerHTML=u,r.previousButton.innerHTML=h,r.progress.innerHTML=d,o?(r.title.innerHTML=o,r.title.style.display="block"):r.title.style.display="none",s?(r.description.innerHTML=s,r.description.style.display="block"):r.description.style.display="none";const p=a||lc("showButtons"),f=c||lc("showProgress")||!1,m=(null==p?void 0:p.includes("next"))||(null==p?void 0:p.includes("previous"))||f;r.closeButton.style.display=p.includes("close")?"block":"none",m?(r.footer.style.display="flex",r.progress.style.display=f?"block":"none",r.nextButton.style.display=p.includes("next")?"block":"none",r.previousButton.style.display=p.includes("previous")?"block":"none"):r.footer.style.display="none";const g=l||lc("disableButtons")||[];null!=g&&g.includes("next")&&(r.nextButton.disabled=!0,r.nextButton.classList.add("driver-popover-btn-disabled")),null!=g&&g.includes("previous")&&(r.previousButton.disabled=!0,r.previousButton.classList.add("driver-popover-btn-disabled")),null!=g&&g.includes("close")&&(r.closeButton.disabled=!0,r.closeButton.classList.add("driver-popover-btn-disabled"));const v=r.wrapper;v.style.display="block",v.style.left="",v.style.top="",v.style.bottom="",v.style.right="",v.id="driver-popover-content",v.setAttribute("role","dialog"),v.setAttribute("aria-labelledby","driver-popover-title"),v.setAttribute("aria-describedby","driver-popover-description"),r.arrow.className="driver-popover-arrow";const b=(null==(n=e.popover)?void 0:n.popoverClass)||lc("popoverClass")||"";v.className=`driver-popover ${b}`.trim(),Sc(r.wrapper,(n=>{var i,r,o;const s=n.target,a=(null==(i=e.popover)?void 0:i.onNextClick)||lc("onNextClick"),l=(null==(r=e.popover)?void 0:r.onPrevClick)||lc("onPrevClick"),c=(null==(o=e.popover)?void 0:o.onCloseClick)||lc("onCloseClick");return s.classList.contains("driver-popover-next-btn")?a?a(t,e,{config:lc(),state:mc()}):yc("nextClick"):s.classList.contains("driver-popover-prev-btn")?l?l(t,e,{config:lc(),state:mc()}):yc("prevClick"):s.classList.contains("driver-popover-close-btn")?c?c(t,e,{config:lc(),state:mc()}):yc("closeClick"):void 0}),(t=>!(null!=r&&r.description.contains(t))&&!(null!=r&&r.title.contains(t))&&"string"==typeof t.className&&t.className.includes("driver-popover"))),fc("popover",r);const y=(null==(i=e.popover)?void 0:i.onPopoverRender)||lc("onPopoverRender");y&&y(r,{config:lc(),state:mc()}),Mc(t,e),hc(v);const w=uc([v,...t.classList.contains("driver-dummy-element")?[]:[t]]);w.length>0&&w[0].focus()}function Lc(){const t=mc("popover");if(null==t||!t.wrapper)return;const e=t.wrapper.getBoundingClientRect(),n=lc("stagePadding")||0,i=lc("popoverOffset")||0;return{width:e.width+n+i,height:e.height+n+i,realWidth:e.width,realHeight:e.height}}function Oc(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:r,popoverArrowDimensions:o}=e;return"start"===t?Math.max(Math.min(n.top-r,window.innerHeight-i.realHeight-o.width),o.width):"end"===t?Math.max(Math.min(n.top-(null==i?void 0:i.realHeight)+n.height+r,window.innerHeight-(null==i?void 0:i.realHeight)-o.width),o.width):"center"===t?Math.max(Math.min(n.top+n.height/2-(null==i?void 0:i.realHeight)/2,window.innerHeight-(null==i?void 0:i.realHeight)-o.width),o.width):0}function Ic(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:r,popoverArrowDimensions:o}=e;return"start"===t?Math.max(Math.min(n.left-r,window.innerWidth-i.realWidth-o.width),o.width):"end"===t?Math.max(Math.min(n.left-(null==i?void 0:i.realWidth)+n.width+r,window.innerWidth-(null==i?void 0:i.realWidth)-o.width),o.width):"center"===t?Math.max(Math.min(n.left+n.width/2-(null==i?void 0:i.realWidth)/2,window.innerWidth-(null==i?void 0:i.realWidth)-o.width),o.width):0}function Mc(t,e){const n=mc("popover");if(!n)return;const{align:i="start",side:r="left"}=(null==e?void 0:e.popover)||{},o=i,s="driver-dummy-element"===t.id?"over":r,a=lc("stagePadding")||0,l=Lc(),c=n.arrow.getBoundingClientRect(),u=t.getBoundingClientRect(),h=u.top-l.height;let d=h>=0;const p=window.innerHeight-(u.bottom+l.height);let f=p>=0;const m=u.left-l.width;let g=m>=0;const v=window.innerWidth-(u.right+l.width);let b=v>=0;const y=!(d||f||g||b);let w=s;if("top"===s&&d?b=g=f=!1:"bottom"===s&&f?b=g=d=!1:"left"===s&&g?b=d=f=!1:"right"===s&&b&&(g=d=f=!1),"over"===s){const t=window.innerWidth/2-l.realWidth/2,e=window.innerHeight/2-l.realHeight/2;n.wrapper.style.left=`${t}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${e}px`,n.wrapper.style.bottom="auto"}else if(y){const t=window.innerWidth/2-(null==l?void 0:l.realWidth)/2,e=10;n.wrapper.style.left=`${t}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${e}px`,n.wrapper.style.top="auto"}else if(g){const t=Math.min(m,window.innerWidth-(null==l?void 0:l.realWidth)-c.width),e=Oc(o,{elementDimensions:u,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:c});n.wrapper.style.left=`${t}px`,n.wrapper.style.top=`${e}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",w="left"}else if(b){const t=Math.min(v,window.innerWidth-(null==l?void 0:l.realWidth)-c.width),e=Oc(o,{elementDimensions:u,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:c});n.wrapper.style.right=`${t}px`,n.wrapper.style.top=`${e}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",w="right"}else if(d){const t=Math.min(h,window.innerHeight-l.realHeight-c.width);let e=Ic(o,{elementDimensions:u,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:c});n.wrapper.style.top=`${t}px`,n.wrapper.style.left=`${e}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",w="top"}else if(f){const t=Math.min(p,window.innerHeight-(null==l?void 0:l.realHeight)-c.width);let e=Ic(o,{elementDimensions:u,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:c});n.wrapper.style.left=`${e}px`,n.wrapper.style.bottom=`${t}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",w="bottom"}y?n.arrow.classList.add("driver-popover-arrow-none"):function(t,e,n){const i=mc("popover");if(!i)return;const r=n.getBoundingClientRect(),o=Lc(),s=i.arrow,a=o.width,l=window.innerWidth,c=r.width,u=r.left,h=o.height,d=window.innerHeight,p=r.top,f=r.height;s.className="driver-popover-arrow";let m=e,g=t;"top"===e?(u+c<=0?(m="right",g="end"):u+c-a<=0&&(m="top",g="start"),u>=l?(m="left",g="end"):u+a>=l&&(m="top",g="end")):"bottom"===e?(u+c<=0?(m="right",g="start"):u+c-a<=0&&(m="bottom",g="start"),u>=l?(m="left",g="start"):u+a>=l&&(m="bottom",g="end")):"left"===e?(p+f<=0?(m="bottom",g="end"):p+f-h<=0&&(m="left",g="start"),p>=d?(m="top",g="end"):p+h>=d&&(m="left",g="end")):"right"===e&&(p+f<=0?(m="bottom",g="start"):p+f-h<=0&&(m="right",g="start"),p>=d?(m="top",g="start"):p+h>=d&&(m="right",g="end")),m?(s.classList.add(`driver-popover-arrow-side-${m}`),s.classList.add(`driver-popover-arrow-align-${g}`)):s.classList.add("driver-popover-arrow-none")}(o,w,t)}const qc=document.getElementById("contribute-form"),jc=document.getElementById("contribute-switch-advanced"),Dc=document.getElementsByClassName("contribute-advanced"),Bc=()=>{jc.addEventListener("click",(t=>{Array.from(Dc).forEach((t=>{jc.checked?(t.classList.add("d-block"),t.classList.remove("d-none")):(t.classList.add("d-none"),t.classList.remove("d-block"))}))}))},Pc=()=>{document.querySelectorAll(".alternative-language").forEach((t=>{t.addEventListener("click",(t=>{const e=t.target.id.split("-").pop(),n=`${t.target.id.replace(`-${e}`,"")}-${"english"===e?"welsh":"english"}`,i=document.getElementById(n);i&&(i.classList.toggle("d-none"),i.classList.toggle("d-block"))}))}))},Rc=()=>{document.getElementById("contributeItemSubmit").addEventListener("click",(t=>{t.preventDefault();const{count:e,messages:n}={count:0,messages:Js};if(e>0){document.getElementById("contributeModalToolipTitle").innerText="Consider Improving Your Metadata";let t=`<p>You have ${e} issue(s) with your metadata. Please review the following:</p>`;t+='<ul class="list-group list-group-flush">',Object.keys(n).forEach((e=>{t+=`<li class="list-group-item">${n[e].join(", ")}</li>`})),t+="</ul>",t+="<p>Watch the video below to learn more about metadata quality:</p>",t+='<iframe width="100%" height="315" src="https://www.youtube.com/embed/MPY_EuvimH0?si=9SAMucQNfy-dN3wH&amp;start=30" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>',document.getElementById("contributeModalToolipBody").innerHTML=t;const i=document.getElementById("contributeModalToolip"),r=new co(i,{keyboard:!0});return i.addEventListener("hidden.bs.modal",(t=>{document.getElementById("contributeModalToolipTitle").innerText="",document.getElementById("contributeModalToolipBody").innerHTML=""})),void r.show()}alert("Form submitted successfully")}))},Fc=()=>{document.getElementById("contributeTour").addEventListener("click",(t=>{t.preventDefault(),function(t={}){function e(){lc("allowClose")&&l()}function n(){const t=mc("activeIndex"),e=lc("steps")||[];if(void 0===t)return;const n=t+1;e[n]?a(n):l()}function i(){const t=mc("activeIndex"),e=lc("steps")||[];if(void 0===t)return;const n=t-1;e[n]?a(n):l()}function r(){var t;if(mc("__transitionCallback"))return;const e=mc("activeIndex"),n=mc("__activeStep"),r=mc("__activeElement");if(void 0===e||void 0===n||void 0===mc("activeIndex"))return;const o=(null==(t=n.popover)?void 0:t.onPrevClick)||lc("onPrevClick");if(o)return o(r,n,{config:lc(),state:mc()});i()}function o(){var t;if(mc("__transitionCallback"))return;const e=mc("activeIndex"),i=mc("__activeStep"),r=mc("__activeElement");if(void 0===e||void 0===i)return;const o=(null==(t=i.popover)?void 0:t.onNextClick)||lc("onNextClick");if(o)return o(r,i,{config:lc(),state:mc()});n()}function s(){mc("isInitialized")||(fc("isInitialized",!0),document.body.classList.add("driver-active",lc("animate")?"driver-fade":"driver-simple"),window.addEventListener("keyup",Cc,!1),window.addEventListener("keydown",Nc,!1),window.addEventListener("resize",kc),window.addEventListener("scroll",kc),bc("overlayClick",e),bc("escapePress",e),bc("arrowLeftPress",r),bc("arrowRightPress",o))}function a(t=0){var e,n,i,r,o,s,c,u;const h=lc("steps");if(!h)return console.error("No steps to drive through"),void l();if(!h[t])return void l();fc("__activeOnDestroyed",document.activeElement),fc("activeIndex",t);const d=h[t],p=h[t+1],f=h[t-1],m=(null==(e=d.popover)?void 0:e.doneBtnText)||lc("doneBtnText")||"Done",g=lc("allowClose"),v=void 0!==(null==(n=d.popover)?void 0:n.showProgress)?null==(i=d.popover)?void 0:i.showProgress:lc("showProgress"),b=((null==(r=d.popover)?void 0:r.progressText)||lc("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${t+1}`).replace("{{total}}",`${h.length}`),y=(null==(o=d.popover)?void 0:o.showButtons)||lc("showButtons"),w=["next","previous",...g?["close"]:[]].filter((t=>!(null!=y&&y.length)||y.includes(t))),_=(null==(s=d.popover)?void 0:s.onNextClick)||lc("onNextClick"),x=(null==(c=d.popover)?void 0:c.onPrevClick)||lc("onPrevClick"),E=(null==(u=d.popover)?void 0:u.onCloseClick)||lc("onCloseClick");Ec({...d,popover:{showButtons:w,nextBtnText:p?void 0:m,disableButtons:[...f?[]:["previous"]],showProgress:v,progressText:b,onNextClick:_||(()=>{p?a(t+1):l()}),onPrevClick:x||(()=>{a(t-1)}),onCloseClick:E||(()=>{l()}),...(null==d?void 0:d.popover)||{}}})}function l(t=!0){const e=mc("__activeElement"),n=mc("__activeStep"),i=mc("__activeOnDestroyed"),r=lc("onDestroyStarted");if(t&&r)return void r(e&&"driver-dummy-element"!==(null==e?void 0:e.id)?e:void 0,n,{config:lc(),state:mc()});const o=(null==n?void 0:n.onDeselected)||lc("onDeselected"),s=lc("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),window.removeEventListener("keyup",Cc),window.removeEventListener("resize",kc),window.removeEventListener("scroll",kc),function(){var t;const e=mc("popover");e&&(null==(t=e.wrapper.parentElement)||t.removeChild(e.wrapper))}(),function(){var t;null==(t=document.getElementById("driver-dummy-element"))||t.remove(),document.querySelectorAll(".driver-active-element").forEach((t=>{t.classList.remove("driver-active-element","driver-no-interaction"),t.removeAttribute("aria-haspopup"),t.removeAttribute("aria-expanded"),t.removeAttribute("aria-controls")}))}(),function(){const t=mc("__overlaySvg");t&&t.remove()}(),vc={},gc(),e&&n){const t="driver-dummy-element"===e.id;o&&o(t?void 0:e,n,{config:lc(),state:mc()}),s&&s(t?void 0:e,n,{config:lc(),state:mc()})}i&&i.focus()}return ac(t),{isActive:()=>mc("isInitialized")||!1,refresh:kc,drive:(t=0)=>{s(),a(t)},setConfig:ac,setSteps:t=>{gc(),ac({...lc(),steps:t})},getConfig:lc,getState:mc,getActiveIndex:()=>mc("activeIndex"),isFirstStep:()=>0===mc("activeIndex"),isLastStep:()=>{const t=lc("steps")||[],e=mc("activeIndex");return void 0!==e&&e===t.length-1},getActiveStep:()=>mc("activeStep"),getActiveElement:()=>mc("activeElement"),getPreviousElement:()=>mc("previousElement"),getPreviousStep:()=>mc("previousStep"),moveNext:n,movePrevious:i,moveTo:function(t){(lc("steps")||[])[t]?a(t):l()},hasNextStep:()=>{const t=lc("steps")||[],e=mc("activeIndex");return void 0!==e&&t[e+1]},hasPreviousStep:()=>{const t=lc("steps")||[],e=mc("activeIndex");return void 0!==e&&t[e-1]},highlight:t=>{s(),Ec({...t,popover:t.popover?{showButtons:[],showProgress:!1,progressText:"",...t.popover}:void 0})},destroy:()=>{l(!1)}}}({showProgress:!0,steps:[{element:"#contributeTitleContainer",popover:{title:"Title",description:"Short Title"}},{element:"#contributeDescriptionContainer",popover:{title:"Description",description:"Write a description!"}},{element:"#contributeCreatorContainer",popover:{title:"Creator",description:"Creator of the original item, such as the name of photographer, author, artist etc."}},{element:"#contributeFacetContainer",popover:{title:"Facets",description:"relevant categories below"}},{element:"#contributeMapContainer",popover:{title:"Map",description:"Drop a pin"}},{element:"#contributeTocContainer",popover:{title:"Agree to Terms",description:"Agree to the terms!"}},{element:"#conributeSubmitButtonsContainer",popover:{title:"Save or Publish",description:"Save your work for later or publish"}}],onDestroyed:()=>{window.scrollTo(0,0)}}).drive()}))};var $c=function t(){var e=[].slice.call(arguments),n=!1;"boolean"==typeof e[0]&&(n=e.shift());var i,r=e[0];if(Uc(r))throw new Error("extendee must be an object");for(var o=e.slice(1),s=o.length,a=0;a<s;a++){var l=o[a];for(var c in l)if(Object.prototype.hasOwnProperty.call(l,c)){var u=l[c];if(n&&(i=u,Array.isArray(i)||"[object Object]"=={}.toString.call(i))){var h=Array.isArray(u)?[]:{};r[c]=t(!0,Object.prototype.hasOwnProperty.call(r,c)&&!Uc(r[c])?r[c]:h,u)}else r[c]=u}}return r};function Uc(t){return!t||"object"!=typeof t&&"function"!=typeof t}function zc(t){return t&&t.__esModule?t.default:t}class Hc{on(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this}emit(t,...e){this._callbacks=this._callbacks||{};let n=this._callbacks[t];if(n)for(let t of n)t.apply(this,e);return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+t,{args:e})),this}makeEvent(t,e){let n={bubbles:!0,cancelable:!0,detail:e};if("function"==typeof window.CustomEvent)return new CustomEvent(t,n);var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i}off(t,e){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;let n=this._callbacks[t];if(!n)return this;if(1===arguments.length)return delete this._callbacks[t],this;for(let t=0;t<n.length;t++)if(n[t]===e){n.splice(t,1);break}return this}}var Wc={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2097152,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,defaultHeaders:!0,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init(){},params(t,e,n){if(n)return{dzuuid:n.file.upload.uuid,dzchunkindex:n.index,dztotalfilesize:n.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:n.file.upload.totalChunkCount,dzchunkbyteoffset:n.index*this.options.chunkSize}},accept:(t,e)=>e(),chunksUploaded:function(t,e){e()},binaryBody:!1,fallback(){let t;this.element.className=`${this.element.className} dz-browser-not-supported`;for(let e of this.element.getElementsByTagName("div"))if(/(^| )dz-message($| )/.test(e.className)){t=e,e.className="dz-message";break}t||(t=Vc.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t));let e=t.getElementsByTagName("span")[0];return e&&(null!=e.textContent?e.textContent=this.options.dictFallbackMessage:null!=e.innerText&&(e.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize(t,e,n,i){let r={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},o=t.width/t.height;null==e&&null==n?(e=r.srcWidth,n=r.srcHeight):null==e?e=n*o:null==n&&(n=e/o);let s=(e=Math.min(e,r.srcWidth))/(n=Math.min(n,r.srcHeight));if(r.srcWidth>e||r.srcHeight>n)if("crop"===i)o>s?(r.srcHeight=t.height,r.srcWidth=r.srcHeight*s):(r.srcWidth=t.width,r.srcHeight=r.srcWidth/s);else{if("contain"!==i)throw new Error(`Unknown resizeMethod '${i}'`);o>s?n=e/o:e=n*o}return r.srcX=(t.width-r.srcWidth)/2,r.srcY=(t.height-r.srcHeight)/2,r.trgWidth=e,r.trgHeight=n,r},transformFile(t,e){return(this.options.resizeWidth||this.options.resizeHeight)&&t.type.match(/image.*/)?this.resizeImage(t,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,e):e(t)},previewTemplate:zc('<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail=""></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size=""></span></div>\n    <div class="dz-filename"><span data-dz-name=""></span></div>\n  </div>\n  <div class="dz-progress">\n    <span class="dz-upload" data-dz-uploadprogress=""></span>\n  </div>\n  <div class="dz-error-message"><span data-dz-errormessage=""></span></div>\n  <div class="dz-success-mark">\n    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">\n      <path d="M10.2071 29.7929L14.2929 25.7071C14.6834 25.3166 15.3166 25.3166 15.7071 25.7071L21.2929 31.2929C21.6834 31.6834 22.3166 31.6834 22.7071 31.2929L38.2929 15.7071C38.6834 15.3166 39.3166 15.3166 39.7071 15.7071L43.7929 19.7929C44.1834 20.1834 44.1834 20.8166 43.7929 21.2071L22.7071 42.2929C22.3166 42.6834 21.6834 42.6834 21.2929 42.2929L10.2071 31.2071C9.81658 30.8166 9.81658 30.1834 10.2071 29.7929Z"></path>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">\n      <path d="M26.2929 20.2929L19.2071 13.2071C18.8166 12.8166 18.1834 12.8166 17.7929 13.2071L13.2071 17.7929C12.8166 18.1834 12.8166 18.8166 13.2071 19.2071L20.2929 26.2929C20.6834 26.6834 20.6834 27.3166 20.2929 27.7071L13.2071 34.7929C12.8166 35.1834 12.8166 35.8166 13.2071 36.2071L17.7929 40.7929C18.1834 41.1834 18.8166 41.1834 19.2071 40.7929L26.2929 33.7071C26.6834 33.3166 27.3166 33.3166 27.7071 33.7071L34.7929 40.7929C35.1834 41.1834 35.8166 41.1834 36.2071 40.7929L40.7929 36.2071C41.1834 35.8166 41.1834 35.1834 40.7929 34.7929L33.7071 27.7071C33.3166 27.3166 33.3166 26.6834 33.7071 26.2929L40.7929 19.2071C41.1834 18.8166 41.1834 18.1834 40.7929 17.7929L36.2071 13.2071C35.8166 12.8166 35.1834 12.8166 34.7929 13.2071L27.7071 20.2929C27.3166 20.6834 26.6834 20.6834 26.2929 20.2929Z"></path>\n    </svg>\n  </div>\n</div>\n'),drop(t){return this.element.classList.remove("dz-drag-hover")},dragstart(t){},dragend(t){return this.element.classList.remove("dz-drag-hover")},dragenter(t){return this.element.classList.add("dz-drag-hover")},dragover(t){return this.element.classList.add("dz-drag-hover")},dragleave(t){return this.element.classList.remove("dz-drag-hover")},paste(t){},reset(){return this.element.classList.remove("dz-started")},addedfile(t){if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){for(var e of(t.previewElement=Vc.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),t.previewElement.querySelectorAll("[data-dz-name]")))e.textContent=t.name;for(e of t.previewElement.querySelectorAll("[data-dz-size]"))e.innerHTML=this.filesize(t.size);this.options.addRemoveLinks&&(t._removeLink=Vc.createElement(`<a class="dz-remove" href="javascript:undefined;" data-dz-remove>${this.options.dictRemoveFile}</a>`),t.previewElement.appendChild(t._removeLink));let n=e=>(e.preventDefault(),e.stopPropagation(),t.status===Vc.UPLOADING?Vc.confirm(this.options.dictCancelUploadConfirmation,(()=>this.removeFile(t))):this.options.dictRemoveFileConfirmation?Vc.confirm(this.options.dictRemoveFileConfirmation,(()=>this.removeFile(t))):this.removeFile(t));for(let e of t.previewElement.querySelectorAll("[data-dz-remove]"))e.addEventListener("click",n)}},removedfile(t){return null!=t.previewElement&&null!=t.previewElement.parentNode&&t.previewElement.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail(t,e){if(t.previewElement){t.previewElement.classList.remove("dz-file-preview");for(let n of t.previewElement.querySelectorAll("[data-dz-thumbnail]"))n.alt=t.name,n.src=e;return setTimeout((()=>t.previewElement.classList.add("dz-image-preview")),1)}},error(t,e){if(t.previewElement){t.previewElement.classList.add("dz-error"),"string"!=typeof e&&e.error&&(e=e.error);for(let n of t.previewElement.querySelectorAll("[data-dz-errormessage]"))n.textContent=e}},errormultiple(){},processing(t){if(t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink))return t._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple(){},uploadprogress(t,e,n){if(t.previewElement)for(let n of t.previewElement.querySelectorAll("[data-dz-uploadprogress]"))"PROGRESS"===n.nodeName?n.value=e:n.style.width=`${e}%`},totaluploadprogress(){},sending(){},sendingmultiple(){},success(t){if(t.previewElement)return t.previewElement.classList.add("dz-success")},successmultiple(){},canceled(t){return this.emit("error",t,this.options.dictUploadCanceled)},canceledmultiple(){},complete(t){if(t._removeLink&&(t._removeLink.innerHTML=this.options.dictRemoveFile),t.previewElement)return t.previewElement.classList.add("dz-complete")},completemultiple(){},maxfilesexceeded(){},maxfilesreached(){},queuecomplete(){},addedfiles(){}};class Vc extends Hc{static initClass(){this.prototype.Emitter=Hc,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}getAcceptedFiles(){return this.files.filter((t=>t.accepted)).map((t=>t))}getRejectedFiles(){return this.files.filter((t=>!t.accepted)).map((t=>t))}getFilesWithStatus(t){return this.files.filter((e=>e.status===t)).map((t=>t))}getQueuedFiles(){return this.getFilesWithStatus(Vc.QUEUED)}getUploadingFiles(){return this.getFilesWithStatus(Vc.UPLOADING)}getAddedFiles(){return this.getFilesWithStatus(Vc.ADDED)}getActiveFiles(){return this.files.filter((t=>t.status===Vc.UPLOADING||t.status===Vc.QUEUED)).map((t=>t))}init(){if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(Vc.createElement(`<div class="dz-default dz-message"><button class="dz-button" type="button">${this.options.dictDefaultMessage}</button></div>`)),this.clickableElements.length){let t=()=>{this.hiddenFileInput&&this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=document.createElement("input"),this.hiddenFileInput.setAttribute("type","file"),(null===this.options.maxFiles||this.options.maxFiles>1)&&this.hiddenFileInput.setAttribute("multiple","multiple"),this.hiddenFileInput.className="dz-hidden-input",null!==this.options.acceptedFiles&&this.hiddenFileInput.setAttribute("accept",this.options.acceptedFiles),null!==this.options.capture&&this.hiddenFileInput.setAttribute("capture",this.options.capture),this.hiddenFileInput.setAttribute("tabindex","-1"),this.hiddenFileInput.style.visibility="hidden",this.hiddenFileInput.style.position="absolute",this.hiddenFileInput.style.top="0",this.hiddenFileInput.style.left="0",this.hiddenFileInput.style.height="0",this.hiddenFileInput.style.width="0",Vc.getElement(this.options.hiddenInputContainer,"hiddenInputContainer").appendChild(this.hiddenFileInput),this.hiddenFileInput.addEventListener("change",(()=>{let{files:e}=this.hiddenFileInput;if(e.length)for(let t of e)this.addFile(t);this.emit("addedfiles",e),t()}))};t()}this.URL=null!==window.URL?window.URL:window.webkitURL;for(let t of this.events)this.on(t,this.options[t]);this.on("uploadprogress",(()=>this.updateTotalUploadProgress())),this.on("removedfile",(()=>this.updateTotalUploadProgress())),this.on("canceled",(t=>this.emit("complete",t))),this.on("complete",(t=>{if(0===this.getAddedFiles().length&&0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length)return setTimeout((()=>this.emit("queuecomplete")),0)}));let t=function(t){if(function(t){if(t.dataTransfer.types)for(var e=0;e<t.dataTransfer.types.length;e++)if("Files"===t.dataTransfer.types[e])return!0;return!1}(t))return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:t=>this.emit("dragstart",t),dragenter:e=>(t(e),this.emit("dragenter",e)),dragover:e=>{let n;try{n=e.dataTransfer.effectAllowed}catch(t){}return e.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",t(e),this.emit("dragover",e)},dragleave:t=>this.emit("dragleave",t),drop:e=>(t(e),this.drop(e)),dragend:t=>this.emit("dragend",t)}}],this.clickableElements.forEach((t=>this.listeners.push({element:t,events:{click:e=>((t!==this.element||e.target===this.element||Vc.elementInside(e.target,this.element.querySelector(".dz-message")))&&this.hiddenFileInput.click(),!0)}}))),this.enable(),this.options.init.call(this)}destroy(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,Vc.instances.splice(Vc.instances.indexOf(this),1)}updateTotalUploadProgress(){let t,e=0,n=0;if(this.getActiveFiles().length){for(let t of this.getActiveFiles())e+=t.upload.bytesSent,n+=t.upload.total;t=100*e/n}else t=100;return this.emit("totaluploadprogress",t,n,e)}_getParamName(t){return"function"==typeof this.options.paramName?this.options.paramName(t):`${this.options.paramName}${this.options.uploadMultiple?`[${t}]`:""}`}_renameFile(t){return"function"!=typeof this.options.renameFile?t.name:this.options.renameFile(t)}getFallbackForm(){let t,e;if(t=this.getExistingFallback())return t;let n='<div class="dz-fallback">';this.options.dictFallbackText&&(n+=`<p>${this.options.dictFallbackText}</p>`),n+=`<input type="file" name="${this._getParamName(0)}" ${this.options.uploadMultiple?'multiple="multiple"':void 0} /><input type="submit" value="Upload!"></div>`;let i=Vc.createElement(n);return"FORM"!==this.element.tagName?(e=Vc.createElement(`<form action="${this.options.url}" enctype="multipart/form-data" method="${this.options.method}"></form>`),e.appendChild(i)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=e?e:i}getExistingFallback(){let t=function(t){for(let e of t)if(/(^| )fallback($| )/.test(e.className))return e};for(let n of["div","form"]){var e;if(e=t(this.element.getElementsByTagName(n)))return e}}setupEventListeners(){return this.listeners.map((t=>(()=>{let e=[];for(let n in t.events){let i=t.events[n];e.push(t.element.addEventListener(n,i,!1))}return e})()))}removeEventListeners(){return this.listeners.map((t=>(()=>{let e=[];for(let n in t.events){let i=t.events[n];e.push(t.element.removeEventListener(n,i,!1))}return e})()))}disable(){return this.clickableElements.forEach((t=>t.classList.remove("dz-clickable"))),this.removeEventListeners(),this.disabled=!0,this.files.map((t=>this.cancelUpload(t)))}enable(){return delete this.disabled,this.clickableElements.forEach((t=>t.classList.add("dz-clickable"))),this.setupEventListeners()}filesize(t){let e=0,n="b";if(t>0){let i=["tb","gb","mb","kb","b"];for(let r=0;r<i.length;r++){let o=i[r];if(t>=Math.pow(this.options.filesizeBase,4-r)/10){e=t/Math.pow(this.options.filesizeBase,4-r),n=o;break}}e=Math.round(10*e)/10}return`<strong>${e}</strong> ${this.options.dictFileSizeUnits[n]}`}_updateMaxFilesReachedClass(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}drop(t){if(!t.dataTransfer)return;this.emit("drop",t);let e=[];for(let n=0;n<t.dataTransfer.files.length;n++)e[n]=t.dataTransfer.files[n];if(e.length){let{items:n}=t.dataTransfer;n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(e)}this.emit("addedfiles",e)}paste(t){if(null==(null!=(e=null!=t?t.clipboardData:void 0)?(t=>t.items)(e):void 0))return;var e;this.emit("paste",t);let{items:n}=t.clipboardData;return n.length?this._addFilesFromItems(n):void 0}handleFiles(t){for(let e of t)this.addFile(e)}_addFilesFromItems(t){return(()=>{let e=[];for(let i of t){var n;null!=i.webkitGetAsEntry&&(n=i.webkitGetAsEntry())?n.isFile?e.push(this.addFile(i.getAsFile())):n.isDirectory?e.push(this._addFilesFromDirectory(n,n.name)):e.push(void 0):null==i.getAsFile||null!=i.kind&&"file"!==i.kind?e.push(void 0):e.push(this.addFile(i.getAsFile()))}return e})()}_addFilesFromDirectory(t,e){let n=t.createReader(),i=t=>{return n=e=>e.log(t),null!=(e=console)&&"function"==typeof e.log?n(e):void 0;var e,n};var r=()=>n.readEntries((t=>{if(t.length>0){for(let n of t)n.isFile?n.file((t=>{if(!this.options.ignoreHiddenFiles||"."!==t.name.substring(0,1))return t.fullPath=`${e}/${t.name}`,this.addFile(t)})):n.isDirectory&&this._addFilesFromDirectory(n,`${e}/${n.name}`);r()}return null}),i);return r()}accept(t,e){this.options.maxFilesize&&t.size>1048576*this.options.maxFilesize?e(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):Vc.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(e(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,e):e(this.options.dictInvalidFileType)}addFile(t){t.upload={uuid:Vc.uuidv4(),progress:0,total:t.size,bytesSent:0,filename:this._renameFile(t)},this.files.push(t),t.status=Vc.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,(e=>{e?(t.accepted=!1,this._errorProcessing([t],e)):(t.accepted=!0,this.options.autoQueue&&this.enqueueFile(t)),this._updateMaxFilesReachedClass()}))}enqueueFiles(t){for(let e of t)this.enqueueFile(e);return null}enqueueFile(t){if(t.status!==Vc.ADDED||!0!==t.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(t.status=Vc.QUEUED,this.options.autoProcessQueue)return setTimeout((()=>this.processQueue()),0)}_enqueueThumbnail(t){if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1048576*this.options.maxThumbnailFilesize)return this._thumbnailQueue.push(t),setTimeout((()=>this._processThumbnailQueue()),0)}_processThumbnailQueue(){if(this._processingThumbnail||0===this._thumbnailQueue.length)return;this._processingThumbnail=!0;let t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,(e=>(this.emit("thumbnail",t,e),this._processingThumbnail=!1,this._processThumbnailQueue())))}removeFile(t){if(t.status===Vc.UPLOADING&&this.cancelUpload(t),this.files=Kc(this.files,t),this.emit("removedfile",t),0===this.files.length)return this.emit("reset")}removeAllFiles(t){null==t&&(t=!1);for(let e of this.files.slice())(e.status!==Vc.UPLOADING||t)&&this.removeFile(e);return null}resizeImage(t,e,n,i,r){return this.createThumbnail(t,e,n,i,!0,((e,n)=>{if(null==n)return r(t);{let{resizeMimeType:e}=this.options;null==e&&(e=t.type);let i=n.toDataURL(e,this.options.resizeQuality);return"image/jpeg"!==e&&"image/jpg"!==e||(i=Xc.restore(t.dataURL,i)),r(Vc.dataURItoBlob(i))}}))}createThumbnail(t,e,n,i,r,o){let s=new FileReader;s.onload=()=>{t.dataURL=s.result,"image/svg+xml"!==t.type?this.createThumbnailFromUrl(t,e,n,i,r,o):null!=o&&o(s.result)},s.readAsDataURL(t)}displayExistingFile(t,e,n,i,r=!0){if(this.emit("addedfile",t),this.emit("complete",t),r){let r=e=>{this.emit("thumbnail",t,e),n&&n()};t.dataURL=e,this.createThumbnailFromUrl(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,r,i)}else this.emit("thumbnail",t,e),n&&n()}createThumbnailFromUrl(t,e,n,i,r,o,s){let a=document.createElement("img");return s&&(a.crossOrigin=s),r="from-image"!=getComputedStyle(document.body).imageOrientation&&r,a.onload=()=>{let s=t=>t(1);return"undefined"!=typeof EXIF&&null!==EXIF&&r&&(s=t=>EXIF.getData(a,(function(){return t(EXIF.getTag(this,"Orientation"))}))),s((r=>{t.width=a.width,t.height=a.height;let s=this.options.resize.call(this,t,e,n,i),l=document.createElement("canvas"),c=l.getContext("2d");switch(l.width=s.trgWidth,l.height=s.trgHeight,r>4&&(l.width=s.trgHeight,l.height=s.trgWidth),r){case 2:c.translate(l.width,0),c.scale(-1,1);break;case 3:c.translate(l.width,l.height),c.rotate(Math.PI);break;case 4:c.translate(0,l.height),c.scale(1,-1);break;case 5:c.rotate(.5*Math.PI),c.scale(1,-1);break;case 6:c.rotate(.5*Math.PI),c.translate(0,-l.width);break;case 7:c.rotate(.5*Math.PI),c.translate(l.height,-l.width),c.scale(-1,1);break;case 8:c.rotate(-.5*Math.PI),c.translate(-l.height,0)}Zc(c,a,null!=s.srcX?s.srcX:0,null!=s.srcY?s.srcY:0,s.srcWidth,s.srcHeight,null!=s.trgX?s.trgX:0,null!=s.trgY?s.trgY:0,s.trgWidth,s.trgHeight);let u=l.toDataURL("image/png");if(null!=o)return o(u,l)}))},null!=o&&(a.onerror=o),a.src=t.dataURL}processQueue(){let{parallelUploads:t}=this.options,e=this.getUploadingFiles().length,n=e;if(e>=t)return;let i=this.getQueuedFiles();if(i.length>0){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,t-e));for(;n<t;){if(!i.length)return;this.processFile(i.shift()),n++}}}processFile(t){return this.processFiles([t])}processFiles(t){for(let e of t)e.processing=!0,e.status=Vc.UPLOADING,this.emit("processing",e);return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)}_getFilesWithXhr(t){return this.files.filter((e=>e.xhr===t)).map((t=>t))}cancelUpload(t){if(t.status===Vc.UPLOADING){let e=this._getFilesWithXhr(t.xhr);for(let t of e)t.status=Vc.CANCELED;void 0!==t.xhr&&t.xhr.abort();for(let t of e)this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",e)}else t.status!==Vc.ADDED&&t.status!==Vc.QUEUED||(t.status=Vc.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));if(this.options.autoProcessQueue)return this.processQueue()}resolveOption(t,...e){return"function"==typeof t?t.apply(this,e):t}uploadFile(t){return this.uploadFiles([t])}uploadFiles(t){this._transformFiles(t,(e=>{if(this.options.chunking){let n=e[0];t[0].upload.chunked=this.options.chunking&&(this.options.forceChunking||n.size>this.options.chunkSize),t[0].upload.totalChunkCount=Math.ceil(n.size/this.options.chunkSize)}if(t[0].upload.chunked){let n=t[0],i=e[0],r=0;n.upload.chunks=[];let o=()=>{let e=0;for(;void 0!==n.upload.chunks[e];)e++;if(e>=n.upload.totalChunkCount)return;r++;let o=e*this.options.chunkSize,s=Math.min(o+this.options.chunkSize,i.size),a={name:this._getParamName(0),data:i.webkitSlice?i.webkitSlice(o,s):i.slice(o,s),filename:n.upload.filename,chunkIndex:e};n.upload.chunks[e]={file:n,index:e,dataBlock:a,status:Vc.UPLOADING,progress:0,retries:0},this._uploadData(t,[a])};if(n.upload.finishedChunkUpload=(e,i)=>{let r=!0;e.status=Vc.SUCCESS,e.dataBlock=null,e.response=e.xhr.responseText,e.responseHeaders=e.xhr.getAllResponseHeaders(),e.xhr=null;for(let t=0;t<n.upload.totalChunkCount;t++){if(void 0===n.upload.chunks[t])return o();n.upload.chunks[t].status!==Vc.SUCCESS&&(r=!1)}r&&this.options.chunksUploaded(n,(()=>{this._finished(t,i,null)}))},this.options.parallelChunkUploads)for(let t=0;t<n.upload.totalChunkCount;t++)o();else o()}else{let n=[];for(let i=0;i<t.length;i++)n[i]={name:this._getParamName(i),data:e[i],filename:t[i].upload.filename};this._uploadData(t,n)}}))}_getChunk(t,e){for(let n=0;n<t.upload.totalChunkCount;n++)if(void 0!==t.upload.chunks[n]&&t.upload.chunks[n].xhr===e)return t.upload.chunks[n]}_uploadData(t,e){let n=new XMLHttpRequest;for(let e of t)e.xhr=n;t[0].upload.chunked&&(t[0].upload.chunks[e[0].chunkIndex].xhr=n);let i=this.resolveOption(this.options.method,t,e),r=this.resolveOption(this.options.url,t,e);n.open(i,r,!0),this.resolveOption(this.options.timeout,t)&&(n.timeout=this.resolveOption(this.options.timeout,t)),n.withCredentials=!!this.options.withCredentials,n.onload=e=>{this._finishedUploading(t,n,e)},n.ontimeout=()=>{this._handleUploadError(t,n,`Request timedout after ${this.options.timeout/1e3} seconds`)},n.onerror=()=>{this._handleUploadError(t,n)},(null!=n.upload?n.upload:n).onprogress=e=>this._updateFilesUploadProgress(t,n,e);let o=this.options.defaultHeaders?{Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}:{};this.options.binaryBody&&(o["Content-Type"]=t[0].type),this.options.headers&&$c(o,this.options.headers);for(let t in o){let e=o[t];e&&n.setRequestHeader(t,e)}if(this.options.binaryBody){for(let e of t)this.emit("sending",e,n);this.options.uploadMultiple&&this.emit("sendingmultiple",t,n),this.submitRequest(n,null,t)}else{let i=new FormData;if(this.options.params){let e=this.options.params;"function"==typeof e&&(e=e.call(this,t,n,t[0].upload.chunked?this._getChunk(t[0],n):null));for(let t in e){let n=e[t];if(Array.isArray(n))for(let e=0;e<n.length;e++)i.append(t,n[e]);else i.append(t,n)}}for(let e of t)this.emit("sending",e,n,i);this.options.uploadMultiple&&this.emit("sendingmultiple",t,n,i),this._addFormElementData(i);for(let t=0;t<e.length;t++){let n=e[t];i.append(n.name,n.data,n.filename)}this.submitRequest(n,i,t)}}_transformFiles(t,e){let n=[],i=0;for(let r=0;r<t.length;r++)this.options.transformFile.call(this,t[r],(o=>{n[r]=o,++i===t.length&&e(n)}))}_addFormElementData(t){if("FORM"===this.element.tagName)for(let e of this.element.querySelectorAll("input, textarea, select, button")){let n=e.getAttribute("name"),i=e.getAttribute("type");if(i&&(i=i.toLowerCase()),null!=n)if("SELECT"===e.tagName&&e.hasAttribute("multiple"))for(let i of e.options)i.selected&&t.append(n,i.value);else(!i||"checkbox"!==i&&"radio"!==i||e.checked)&&t.append(n,e.value)}}_updateFilesUploadProgress(t,e,n){if(t[0].upload.chunked){let i=t[0],r=this._getChunk(i,e);n?(r.progress=100*n.loaded/n.total,r.total=n.total,r.bytesSent=n.loaded):(r.progress=100,r.bytesSent=r.total),i.upload.progress=0,i.upload.total=0,i.upload.bytesSent=0;for(let t=0;t<i.upload.totalChunkCount;t++)i.upload.chunks[t]&&void 0!==i.upload.chunks[t].progress&&(i.upload.progress+=i.upload.chunks[t].progress,i.upload.total+=i.upload.chunks[t].total,i.upload.bytesSent+=i.upload.chunks[t].bytesSent);i.upload.progress=i.upload.progress/i.upload.totalChunkCount,this.emit("uploadprogress",i,i.upload.progress,i.upload.bytesSent)}else for(let e of t)e.upload.total&&e.upload.bytesSent&&e.upload.bytesSent==e.upload.total||(n?(e.upload.progress=100*n.loaded/n.total,e.upload.total=n.total,e.upload.bytesSent=n.loaded):(e.upload.progress=100,e.upload.bytesSent=e.upload.total),this.emit("uploadprogress",e,e.upload.progress,e.upload.bytesSent))}_finishedUploading(t,e,n){let i;if(t[0].status!==Vc.CANCELED&&4===e.readyState){if("arraybuffer"!==e.responseType&&"blob"!==e.responseType&&(i=e.responseText,e.getResponseHeader("content-type")&&~e.getResponseHeader("content-type").indexOf("application/json")))try{i=JSON.parse(i)}catch(t){n=t,i="Invalid JSON response from server."}this._updateFilesUploadProgress(t,e),200<=e.status&&e.status<300?t[0].upload.chunked?t[0].upload.finishedChunkUpload(this._getChunk(t[0],e),i):this._finished(t,i,n):this._handleUploadError(t,e,i)}}_handleUploadError(t,e,n){if(t[0].status!==Vc.CANCELED){if(t[0].upload.chunked&&this.options.retryChunks){let n=this._getChunk(t[0],e);if(n.retries++<this.options.retryChunksLimit)return void this._uploadData(t,[n.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(t,n||this.options.dictResponseError.replace("{{statusCode}}",e.status),e)}}submitRequest(t,e,n){if(1==t.readyState)if(this.options.binaryBody)if(n[0].upload.chunked){const e=this._getChunk(n[0],t);t.send(e.dataBlock.data)}else t.send(n[0]);else t.send(e);else console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}_finished(t,e,n){for(let i of t)i.status=Vc.SUCCESS,this.emit("success",i,e,n),this.emit("complete",i);if(this.options.uploadMultiple&&(this.emit("successmultiple",t,e,n),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()}_errorProcessing(t,e,n){for(let i of t)i.status=Vc.ERROR,this.emit("error",i,e,n),this.emit("complete",i);if(this.options.uploadMultiple&&(this.emit("errormultiple",t,e,n),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()}static uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){let e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}constructor(t,e){let n,i;if(super(),this.element=t,this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");Vc.instances.push(this),this.element.dropzone=this;let r=null!=(i=Vc.optionsForElement(this.element))?i:{};if(this.options=$c(!0,{},Wc,r,null!=e?e:{}),this.options.previewTemplate=this.options.previewTemplate.replace(/\n*/g,""),this.options.forceFallback||!Vc.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(this.options.uploadMultiple&&this.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");if(this.options.binaryBody&&this.options.uploadMultiple)throw new Error("You cannot set both: binaryBody and uploadMultiple.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),null!=this.options.renameFilename&&(this.options.renameFile=t=>this.options.renameFilename.call(this,t.name,t)),"string"==typeof this.options.method&&(this.options.method=this.options.method.toUpperCase()),(n=this.getExistingFallback())&&n.parentNode&&n.parentNode.removeChild(n),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=Vc.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=Vc.getElements(this.options.clickable,"clickable")),this.init()}}Vc.initClass(),Vc.options={},Vc.optionsForElement=function(t){return t.getAttribute("id")?Vc.options[Yc(t.getAttribute("id"))]:void 0},Vc.instances=[],Vc.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},Vc.discover=function(){let t;if(document.querySelectorAll)t=document.querySelectorAll(".dropzone");else{t=[];let e=e=>(()=>{let n=[];for(let i of e)/(^| )dropzone($| )/.test(i.className)?n.push(t.push(i)):n.push(void 0);return n})();e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))}return(()=>{let e=[];for(let n of t)!1!==Vc.optionsForElement(n)?e.push(new Vc(n)):e.push(void 0);return e})()},Vc.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Vc.isBrowserSupported=function(){let t=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==Vc.blacklistedBrowsers&&(Vc.blockedBrowsers=Vc.blacklistedBrowsers);for(let e of Vc.blockedBrowsers)if(e.test(navigator.userAgent)){t=!1;continue}}else t=!1;else t=!1;return t},Vc.dataURItoBlob=function(t){let e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),r=new Uint8Array(i);for(let t=0,n=e.length,i=0<=n;i?t<=n:t>=n;i?t++:t--)r[t]=e.charCodeAt(t);return new Blob([i],{type:n})};const Kc=(t,e)=>t.filter((t=>t!==e)).map((t=>t)),Yc=t=>t.replace(/[\-_](\w)/g,(t=>t.charAt(1).toUpperCase()));Vc.createElement=function(t){let e=document.createElement("div");return e.innerHTML=t,e.childNodes[0]},Vc.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},Vc.getElement=function(t,e){let n;if("string"==typeof t?n=document.querySelector(t):null!=t.nodeType&&(n=t),null==n)throw new Error(`Invalid \`${e}\` option provided. Please provide a CSS selector or a plain HTML element.`);return n},Vc.getElements=function(t,e){let n,i;if(t instanceof Array){i=[];try{for(n of t)i.push(this.getElement(n,e))}catch(t){i=null}}else if("string"==typeof t)for(n of(i=[],document.querySelectorAll(t)))i.push(n);else null!=t.nodeType&&(i=[t]);if(null==i||!i.length)throw new Error(`Invalid \`${e}\` option provided. Please provide a CSS selector, a plain HTML element or a list of those.`);return i},Vc.confirm=function(t,e,n){return window.confirm(t)?e():null!=n?n():void 0},Vc.isValidFile=function(t,e){if(!e)return!0;e=e.split(",");let n=t.type,i=n.replace(/\/.*$/,"");for(let r of e)if(r=r.trim(),"."===r.charAt(0)){if(-1!==t.name.toLowerCase().indexOf(r.toLowerCase(),t.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(i===r.replace(/\/.*$/,""))return!0}else if(n===r)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each((function(){return new Vc(this,t)}))}),Vc.ADDED="added",Vc.QUEUED="queued",Vc.ACCEPTED=Vc.QUEUED,Vc.UPLOADING="uploading",Vc.PROCESSING=Vc.UPLOADING,Vc.CANCELED="canceled",Vc.ERROR="error",Vc.SUCCESS="success";var Zc=function(t,e,n,i,r,o,s,a,l,c){let u=function(t){t.naturalWidth;let e=t.naturalHeight,n=document.createElement("canvas");n.width=1,n.height=e;let i=n.getContext("2d");i.drawImage(t,0,0);let{data:r}=i.getImageData(1,0,1,e),o=0,s=e,a=e;for(;a>o;)0===r[4*(a-1)+3]?s=a:o=a,a=s+o>>1;let l=a/e;return 0===l?1:l}(e);return t.drawImage(e,n,i,r,o,s,a,l,c/u)};class Xc{static initClass(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}static encode64(t){let e,n,i,r,o,s="",a="",l="",c=0;for(;e=t[c++],n=t[c++],a=t[c++],i=e>>2,r=(3&e)<<4|n>>4,o=(15&n)<<2|a>>6,l=63&a,isNaN(n)?o=l=64:isNaN(a)&&(l=64),s=s+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(l),e=n=a="",i=r=o=l="",c<t.length;);return s}static restore(t,e){if(!t.match("data:image/jpeg;base64,"))return e;let n=this.decode64(t.replace("data:image/jpeg;base64,","")),i=this.slice2Segments(n),r=this.exifManipulation(e,i);return`data:image/jpeg;base64,${this.encode64(r)}`}static exifManipulation(t,e){let n=this.getExifArray(e),i=this.insertExif(t,n);return new Uint8Array(i)}static getExifArray(t){let e,n=0;for(;n<t.length;){if(e=t[n],255===e[0]&225===e[1])return e;n++}return[]}static insertExif(t,e){let n=t.replace("data:image/jpeg;base64,",""),i=this.decode64(n),r=i.indexOf(255,3),o=i.slice(0,r),s=i.slice(r),a=o;return a=a.concat(e),a=a.concat(s),a}static slice2Segments(t){let e=0,n=[];for(;!(255===t[e]&218===t[e+1]);){if(255===t[e]&216===t[e+1])e+=2;else{let i=e+(256*t[e+2]+t[e+3])+2,r=t.slice(e,i);n.push(r),e=i}if(e>t.length)break}return n}static decode64(t){let e,n,i,r,o,s="",a="",l=0,c=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(t)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");i=this.KEY_STR.indexOf(t.charAt(l++)),r=this.KEY_STR.indexOf(t.charAt(l++)),o=this.KEY_STR.indexOf(t.charAt(l++)),a=this.KEY_STR.indexOf(t.charAt(l++)),e=i<<2|r>>4,n=(15&r)<<4|o>>2,s=(3&o)<<6|a,c.push(e),64!==o&&c.push(n),64!==a&&c.push(s),e=n=s="",i=r=o=a="",l<t.length;);return c}}Xc.initClass();const Gc=document.getElementById("contributeUploadTooltip");let Qc=0;const Jc=()=>{const t=document.getElementById("dropzone-single-file"),e=document.getElementById("dropzone-multipart-file"),n=document.getElementById("external-resource-upload-form");1===Qc?tu(t,e,n,!0):Qc>1?tu(t,e,n,!1,!0):tu(t,e,n,!1,!1,!0)},tu=(t,e,n,i=!1,r=!1,o=!1)=>{t.classList.toggle("d-block",i),t.classList.toggle("d-none",!i),e.classList.toggle("d-block",r),e.classList.toggle("d-none",!r),n.classList.toggle("d-block",o),n.classList.toggle("d-none",!o)},eu=()=>{console.log("CLICKED!"),Gs("contributeUploadTooltip"),Xs()},nu=function(t,e){return t===e||t!=t&&e!=e},iu=function(t,e){for(var n=t.length;n--;)if(nu(t[n][0],e))return n;return-1};var ru=Array.prototype.splice;function ou(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}ou.prototype.clear=function(){this.__data__=[],this.size=0},ou.prototype.delete=function(t){var e=this.__data__,n=iu(e,t);return!(n<0||(n==e.length-1?e.pop():ru.call(e,n,1),--this.size,0))},ou.prototype.get=function(t){var e=this.__data__,n=iu(e,t);return n<0?void 0:e[n][1]},ou.prototype.has=function(t){return iu(this.__data__,t)>-1},ou.prototype.set=function(t,e){var n=this.__data__,i=iu(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};const su=ou,au="object"==typeof global&&global&&global.Object===Object&&global;var lu="object"==typeof self&&self&&self.Object===Object&&self;const cu=au||lu||Function("return this")(),uu=cu.Symbol;var hu=Object.prototype,du=hu.hasOwnProperty,pu=hu.toString,fu=uu?uu.toStringTag:void 0;var mu=Object.prototype.toString;var gu=uu?uu.toStringTag:void 0;const vu=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":gu&&gu in Object(t)?function(t){var e=du.call(t,fu),n=t[fu];try{t[fu]=void 0;var i=!0}catch(t){}var r=pu.call(t);return i&&(e?t[fu]=n:delete t[fu]),r}(t):function(t){return mu.call(t)}(t)},bu=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},yu=function(t){if(!bu(t))return!1;var e=vu(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},wu=cu["__core-js_shared__"];var _u,xu=(_u=/[^.]+$/.exec(wu&&wu.keys&&wu.keys.IE_PROTO||""))?"Symbol(src)_1."+_u:"";var Eu=Function.prototype.toString;const Au=function(t){if(null!=t){try{return Eu.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var ku=/^\[object .+?Constructor\]$/,Nu=Function.prototype,Cu=Object.prototype,Su=Nu.toString,Tu=Cu.hasOwnProperty,Lu=RegExp("^"+Su.call(Tu).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Ou=function(t){return!(!bu(t)||(e=t,xu&&xu in e))&&(yu(t)?Lu:ku).test(Au(t));var e},Iu=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Ou(n)?n:void 0},Mu=Iu(cu,"Map"),qu=Iu(Object,"create");var ju=Object.prototype.hasOwnProperty;var Du=Object.prototype.hasOwnProperty;function Bu(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Bu.prototype.clear=function(){this.__data__=qu?qu(null):{},this.size=0},Bu.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Bu.prototype.get=function(t){var e=this.__data__;if(qu){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return ju.call(e,t)?e[t]:void 0},Bu.prototype.has=function(t){var e=this.__data__;return qu?void 0!==e[t]:Du.call(e,t)},Bu.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=qu&&void 0===e?"__lodash_hash_undefined__":e,this};const Pu=Bu,Ru=function(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map};function Fu(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Fu.prototype.clear=function(){this.size=0,this.__data__={hash:new Pu,map:new(Mu||su),string:new Pu}},Fu.prototype.delete=function(t){var e=Ru(this,t).delete(t);return this.size-=e?1:0,e},Fu.prototype.get=function(t){return Ru(this,t).get(t)},Fu.prototype.has=function(t){return Ru(this,t).has(t)},Fu.prototype.set=function(t,e){var n=Ru(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};const $u=Fu;function Uu(t){var e=this.__data__=new su(t);this.size=e.size}Uu.prototype.clear=function(){this.__data__=new su,this.size=0},Uu.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Uu.prototype.get=function(t){return this.__data__.get(t)},Uu.prototype.has=function(t){return this.__data__.has(t)},Uu.prototype.set=function(t,e){var n=this.__data__;if(n instanceof su){var i=n.__data__;if(!Mu||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new $u(i)}return n.set(t,e),this.size=n.size,this};const zu=Uu,Hu=function(){try{var t=Iu(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Wu=function(t,e,n){"__proto__"==e&&Hu?Hu(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Vu=function(t,e,n){(void 0!==n&&!nu(t[e],n)||void 0===n&&!(e in t))&&Wu(t,e,n)},Ku=function(t,e,n){for(var i=-1,r=Object(t),o=n(t),s=o.length;s--;){var a=o[Yu?s:++i];if(!1===e(r[a],a,r))break}return t};var Yu,Zu="object"==typeof exports&&exports&&!exports.nodeType&&exports,Xu=Zu&&"object"==typeof module&&module&&!module.nodeType&&module,Gu=Xu&&Xu.exports===Zu?cu.Buffer:void 0,Qu=Gu?Gu.allocUnsafe:void 0;const Ju=function(t,e){if(e)return t.slice();var n=t.length,i=Qu?Qu(n):new t.constructor(n);return t.copy(i),i},th=cu.Uint8Array,eh=function(t){var e=new t.constructor(t.byteLength);return new th(e).set(new th(t)),e},nh=function(t,e){var n=e?eh(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},ih=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e};var rh=Object.create;const oh=function(){function t(){}return function(e){if(!bu(e))return{};if(rh)return rh(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),sh=function(t,e){return function(n){return t(e(n))}},ah=sh(Object.getPrototypeOf,Object);var lh=Object.prototype;const ch=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||lh)},uh=function(t){return"function"!=typeof t.constructor||ch(t)?{}:oh(ah(t))},hh=function(t){return null!=t&&"object"==typeof t},dh=function(t){return hh(t)&&"[object Arguments]"==vu(t)};var ph=Object.prototype,fh=ph.hasOwnProperty,mh=ph.propertyIsEnumerable;const gh=dh(function(){return arguments}())?dh:function(t){return hh(t)&&fh.call(t,"callee")&&!mh.call(t,"callee")},vh=Array.isArray,bh=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},yh=function(t){return null!=t&&bh(t.length)&&!yu(t)};var wh="object"==typeof exports&&exports&&!exports.nodeType&&exports,_h=wh&&"object"==typeof module&&module&&!module.nodeType&&module,xh=_h&&_h.exports===wh?cu.Buffer:void 0;const Eh=(xh?xh.isBuffer:void 0)||function(){return!1};var Ah=Function.prototype,kh=Object.prototype,Nh=Ah.toString,Ch=kh.hasOwnProperty,Sh=Nh.call(Object);var Th={};Th["[object Float32Array]"]=Th["[object Float64Array]"]=Th["[object Int8Array]"]=Th["[object Int16Array]"]=Th["[object Int32Array]"]=Th["[object Uint8Array]"]=Th["[object Uint8ClampedArray]"]=Th["[object Uint16Array]"]=Th["[object Uint32Array]"]=!0,Th["[object Arguments]"]=Th["[object Array]"]=Th["[object ArrayBuffer]"]=Th["[object Boolean]"]=Th["[object DataView]"]=Th["[object Date]"]=Th["[object Error]"]=Th["[object Function]"]=Th["[object Map]"]=Th["[object Number]"]=Th["[object Object]"]=Th["[object RegExp]"]=Th["[object Set]"]=Th["[object String]"]=Th["[object WeakMap]"]=!1;const Lh=function(t){return function(e){return t(e)}};var Oh="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ih=Oh&&"object"==typeof module&&module&&!module.nodeType&&module,Mh=Ih&&Ih.exports===Oh&&au.process;const qh=function(){try{return Ih&&Ih.require&&Ih.require("util").types||Mh&&Mh.binding&&Mh.binding("util")}catch(t){}}();var jh=qh&&qh.isTypedArray;const Dh=jh?Lh(jh):function(t){return hh(t)&&bh(t.length)&&!!Th[vu(t)]},Bh=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var Ph=Object.prototype.hasOwnProperty;const Rh=function(t,e,n){var i=t[e];Ph.call(t,e)&&nu(i,n)&&(void 0!==n||e in t)||Wu(t,e,n)},Fh=function(t,e,n,i){var r=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=i?i(n[a],t[a],a,n,t):void 0;void 0===l&&(l=t[a]),r?Wu(n,a,l):Rh(n,a,l)}return n};var $h=/^(?:0|[1-9]\d*)$/;const Uh=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&$h.test(t))&&t>-1&&t%1==0&&t<e};var zh=Object.prototype.hasOwnProperty;const Hh=function(t,e){var n=vh(t),i=!n&&gh(t),r=!n&&!i&&Eh(t),o=!n&&!i&&!r&&Dh(t),s=n||i||r||o,a=s?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=a.length;for(var c in t)!e&&!zh.call(t,c)||s&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Uh(c,l))||a.push(c);return a};var Wh=Object.prototype.hasOwnProperty;const Vh=function(t){if(!bu(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=ch(t),n=[];for(var i in t)("constructor"!=i||!e&&Wh.call(t,i))&&n.push(i);return n},Kh=function(t){return yh(t)?Hh(t,!0):Vh(t)},Yh=function(t,e,n,i,r,o,s){var a,l=Bh(t,n),c=Bh(e,n),u=s.get(c);if(u)Vu(t,n,u);else{var h=o?o(l,c,n+"",t,e,s):void 0,d=void 0===h;if(d){var p=vh(c),f=!p&&Eh(c),m=!p&&!f&&Dh(c);h=c,p||f||m?vh(l)?h=l:hh(a=l)&&yh(a)?h=ih(l):f?(d=!1,h=Ju(c,!0)):m?(d=!1,h=nh(c,!0)):h=[]:function(t){if(!hh(t)||"[object Object]"!=vu(t))return!1;var e=ah(t);if(null===e)return!0;var n=Ch.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Nh.call(n)==Sh}(c)||gh(c)?(h=l,gh(l)?h=function(t){return Fh(t,Kh(t))}(l):bu(l)&&!yu(l)||(h=uh(c))):d=!1}d&&(s.set(c,h),r(h,c,i,o,s),s.delete(c)),Vu(t,n,h)}},Zh=function t(e,n,i,r,o){e!==n&&Ku(n,(function(s,a){if(o||(o=new zu),bu(s))Yh(e,n,a,i,t,r,o);else{var l=r?r(Bh(e,a),s,a+"",e,n,o):void 0;void 0===l&&(l=s),Vu(e,a,l)}}),Kh)},Xh=function(t){return t};var Gh=Math.max;const Qh=Hu?function(t,e){return Hu(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Xh;var Jh=Date.now;const td=(ed=Qh,nd=0,id=0,function(){var t=Jh(),e=16-(t-id);if(id=t,e>0){if(++nd>=800)return arguments[0]}else nd=0;return ed.apply(void 0,arguments)});var ed,nd,id;const rd=function(t,e){return td(function(t,e,n){return e=Gh(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=Gh(i.length-e,0),s=Array(o);++r<o;)s[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(s),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,a)}}(t,e,Xh),t+"")},od=(sd=function(t,e,n){Zh(t,e,n)},rd((function(t,e){var n=-1,i=e.length,r=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(r=sd.length>3&&"function"==typeof r?(i--,r):void 0,o&&function(t,e,n){if(!bu(n))return!1;var i=typeof e;return!!("number"==i?yh(n)&&Uh(e,n.length):"string"==i&&e in n)&&nu(n[e],t)}(e[0],e[1],o)&&(r=i<3?void 0:r,i=1),t=Object(t);++n<i;){var s=e[n];s&&sd(t,s,n,r)}return t})));var sd,ad=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(ad||{});class ld{constructor(t,e,n={}){this.attrName=t,this.keyName=e;const i=ad.TYPE&ad.ATTRIBUTE;this.scope=null!=n.scope?n.scope&ad.LEVEL|i:ad.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}static keys(t){return Array.from(t.attributes).map((t=>t.name))}add(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)}canAdd(t,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1)}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class cd extends Error{constructor(t){super(t="[Parchment] "+t),this.message=t,this.name=this.constructor.name}}const ud=class t{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(null==t)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let n=null;try{n=t.parentNode}catch{return null}return this.find(n,e)}return null}create(e,n,i){const r=this.query(n);if(null==r)throw new cd(`Unable to create ${n} blot`);const o=r,s=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:o.create(i),a=new o(e,s,i);return t.blots.set(a.domNode,a),a}find(e,n=!1){return t.find(e,n)}query(t,e=ad.ANY){let n;return"string"==typeof t?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:"number"==typeof t?t&ad.LEVEL&ad.BLOCK?n=this.types.block:t&ad.LEVEL&ad.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some((t=>(n=this.classes[t],!!n))),n=n||this.tags[t.tagName]),null==n?null:"scope"in n&&e&ad.LEVEL&n.scope&&e&ad.TYPE&n.scope?n:null}register(...t){return t.map((t=>{const e="blotName"in t,n="attrName"in t;if(!e&&!n)throw new cd("Invalid definition");if(e&&"abstract"===t.blotName)throw new cd("Cannot register abstract class");const i=e?t.blotName:n?t.attrName:void 0;return this.types[i]=t,n?"string"==typeof t.keyName&&(this.attributes[t.keyName]=t):e&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map((t=>t.toUpperCase())):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach((e=>{(null==this.tags[e]||null==t.className)&&(this.tags[e]=t)})))),t}))}};ud.blots=new WeakMap;let hd=ud;function dd(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((t=>0===t.indexOf(`${e}-`)))}const pd=class extends ld{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map((t=>t.split("-").slice(0,-1).join("-")))}add(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0)}remove(t){dd(t,this.keyName).forEach((e=>{t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")}value(t){const e=(dd(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}};function fd(t){const e=t.split("-"),n=e.slice(1).map((t=>t[0].toUpperCase()+t.slice(1))).join("");return e[0]+n}const md=class extends ld{static keys(t){return(t.getAttribute("style")||"").split(";").map((t=>t.split(":")[0].trim()))}add(t,e){return!!this.canAdd(t,e)&&(t.style[fd(this.keyName)]=e,!0)}remove(t){t.style[fd(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[fd(this.keyName)];return this.canAdd(t,e)?e:""}},gd=class{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=hd.find(this.domNode);if(null==t)return;const e=ld.keys(this.domNode),n=pd.keys(this.domNode),i=md.keys(this.domNode);e.concat(n).concat(i).forEach((e=>{const n=t.scroll.query(e,ad.ATTRIBUTE);n instanceof ld&&(this.attributes[n.attrName]=n)}))}copy(t){Object.keys(this.attributes).forEach((e=>{const n=this.attributes[e].value(this.domNode);t.format(e,n)}))}move(t){this.copy(t),Object.keys(this.attributes).forEach((t=>{this.attributes[t].remove(this.domNode)})),this.attributes={}}values(){return Object.keys(this.attributes).reduce(((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t)),{})}},vd=class{constructor(t,e){this.scroll=t,this.domNode=e,hd.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(null==this.tagName)throw new cd("Blot definition missing tagName");let e,n;return Array.isArray(this.tagName)?("string"==typeof t?(n=t.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):"number"==typeof t&&(n=t),e="number"==typeof n?document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?document.createElement(n):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){null!=this.parent&&this.parent.removeChild(this),hd.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,n,i){const r=this.isolate(t,e);if(null!=this.scroll.query(n,ad.BLOT)&&i)r.wrap(n,i);else if(null!=this.scroll.query(n,ad.ATTRIBUTE)){const t=this.scroll.create(this.statics.scope);r.wrap(t),t.format(n,i)}}insertAt(t,e,n){const i=null==n?this.scroll.create("text",e):this.scroll.create(e,n),r=this.split(t);this.parent.insertBefore(i,r||void 0)}isolate(t,e){const n=this.split(t);if(null==n)throw new Error("Attempt to isolate at end");return n.split(e),n}length(){return 1}offset(t=this.parent){return null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(t,e){return 0===t?this:this.next}update(t,e){}wrap(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(n,this.next||void 0),"function"!=typeof n.appendChild)throw new cd(`Cannot wrap ${t}`);return n.appendChild(this),n}};vd.blotName="abstract";let bd=vd;const yd=class extends bd{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};yd.scope=ad.INLINE_BLOT;const wd=yd;class _d{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let n=e();for(;n&&t>0;)t-=1,n=e();return n}contains(t){const e=this.iterator();let n=e();for(;n;){if(n===t)return!0;n=e()}return!1}indexOf(t){const e=this.iterator();let n=e(),i=0;for(;n;){if(n===t)return i;i+=1,n=e()}return-1}insertBefore(t,e){null!=t&&(this.remove(t),t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,n=this.head;for(;null!=n;){if(n===t)return e;e+=n.length(),n=n.next}return-1}remove(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return null!=t&&(t=t.next),e}}find(t,e=!1){const n=this.iterator();let i=n();for(;i;){const r=i.length();if(t<r||e&&t===r&&(null==i.next||0!==i.next.length()))return[i,t];t-=r,i=n()}return[null,0]}forEach(t){const e=this.iterator();let n=e();for(;n;)t(n),n=e()}forEachAt(t,e,n){if(e<=0)return;const[i,r]=this.find(t);let o=t-r;const s=this.iterator(i);let a=s();for(;a&&o<t+e;){const i=a.length();t>o?n(a,t-o,Math.min(e,o+i-t)):n(a,0,Math.min(i,t+e-o)),o+=i,a=s()}}map(t){return this.reduce(((e,n)=>(e.push(t(n)),e)),[])}reduce(t,e){const n=this.iterator();let i=n();for(;i;)e=t(e,i),i=n();return e}}function xd(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const n=e.create(ad.INLINE);return Array.from(t.childNodes).forEach((t=>{n.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(n.domNode,t),n.attach(),n}}const Ed=class t extends bd{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach((t=>{t.attach()}))}attachUI(e){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=e,t.uiClass&&this.uiNode.classList.add(t.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new _d,Array.from(this.domNode.childNodes).filter((t=>t!==this.uiNode)).reverse().forEach((t=>{try{const e=xd(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(t){if(t instanceof cd)return;throw t}}))}deleteAt(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,((t,e,n)=>{t.deleteAt(e,n)}))}descendant(e,n=0){const[i,r]=this.children.find(n);return null==e.blotName&&e(i)||null!=e.blotName&&i instanceof e?[i,r]:i instanceof t?i.descendant(e,r):[null,-1]}descendants(e,n=0,i=Number.MAX_VALUE){let r=[],o=i;return this.children.forEachAt(n,i,((n,i,s)=>{(null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e)&&r.push(n),n instanceof t&&(r=r.concat(n.descendants(e,i,o))),o-=s})),r}detach(){this.children.forEach((t=>{t.detach()})),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach((n=>{e||this.statics.allowedChildren.some((t=>n instanceof t))||(n.statics.scope===ad.BLOCK_BLOT?(null!=n.next&&this.splitAfter(n),null!=n.prev&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof t?n.unwrap():n.remove())}))}formatAt(t,e,n,i){this.children.forEachAt(t,e,((t,e,r)=>{t.formatAt(e,r,n,i)}))}insertAt(t,e,n){const[i,r]=this.children.find(t);if(i)i.insertAt(r,e,n);else{const t=null==n?this.scroll.create("text",e):this.scroll.create(e,n);this.appendChild(t)}}insertBefore(t,e){null!=t.parent&&t.parent.children.remove(t);let n=null;this.children.insertBefore(t,e||null),t.parent=this,null!=e&&(n=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()}length(){return this.children.reduce(((t,e)=>t+e.length()),0)}moveChildren(t,e){this.children.forEach((n=>{t.insertBefore(n,e)}))}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,n=!1){const[i,r]=this.children.find(e,n),o=[[this,e]];return i instanceof t?o.concat(i.path(r,n)):(null!=i&&o.push([i,r]),o)}removeChild(t){this.children.remove(t)}replaceWith(e,n){const i="string"==typeof e?this.scroll.create(e,n):e;return i instanceof t&&this.moveChildren(i),super.replaceWith(i)}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),((t,i,r)=>{const o=t.split(i,e);null!=o&&n.appendChild(o)})),n}splitAfter(t){const e=this.clone();for(;null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const n=[],i=[];t.forEach((t=>{t.target===this.domNode&&"childList"===t.type&&(n.push(...t.addedNodes),i.push(...t.removedNodes))})),i.forEach((t=>{if(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const e=this.scroll.find(t);null!=e&&(null==e.domNode.parentNode||e.domNode.parentNode===this.domNode)&&e.detach()})),n.filter((t=>t.parentNode===this.domNode&&t!==this.uiNode)).sort(((t,e)=>t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1)).forEach((t=>{let e=null;null!=t.nextSibling&&(e=this.scroll.find(t.nextSibling));const n=xd(t,this.scroll);(n.next!==e||null==n.next)&&(null!=n.parent&&n.parent.removeChild(this),this.insertBefore(n,e||void 0))})),this.enforceAllowedChildren()}};Ed.uiClass="";const Ad=Ed,kd=class t extends Ad{static create(t){return super.create(t)}static formats(e,n){const i=n.query(t.blotName);if(null==i||e.tagName!==i.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new gd(this.domNode)}format(e,n){if(e!==this.statics.blotName||n){const t=this.scroll.query(e,ad.INLINE);if(null==t)return;t instanceof ld?this.attributes.attribute(t,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}else this.children.forEach((e=>{e instanceof t||(e=e.wrap(t.blotName,!0)),this.attributes.copy(e)})),this.unwrap()}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,i){null!=this.formats()[n]||this.scroll.query(n,ad.ATTRIBUTE)?this.isolate(t,e).format(n,i):super.formatAt(t,e,n,i)}optimize(e){super.optimize(e);const n=this.formats();if(0===Object.keys(n).length)return this.unwrap();const i=this.next;i instanceof t&&i.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}(n,i.formats())&&(i.moveChildren(this),i.remove())}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some((t=>t.target===this.domNode&&"attributes"===t.type))&&this.attributes.build()}wrap(e,n){const i=super.wrap(e,n);return i instanceof t&&this.attributes.move(i),i}};kd.allowedChildren=[kd,wd],kd.blotName="inline",kd.scope=ad.INLINE_BLOT,kd.tagName="SPAN";const Nd=kd,Cd=class t extends Ad{static create(t){return super.create(t)}static formats(e,n){const i=n.query(t.blotName);if(null==i||e.tagName!==i.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new gd(this.domNode)}format(e,n){const i=this.scroll.query(e,ad.BLOCK);null!=i&&(i instanceof ld?this.attributes.attribute(i,n):e!==this.statics.blotName||n?n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n):this.replaceWith(t.blotName))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,i){null!=this.scroll.query(n,ad.BLOCK)?this.format(n,i):super.formatAt(t,e,n,i)}insertAt(t,e,n){if(null==n||null!=this.scroll.query(e,ad.INLINE))super.insertAt(t,e,n);else{const i=this.split(t);if(null==i)throw new Error("Attempt to insertAt after block boundaries");{const t=this.scroll.create(e,n);i.parent.insertBefore(t,i)}}}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some((t=>t.target===this.domNode&&"attributes"===t.type))&&this.attributes.build()}};Cd.blotName="block",Cd.scope=ad.BLOCK_BLOT,Cd.tagName="P",Cd.allowedChildren=[Nd,Cd,wd];const Sd=Cd,Td=class extends Ad{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,n,i){super.formatAt(t,e,n,i),this.enforceAllowedChildren()}insertAt(t,e,n){super.insertAt(t,e,n),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Td.blotName="container",Td.scope=ad.BLOCK_BLOT;const Ld=Td,Od=class extends wd{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,n,i){0===t&&e===this.length()?this.format(n,i):super.formatAt(t,e,n,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}},Id={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Md=class extends Ad{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver((t=>{this.update(t)})),this.observer.observe(this.domNode,Id),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const n=this.registry.find(t,e);return n?n.scroll===this?n:e?this.find(n.scroll.domNode.parentNode,!0):null:null}query(t,e=ad.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),0===t&&e===this.length()?this.children.forEach((t=>{t.remove()})):super.deleteAt(t,e)}formatAt(t,e,n,i){this.update(),super.formatAt(t,e,n,i)}insertAt(t,e,n){this.update(),super.insertAt(t,e,n)}optimize(t=[],e={}){super.optimize(e);const n=e.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)t.push(i.pop());const r=(t,e=!0)=>{null==t||t===this||null!=t.domNode.parentNode&&(n.has(t.domNode)||n.set(t.domNode,[]),e&&r(t.parent))},o=t=>{n.has(t.domNode)&&(t instanceof Ad&&t.children.forEach(o),n.delete(t.domNode),t.optimize(e))};let s=t;for(let e=0;s.length>0;e+=1){if(e>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(s.forEach((t=>{const e=this.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(r(this.find(t.previousSibling,!1)),Array.from(t.addedNodes).forEach((t=>{const e=this.find(t,!1);r(e,!1),e instanceof Ad&&e.children.forEach((t=>{r(t,!1)}))}))):"attributes"===t.type&&r(e.prev)),r(e))})),this.children.forEach(o),s=Array.from(this.observer.takeRecords()),i=s.slice();i.length>0;)t.push(i.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const n=new WeakMap;t.map((t=>{const e=this.find(t.target,!0);return null==e?null:n.has(e.domNode)?(n.get(e.domNode).push(t),null):(n.set(e.domNode,[t]),e)})).forEach((t=>{null!=t&&t!==this&&n.has(t.domNode)&&t.update(n.get(t.domNode)||[],e)})),e.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),e),this.optimize(t,e)}};Md.blotName="scroll",Md.defaultChild=Sd,Md.allowedChildren=[Sd,Ld],Md.scope=ad.BLOCK_BLOT,Md.tagName="DIV";const qd=Md,jd=class t extends wd{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,n){null==n?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,n)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(t,e){t.some((t=>"characterData"===t.type&&t.target===this.domNode))&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};jd.blotName="text",jd.scope=ad.INLINE_BLOT;const Dd=jd;var Bd=n(660);const Pd=sh(Object.keys,Object);var Rd=Object.prototype.hasOwnProperty;const Fd=function(t){return yh(t)?Hh(t):function(t){if(!ch(t))return Pd(t);var e=[];for(var n in Object(t))Rd.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)},$d=function(){return[]};var Ud=Object.prototype.propertyIsEnumerable,zd=Object.getOwnPropertySymbols;const Hd=zd?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}(zd(t),(function(e){return Ud.call(t,e)})))}:$d,Wd=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t},Vd=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Wd(e,Hd(t)),t=ah(t);return e}:$d,Kd=function(t,e,n){var i=e(t);return vh(t)?i:Wd(i,n(t))},Yd=function(t){return Kd(t,Fd,Hd)},Zd=function(t){return Kd(t,Kh,Vd)},Xd=Iu(cu,"DataView"),Gd=Iu(cu,"Promise"),Qd=Iu(cu,"Set"),Jd=Iu(cu,"WeakMap");var tp="[object Map]",ep="[object Promise]",np="[object Set]",ip="[object WeakMap]",rp="[object DataView]",op=Au(Xd),sp=Au(Mu),ap=Au(Gd),lp=Au(Qd),cp=Au(Jd),up=vu;(Xd&&up(new Xd(new ArrayBuffer(1)))!=rp||Mu&&up(new Mu)!=tp||Gd&&up(Gd.resolve())!=ep||Qd&&up(new Qd)!=np||Jd&&up(new Jd)!=ip)&&(up=function(t){var e=vu(t),n="[object Object]"==e?t.constructor:void 0,i=n?Au(n):"";if(i)switch(i){case op:return rp;case sp:return tp;case ap:return ep;case lp:return np;case cp:return ip}return e});const hp=up;var dp=Object.prototype.hasOwnProperty;var pp=/\w*$/;var fp=uu?uu.prototype:void 0,mp=fp?fp.valueOf:void 0;const gp=function(t,e,n){var i,r,o,s=t.constructor;switch(e){case"[object ArrayBuffer]":return eh(t);case"[object Boolean]":case"[object Date]":return new s(+t);case"[object DataView]":return function(t,e){var n=e?eh(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return nh(t,n);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(t);case"[object RegExp]":return(o=new(r=t).constructor(r.source,pp.exec(r))).lastIndex=r.lastIndex,o;case"[object Symbol]":return i=t,mp?Object(mp.call(i)):{}}};var vp=qh&&qh.isMap;const bp=vp?Lh(vp):function(t){return hh(t)&&"[object Map]"==hp(t)};var yp=qh&&qh.isSet;const wp=yp?Lh(yp):function(t){return hh(t)&&"[object Set]"==hp(t)};var _p="[object Arguments]",xp="[object Function]",Ep="[object Object]",Ap={};Ap[_p]=Ap["[object Array]"]=Ap["[object ArrayBuffer]"]=Ap["[object DataView]"]=Ap["[object Boolean]"]=Ap["[object Date]"]=Ap["[object Float32Array]"]=Ap["[object Float64Array]"]=Ap["[object Int8Array]"]=Ap["[object Int16Array]"]=Ap["[object Int32Array]"]=Ap["[object Map]"]=Ap["[object Number]"]=Ap[Ep]=Ap["[object RegExp]"]=Ap["[object Set]"]=Ap["[object String]"]=Ap["[object Symbol]"]=Ap["[object Uint8Array]"]=Ap["[object Uint8ClampedArray]"]=Ap["[object Uint16Array]"]=Ap["[object Uint32Array]"]=!0,Ap["[object Error]"]=Ap[xp]=Ap["[object WeakMap]"]=!1;const kp=function t(e,n,i,r,o,s){var a,l=1&n,c=2&n,u=4&n;if(i&&(a=o?i(e,r,o,s):i(e)),void 0!==a)return a;if(!bu(e))return e;var h=vh(e);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&dp.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!l)return ih(e,a)}else{var d=hp(e),p=d==xp||"[object GeneratorFunction]"==d;if(Eh(e))return Ju(e,l);if(d==Ep||d==_p||p&&!o){if(a=c||p?{}:uh(e),!l)return c?function(t,e){return Fh(t,Vd(t),e)}(e,function(t,e){return t&&Fh(e,Kh(e),t)}(a,e)):function(t,e){return Fh(t,Hd(t),e)}(e,function(t,e){return t&&Fh(e,Fd(e),t)}(a,e))}else{if(!Ap[d])return o?e:{};a=gp(e,d,l)}}s||(s=new zu);var f=s.get(e);if(f)return f;s.set(e,a),wp(e)?e.forEach((function(r){a.add(t(r,n,i,r,e,s))})):bp(e)&&e.forEach((function(r,o){a.set(o,t(r,n,i,o,e,s))}));var m=h?void 0:(u?c?Zd:Yd:c?Kh:Fd)(e);return function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););}(m||e,(function(r,o){m&&(r=e[o=r]),Rh(a,o,t(r,n,i,o,e,s))})),a},Np=function(t){return kp(t,5)};function Cp(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new $u;++e<n;)this.add(t[e])}Cp.prototype.add=Cp.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Cp.prototype.has=function(t){return this.__data__.has(t)};const Sp=Cp,Tp=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1},Lp=function(t,e,n,i,r,o){var s=1&n,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var h=-1,d=!0,p=2&n?new Sp:void 0;for(o.set(t,e),o.set(e,t);++h<a;){var f=t[h],m=e[h];if(i)var g=s?i(m,f,h,e,t,o):i(f,m,h,t,e,o);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!Tp(e,(function(t,e){if(s=e,!p.has(s)&&(f===t||r(f,t,n,i,o)))return p.push(e);var s}))){d=!1;break}}else if(f!==m&&!r(f,m,n,i,o)){d=!1;break}}return o.delete(t),o.delete(e),d},Op=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n},Ip=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var Mp=uu?uu.prototype:void 0,qp=Mp?Mp.valueOf:void 0;var jp=Object.prototype.hasOwnProperty;var Dp="[object Arguments]",Bp="[object Array]",Pp="[object Object]",Rp=Object.prototype.hasOwnProperty;const Fp=function(t,e,n,i,r,o){var s=vh(t),a=vh(e),l=s?Bp:hp(t),c=a?Bp:hp(e),u=(l=l==Dp?Pp:l)==Pp,h=(c=c==Dp?Pp:c)==Pp,d=l==c;if(d&&Eh(t)){if(!Eh(e))return!1;s=!0,u=!1}if(d&&!u)return o||(o=new zu),s||Dh(t)?Lp(t,e,n,i,r,o):function(t,e,n,i,r,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new th(t),new th(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return nu(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=Op;case"[object Set]":var l=1&i;if(a||(a=Ip),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;i|=2,s.set(t,e);var u=Lp(a(t),a(e),i,r,o,s);return s.delete(t),u;case"[object Symbol]":if(qp)return qp.call(t)==qp.call(e)}return!1}(t,e,l,n,i,r,o);if(!(1&n)){var p=u&&Rp.call(t,"__wrapped__"),f=h&&Rp.call(e,"__wrapped__");if(p||f){var m=p?t.value():t,g=f?e.value():e;return o||(o=new zu),r(m,g,n,i,o)}}return!!d&&(o||(o=new zu),function(t,e,n,i,r,o){var s=1&n,a=Yd(t),l=a.length;if(l!=Yd(e).length&&!s)return!1;for(var c=l;c--;){var u=a[c];if(!(s?u in e:jp.call(e,u)))return!1}var h=o.get(t),d=o.get(e);if(h&&d)return h==e&&d==t;var p=!0;o.set(t,e),o.set(e,t);for(var f=s;++c<l;){var m=t[u=a[c]],g=e[u];if(i)var v=s?i(g,m,u,e,t,o):i(m,g,u,t,e,o);if(!(void 0===v?m===g||r(m,g,n,i,o):v)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var b=t.constructor,y=e.constructor;b==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,i,r,o))},$p=function t(e,n,i,r,o){return e===n||(null==e||null==n||!hh(e)&&!hh(n)?e!=e&&n!=n:Fp(e,n,i,r,t,o))},Up=function(t,e){return $p(t,e)};class zp extends Od{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}zp.blotName="break",zp.tagName="BR";const Hp=zp;class Wp extends Dd{}function Vp(t){return t.replace(/[&<>"']/g,(t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t])))}class Kp extends Nd{static allowedChildren=[Kp,Hp,Od,Wp];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(t,e){const n=Kp.order.indexOf(t),i=Kp.order.indexOf(e);return n>=0||i>=0?n-i:t===e?0:t<e?-1:1}formatAt(t,e,n,i){if(Kp.compare(this.statics.blotName,n)<0&&this.scroll.query(n,ad.BLOT)){const r=this.isolate(t,e);i&&r.wrap(n,i)}else super.formatAt(t,e,n,i)}optimize(t){if(super.optimize(t),this.parent instanceof Kp&&Kp.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}const Yp=Kp;class Zp extends Sd{cache={};delta(){return null==this.cache.delta&&(this.cache.delta=Gp(this)),this.cache.delta}deleteAt(t,e){super.deleteAt(t,e),this.cache={}}formatAt(t,e,n,i){e<=0||(this.scroll.query(n,ad.BLOCK)?t+e===this.length()&&this.format(n,i):super.formatAt(t,Math.min(e,this.length()-t-1),n,i),this.cache={})}insertAt(t,e,n){if(null!=n)return super.insertAt(t,e,n),void(this.cache={});if(0===e.length)return;const i=e.split("\n"),r=i.shift();r.length>0&&(t<this.length()-1||null==this.children.tail?super.insertAt(Math.min(t,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});let o=this;i.reduce(((t,e)=>(o=o.split(t,!0),o.insertAt(0,e),e.length)),t+r.length)}insertBefore(t,e){const{head:n}=this.children;super.insertBefore(t,e),n instanceof Hp&&n.remove(),this.cache={}}length(){return null==this.cache.length&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(t,e){super.moveChildren(t,e),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&(0===t||t>=this.length()-1)){const e=this.clone();return 0===t?(this.parent.insertBefore(e,this),this):(this.parent.insertBefore(e,this.next),e)}const n=super.split(t,e);return this.cache={},n}}Zp.blotName="block",Zp.tagName="P",Zp.defaultChild=Hp,Zp.allowedChildren=[Hp,Yp,Od,Wp];class Xp extends Od{attach(){super.attach(),this.attributes=new gd(this.domNode)}delta(){return(new Bd).insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const n=this.scroll.query(t,ad.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,e)}formatAt(t,e,n,i){this.format(n,i)}insertAt(t,e,n){if(null!=n)return void super.insertAt(t,e,n);const i=e.split("\n"),r=i.pop(),o=i.map((t=>{const e=this.scroll.create(Zp.blotName);return e.insertAt(0,t),e})),s=this.split(t);o.forEach((t=>{this.parent.insertBefore(t,s)})),r&&this.parent.insertBefore(this.scroll.create("text",r),s)}}function Gp(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.descendants(wd).reduce(((t,n)=>0===n.length()?t:t.insert(n.value(),Qp(n,{},e))),new Bd).insert("\n",Qp(t))}function Qp(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==t?e:("formats"in t&&"function"==typeof t.formats&&(e={...e,...t.formats()},n&&delete e["code-token"]),null==t.parent||"scroll"===t.parent.statics.blotName||t.parent.statics.scope!==t.statics.scope?e:Qp(t.parent,e,n))}Xp.scope=ad.BLOCK_BLOT;class Jp extends Od{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\ufeff";static value(){}constructor(t,e,n){super(t,e),this.selection=n,this.textNode=document.createTextNode(Jp.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){null!=this.parent&&this.parent.removeChild(this)}format(t,e){if(0!==this.savedLength)return void super.format(t,e);let n=this,i=0;for(;null!=n&&n.statics.scope!==ad.BLOCK_BLOT;)i+=n.offset(n.parent),n=n.parent;null!=n&&(this.savedLength=Jp.CONTENTS.length,n.optimize(),n.formatAt(i,Jp.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||null==this.parent)return null;const t=this.selection.getNativeRange();for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof Wp?this.prev:null,n=e?e.length():0,i=this.next instanceof Wp?this.next:null,r=i?i.text:"",{textNode:o}=this,s=o.data.split(Jp.CONTENTS).join("");let a;if(o.data=Jp.CONTENTS,e)a=e,(s||i)&&(e.insertAt(e.length(),s+r),i&&i.remove());else if(i)a=i,i.insertAt(0,s);else{const t=document.createTextNode(s);a=this.scroll.create(t),this.parent.insertBefore(a,this)}if(this.remove(),t){const r=(t,r)=>e&&t===e.domNode?r:t===o?n+r-1:i&&t===i.domNode?n+s.length+r:null,l=r(t.start.node,t.start.offset),c=r(t.end.node,t.end.offset);if(null!==l&&null!==c)return{startNode:a.domNode,startOffset:l,endNode:a.domNode,endOffset:c}}return null}update(t,e){if(t.some((t=>"characterData"===t.type&&t.target===this.textNode))){const t=this.restore();t&&(e.range=t)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if("A"===e.domNode.tagName){this.savedLength=Jp.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}}const tf=Jp;var ef=n(697);const nf=new WeakMap,rf=["error","warn","log","info"];let of="warn";function sf(t){if(of&&rf.indexOf(t)<=rf.indexOf(of)){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];console[t](...n)}}function af(t){return rf.reduce(((e,n)=>(e[n]=sf.bind(console,n,t),e)),{})}af.level=t=>{of=t},sf.level=af.level;const lf=af,cf=lf("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((t=>{document.addEventListener(t,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach((t=>{const n=nf.get(t);n&&n.emitter&&n.emitter.handleDOM(...e)}))}))}));const uf=class extends ef{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",cf.error)}emit(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return cf.log.call(cf,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(this.domListeners[t.type]||[]).forEach((e=>{let{node:i,handler:r}=e;(t.target===i||i.contains(t.target))&&r(t,...n)}))}listenDOM(t,e,n){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:n})}},hf=lf("quill:selection");class df{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.index=t,this.length=e}}function pf(t,e){try{e.parentNode}catch(t){return!1}return t.contains(e)}const ff=class{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new df(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(()=>{this.mouseDown||this.composing||setTimeout(this.update.bind(this,uf.sources.USER),1)})),this.emitter.on(uf.events.SCROLL_BEFORE_UPDATE,(()=>{if(!this.hasFocus())return;const t=this.getNativeRange();null!=t&&t.start.node!==this.cursor.textNode&&this.emitter.once(uf.events.SCROLL_UPDATE,((e,n)=>{try{this.root.contains(t.start.node)&&this.root.contains(t.end.node)&&this.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset);const i=n.some((t=>"characterData"===t.type||"childList"===t.type||"attributes"===t.type&&t.target===this.root));this.update(i?uf.sources.SILENT:e)}catch(t){}}))})),this.emitter.on(uf.events.SCROLL_OPTIMIZE,((t,e)=>{if(e.range){const{startNode:t,startOffset:n,endNode:i,endOffset:r}=e.range;this.setNativeRange(t,n,i,r),this.update(uf.sources.SILENT)}})),this.update(uf.sources.SILENT)}handleComposition(){this.emitter.on(uf.events.COMPOSITION_BEFORE_START,(()=>{this.composing=!0})),this.emitter.on(uf.events.COMPOSITION_END,(()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout((()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}handleDragging(){this.emitter.listenDOM("mousedown",document.body,(()=>{this.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(()=>{this.mouseDown=!1,this.update(uf.sources.USER)}))}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!this.scroll.query(t,ad.BLOCK)){if(n.start.node!==this.cursor.textNode){const t=this.scroll.find(n.start.node,!1);if(null==t)return;if(t instanceof wd){const e=t.split(n.start.offset);t.parent.insertBefore(this.cursor,e)}else t.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.scroll.length();let i;t=Math.min(t,n-1),e=Math.min(t+e,n-1)-t;let[r,o]=this.scroll.leaf(t);if(null==r)return null;if(e>0&&o===r.length()){const[e]=this.scroll.leaf(t+1);if(e){const[n]=this.scroll.line(t),[i]=this.scroll.line(t+1);n===i&&(r=e,o=0)}}[i,o]=r.position(o,!0);const s=document.createRange();if(e>0)return s.setStart(i,o),[r,o]=this.scroll.leaf(t+e),null==r?null:([i,o]=r.position(o,!0),s.setEnd(i,o),s.getBoundingClientRect());let a,l="left";if(i instanceof Text){if(!i.data.length)return null;o<i.data.length?(s.setStart(i,o),s.setEnd(i,o+1)):(s.setStart(i,o-1),s.setEnd(i,o),l="right"),a=s.getBoundingClientRect()}else{if(!(r.domNode instanceof Element))return null;a=r.domNode.getBoundingClientRect(),o>0&&(l="right")}return{bottom:a.top+a.height,height:a.height,left:a[l],right:a[l],top:a.top,width:0}}getNativeRange(){const t=document.getSelection();if(null==t||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(null==e)return null;const n=this.normalizeNative(e);return hf.info("getNativeRange",n),n}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||null!=document.activeElement&&pf(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const n=e.map((t=>{const[e,n]=t,i=this.scroll.find(e,!0),r=i.offset(this.scroll);return 0===n?r:i instanceof wd?r+i.index(e,n):r+i.length()})),i=Math.min(Math.max(...n),this.scroll.length()-1),r=Math.min(i,...n);return new df(r,i-r)}normalizeNative(t){if(!pf(this.root,t.startContainer)||!t.collapsed&&!pf(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((t=>{let{node:e,offset:n}=t;for(;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>n)e=e.childNodes[n],n=0;else{if(e.childNodes.length!==n)break;e=e.lastChild,n=e instanceof Text?e.data.length:e.childNodes.length>0?e.childNodes.length:e.childNodes.length+1}t.node=e,t.offset=n})),e}rangeToNative(t){const e=this.scroll.length(),n=(t,n)=>{t=Math.min(e-1,t);const[i,r]=this.scroll.leaf(t);return i?i.position(r,n):[null,-1]};return[...n(t.index,!1),...n(t.index+t.length,!0)]}setNativeRange(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(hf.info("setNativeRange",t,e,n,i),null!=t&&(null==this.root.parentNode||null==t.parentNode||null==n.parentNode))return;const o=document.getSelection();if(null!=o)if(null!=t){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:s}=this.getNativeRange()||{};if(null==s||r||t!==s.startContainer||e!==s.startOffset||n!==s.endContainer||i!==s.endOffset){t instanceof Element&&"BR"===t.tagName&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&"BR"===n.tagName&&(i=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const r=document.createRange();r.setStart(t,e),r.setEnd(n,i),o.removeAllRanges(),o.addRange(r)}}else o.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uf.sources.API;if("string"==typeof e&&(n=e,e=!1),hf.info("setRange",t),null!=t){const n=this.rangeToNative(t);this.setNativeRange(...n,e)}else this.setNativeRange(null);this.update(n)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uf.sources.USER;const e=this.lastRange,[n,i]=this.getRange();if(this.lastRange=n,this.lastNative=i,null!=this.lastRange&&(this.savedRange=this.lastRange),!Up(e,this.lastRange)){if(!this.composing&&null!=i&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const t=this.cursor.restore();t&&this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}const n=[uf.events.SELECTION_CHANGE,Np(this.lastRange),Np(e),t];this.emitter.emit(uf.events.EDITOR_CHANGE,...n),t!==uf.sources.SILENT&&this.emitter.emit(...n)}}},mf=/^[ -~]*$/;function gf(t,e,n){if(0===t.length){const[t]=yf(n.pop());return e<=0?`</li></${t}>`:`</li></${t}>${gf([],e-1,n)}`}const[{child:i,offset:r,length:o,indent:s,type:a},...l]=t,[c,u]=yf(a);if(s>e)return n.push(a),s===e+1?`<${c}><li${u}>${vf(i,r,o)}${gf(l,s,n)}`:`<${c}><li>${gf(t,e+1,n)}`;const h=n[n.length-1];if(s===e&&a===h)return`</li><li${u}>${vf(i,r,o)}${gf(l,s,n)}`;const[d]=yf(n.pop());return`</li></${d}>${gf(t,e-1,n)}`}function vf(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("html"in t&&"function"==typeof t.html)return t.html(e,n);if(t instanceof Wp)return Vp(t.value().slice(e,e+n));if(t instanceof Ad){if("list-container"===t.statics.blotName){const i=[];return t.children.forEachAt(e,n,((t,e,n)=>{const r="formats"in t&&"function"==typeof t.formats?t.formats():{};i.push({child:t,offset:e,length:n,indent:r.indent||0,type:r.list})})),gf(i,-1,[])}const r=[];if(t.children.forEachAt(e,n,((t,e,n)=>{r.push(vf(t,e,n))})),i||"list"===t.statics.blotName)return r.join("");const{outerHTML:o,innerHTML:s}=t.domNode,[a,l]=o.split(`>${s}<`);return"<table"===a?`<table style="border: 1px solid #000;">${r.join("")}<${l}`:`${a}>${r.join("")}<${l}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function bf(t,e){return Object.keys(e).reduce(((n,i)=>{if(null==t[i])return n;const r=e[i];return r===t[i]?n[i]=r:Array.isArray(r)?r.indexOf(t[i])<0?n[i]=r.concat([t[i]]):n[i]=r:n[i]=[r,t[i]],n}),{})}function yf(t){const e="ordered"===t?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function wf(t){return t.reduce(((t,e)=>{if("string"==typeof e.insert){const n=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(n,e.attributes)}return t.push(e)}),new Bd)}function _f(t,e){let{index:n,length:i}=t;return new df(n+e,i)}const xf=class{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const n=wf(t),i=new Bd,r=function(t){const e=[];return t.forEach((t=>{"string"==typeof t.insert?t.insert.split("\n").forEach(((n,i)=>{i&&e.push({insert:"\n",attributes:t.attributes}),n&&e.push({insert:n,attributes:t.attributes})})):e.push(t)})),e}(n.ops.slice());return r.reduce(((t,n)=>{const r=Bd.Op.length(n);let o=n.attributes||{},s=!1,a=!1;if(null!=n.insert){if(i.retain(r),"string"==typeof n.insert){const i=n.insert;a=!i.endsWith("\n")&&(e<=t||!!this.scroll.descendant(Xp,t)[0]),this.scroll.insertAt(t,i);const[r,s]=this.scroll.line(t);let l=od({},Qp(r));if(r instanceof Zp){const[t]=r.descendant(wd,s);t&&(l=od(l,Qp(t)))}o=Bd.AttributeMap.diff(l,o)||{}}else if("object"==typeof n.insert){const i=Object.keys(n.insert)[0];if(null==i)return t;const r=null!=this.scroll.query(i,ad.INLINE);if(r)(e<=t||this.scroll.descendant(Xp,t)[0])&&(a=!0);else if(t>0){const[e,n]=this.scroll.descendant(wd,t-1);e instanceof Wp?"\n"!==e.value()[n]&&(s=!0):e instanceof Od&&e.statics.scope===ad.INLINE_BLOT&&(s=!0)}if(this.scroll.insertAt(t,i,n.insert[i]),r){const[e]=this.scroll.descendant(wd,t);if(e){const t=od({},Qp(e));o=Bd.AttributeMap.diff(t,o)||{}}}}e+=r}else if(i.push(n),null!==n.retain&&"object"==typeof n.retain){const e=Object.keys(n.retain)[0];if(null==e)return t;this.scroll.updateEmbedAt(t,e,n.retain[e])}Object.keys(o).forEach((e=>{this.scroll.formatAt(t,r,e,o[e])}));const l=s?1:0,c=a?1:0;return e+=l+c,i.retain(l),i.delete(c),t+r+l+c}),0),i.reduce(((t,e)=>"number"==typeof e.delete?(this.scroll.deleteAt(t,e.delete),t):t+Bd.Op.length(e)),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update((new Bd).retain(t).delete(e))}formatLine(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach((i=>{this.scroll.lines(t,Math.max(e,1)).forEach((t=>{t.format(i,n[i])}))})),this.scroll.optimize();const i=(new Bd).retain(t).retain(e,Np(n));return this.update(i)}formatText(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(n).forEach((i=>{this.scroll.formatAt(t,e,i,n[i])}));const i=(new Bd).retain(t).retain(e,Np(n));return this.update(i)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce(((t,e)=>t.concat(e.delta())),new Bd)}getFormat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],i=[];0===e?this.scroll.path(t).forEach((t=>{const[e]=t;e instanceof Zp?n.push(e):e instanceof wd&&i.push(e)})):(n=this.scroll.lines(t,e),i=this.scroll.descendants(wd,t,e));const[r,o]=[n,i].map((t=>{const e=t.shift();if(null==e)return{};let n=Qp(e);for(;Object.keys(n).length>0;){const e=t.shift();if(null==e)return n;n=bf(Qp(e),n)}return n}));return{...r,...o}}getHTML(t,e){const[n,i]=this.scroll.line(t);if(n){const r=n.length();return n.length()>=i+e&&(0!==i||e!==r)?vf(n,i,e,!0):vf(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter((t=>"string"==typeof t.insert)).map((t=>t.insert)).join("")}insertContents(t,e){const n=wf(e),i=(new Bd).retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(i)}insertEmbed(t,e,n){return this.scroll.insertAt(t,e,n),this.update((new Bd).retain(t).insert({[e]:n}))}insertText(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(n).forEach((i=>{this.scroll.formatAt(t,e.length,i,n[i])})),this.update((new Bd).retain(t).insert(e,Np(n)))}isBlank(){if(0===this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if(t?.statics.blotName!==Zp.blotName)return!1;const e=t;return!(e.children.length>1)&&e.children.head instanceof Hp}removeFormat(t,e){const n=this.getText(t,e),[i,r]=this.scroll.line(t+e);let o=0,s=new Bd;null!=i&&(o=i.length()-r,s=i.delta().slice(r,r+o-1).insert("\n"));const a=this.getContents(t,e+o).diff((new Bd).insert(n).concat(s)),l=(new Bd).retain(t).concat(a);return this.applyDelta(l)}update(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(mf)&&this.scroll.find(e[0].target)){const r=this.scroll.find(e[0].target),o=Qp(r),s=r.offset(this.scroll),a=e[0].oldValue.replace(tf.CONTENTS,""),l=(new Bd).insert(a),c=(new Bd).insert(r.value()),u=n&&{oldRange:_f(n.oldRange,-s),newRange:_f(n.newRange,-s)};t=(new Bd).retain(s).concat(l.diff(c,u)).reduce(((t,e)=>e.insert?t.insert(e.insert,o):t.push(e)),new Bd),this.delta=i.compose(t)}else this.delta=this.getDelta(),t&&Up(i.compose(t),this.delta)||(t=i.diff(this.delta,n));return t}},Ef=class{static DEFAULTS={};constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.quill=t,this.options=e}},Af="\ufeff",kf=class extends Od{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach((t=>{this.contentNode.appendChild(t)})),this.leftGuard=document.createTextNode(Af),this.rightGuard=document.createTextNode(Af),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e,n=null;const i=t.data.split(Af).join("");if(t===this.leftGuard)if(this.prev instanceof Wp){const t=this.prev.length();this.prev.insertAt(t,i),n={startNode:this.prev.domNode,startOffset:t+i.length}}else e=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(e),this),n={startNode:e,startOffset:i.length};else t===this.rightGuard&&(this.next instanceof Wp?(this.next.insertAt(0,i),n={startNode:this.next.domNode,startOffset:i.length}):(e=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(e),this.next),n={startNode:e,startOffset:i.length}));return t.data=Af,n}update(t,e){t.forEach((t=>{if("characterData"===t.type&&(t.target===this.leftGuard||t.target===this.rightGuard)){const n=this.restore(t.target);n&&(e.range=n)}}))}},Nf=class{isComposing=!1;constructor(t,e){this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",(t=>{this.isComposing||this.handleCompositionStart(t)})),this.scroll.domNode.addEventListener("compositionend",(t=>{this.isComposing&&queueMicrotask((()=>{this.handleCompositionEnd(t)}))}))}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;!e||e instanceof kf||(this.emitter.emit(uf.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(uf.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(uf.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(uf.events.COMPOSITION_END,t),this.isComposing=!1}};class Cf{static DEFAULTS={modules:{}};static themes={default:Cf};modules={};constructor(t,e){this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach((t=>{null==this.modules[t]&&this.addModule(t)}))}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}const Sf=Cf,Tf=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,i="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*i,left:e.left}},Lf=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},Of=(t,e,n,i,r,o)=>t<n&&e>i?0:t<n?-(n-t+r):e>i?e-t>i-n?t+r-n:e-i+o:0,If=["block","break","cursor","inline","scroll","text"],Mf=lf("quill"),qf=new hd;Ad.uiClass="ql-ui";class jf{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:qf,theme:"default"};static events=uf.events;static sources=uf.sources;static version="2.0.2";static imports={delta:Bd,parchment:e,"core/module":Ef,"core/theme":Sf};static debug(t){!0===t&&(t="log"),lf.level(t)}static find(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return nf.get(t)||qf.find(t,e)}static import(t){return null==this.imports[t]&&Mf.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if("string"!=typeof(arguments.length<=0?void 0:arguments[0])){const t=arguments.length<=0?void 0:arguments[0],e=!!(arguments.length<=1?void 0:arguments[1]),n="attrName"in t?t.attrName:t.blotName;"string"==typeof n?this.register(`formats/${n}`,t,e):Object.keys(t).forEach((n=>{this.register(n,t[n],e)}))}else{const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],n=!!(arguments.length<=2?void 0:arguments[2]);null==this.imports[t]||n||Mf.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&"boolean"!=typeof e&&"abstract"!==e.blotName&&qf.register(e),"function"==typeof e.register&&e.register(qf)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options=function(t,e){const n=Df(t);if(!n)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===jf.DEFAULTS.theme?Sf:jf.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:r,...o}=jf.DEFAULTS,{modules:s,...a}=i.DEFAULTS;let l=Bf(e.modules);null!=l&&l.toolbar&&l.toolbar.constructor!==Object&&(l={...l,toolbar:{container:l.toolbar}});const c=od({},Bf(r),Bf(s),l),u={...o,...Pf(a),...Pf(e)};let h=e.registry;return h?e.formats&&Mf.warn('Ignoring "formats" option because "registry" is specified'):h=e.formats?((t,e,n)=>{const i=new hd;return If.forEach((t=>{const n=e.query(t);n&&i.register(n)})),t.forEach((t=>{let r=e.query(t);r||n.error(`Cannot register "${t}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;r;)if(i.register(r),r="blotName"in r?r.requiredContainer??null:null,o+=1,o>100){n.error(`Cycle detected in registering blot requiredContainer: "${t}"`);break}})),i})(e.formats,u.registry,Mf):u.registry,{...u,registry:h,container:n,theme:i,modules:Object.entries(c).reduce(((t,e)=>{let[n,i]=e;if(!i)return t;const r=jf.import(`modules/${n}`);return null==r?(Mf.error(`Cannot load ${n} module. Are you sure you registered it?`),t):{...t,[n]:od({},r.DEFAULTS||{},i)}}),{}),bounds:Df(u.bounds)}}(t,e),this.container=this.options.container,null==this.container)return void Mf.error("Invalid Quill container",t);this.options.debug&&jf.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",nf.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new uf;const i=qd.blotName,r=this.options.registry.query(i);if(!r||!("blotName"in r))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new r(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new xf(this.scroll),this.selection=new ff(this.scroll,this.emitter),this.composition=new Nf(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(uf.events.EDITOR_CHANGE,(t=>{t===uf.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())})),this.emitter.on(uf.events.SCROLL_UPDATE,((t,e)=>{const n=this.selection.lastRange,[i]=this.selection.getRange(),r=n&&i?{oldRange:n,newRange:i}:void 0;Rf.call(this,(()=>this.editor.update(null,e,r)),t)})),this.emitter.on(uf.events.SCROLL_EMBED_UPDATE,((t,e)=>{const n=this.selection.lastRange,[i]=this.selection.getRange(),r=n&&i?{oldRange:n,newRange:i}:void 0;Rf.call(this,(()=>{const n=(new Bd).retain(t.offset(this)).retain({[t.statics.blotName]:e});return this.editor.update(n,[],r)}),jf.sources.USER)})),n){const t=this.clipboard.convert({html:`${n}<p><br></p>`,text:"\n"});this.setContents(t)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){const e=t;(t=document.createElement("div")).classList.add(e)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,n){return[t,e,,n]=Ff(t,e,n),Rf.call(this,(()=>this.editor.deleteText(t,e)),n,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uf.sources.API;return Rf.call(this,(()=>{const n=this.getSelection(!0);let i=new Bd;if(null==n)return i;if(this.scroll.query(t,ad.BLOCK))i=this.editor.formatLine(n.index,n.length,{[t]:e});else{if(0===n.length)return this.selection.format(t,e),i;i=this.editor.formatText(n.index,n.length,{[t]:e})}return this.setSelection(n,uf.sources.SILENT),i}),n)}formatLine(t,e,n,i,r){let o;return[t,e,o,r]=Ff(t,e,n,i,r),Rf.call(this,(()=>this.editor.formatLine(t,e,o)),r,t,0)}formatText(t,e,n,i,r){let o;return[t,e,o,r]=Ff(t,e,n,i,r),Rf.call(this,(()=>this.editor.formatText(t,e,o)),r,t,0)}getBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=null;if(n="number"==typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length),!n)return null;const i=this.container.getBoundingClientRect();return{bottom:n.bottom-i.top,height:n.height,left:n.left-i.left,right:n.right-i.left,top:n.top-i.top,width:n.width}}getContents(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t;return[t,e]=Ff(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof t&&(e=e??this.getLength()-t),[t,e]=Ff(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof t&&(e=e??this.getLength()-t),[t,e]=Ff(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:jf.sources.API;return Rf.call(this,(()=>this.editor.insertEmbed(t,e,n)),i,t)}insertText(t,e,n,i,r){let o;return[t,,o,r]=Ff(t,0,n,i,r),Rf.call(this,(()=>this.editor.insertText(t,e,o)),r,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,n){return[t,e,,n]=Ff(t,e,n),Rf.call(this,(()=>this.editor.removeFormat(t,e)),n,t)}scrollRectIntoView(t){((t,e)=>{const n=t.ownerDocument;let i=e,r=t;for(;r;){const t=r===n.body,e=t?{top:0,right:window.visualViewport?.width??n.documentElement.clientWidth,bottom:window.visualViewport?.height??n.documentElement.clientHeight,left:0}:Tf(r),s=getComputedStyle(r),a=Of(i.left,i.right,e.left,e.right,Lf(s.scrollPaddingLeft),Lf(s.scrollPaddingRight)),l=Of(i.top,i.bottom,e.top,e.bottom,Lf(s.scrollPaddingTop),Lf(s.scrollPaddingBottom));if(a||l)if(t)n.defaultView?.scrollBy(a,l);else{const{scrollLeft:t,scrollTop:e}=r;l&&(r.scrollTop+=l),a&&(r.scrollLeft+=a);const n=r.scrollLeft-t,o=r.scrollTop-e;i={left:i.left-n,top:i.top-o,right:i.right-n,bottom:i.bottom-o}}r=t||"fixed"===s.position?null:(o=r).parentElement||o.getRootNode().host||null}var o})(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uf.sources.API;return Rf.call(this,(()=>{t=new Bd(t);const e=this.getLength(),n=this.editor.deleteText(0,e),i=this.editor.insertContents(0,t),r=this.editor.deleteText(this.getLength()-1,1);return n.compose(i).compose(r)}),e)}setSelection(t,e,n){null==t?this.selection.setRange(null,e||jf.sources.API):([t,e,,n]=Ff(t,e,n),this.selection.setRange(new df(Math.max(0,t),e),n),n!==uf.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uf.sources.API;const n=(new Bd).insert(t);return this.setContents(n,e)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uf.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uf.sources.API;return Rf.call(this,(()=>(t=new Bd(t),this.editor.applyDelta(t))),e,!0)}}function Df(t){return"string"==typeof t?document.querySelector(t):t}function Bf(t){return Object.entries(t??{}).reduce(((t,e)=>{let[n,i]=e;return{...t,[n]:!0===i?{}:i}}),{})}function Pf(t){return Object.fromEntries(Object.entries(t).filter((t=>void 0!==t[1])))}function Rf(t,e,n,i){if(!this.isEnabled()&&e===uf.sources.USER&&!this.allowReadOnlyEdits)return new Bd;let r=null==n?null:this.getSelection();const o=this.editor.delta,s=t();if(null!=r&&(!0===n&&(n=r.index),null==i?r=$f(r,s,e):0!==i&&(r=$f(r,n,i,e)),this.setSelection(r,uf.sources.SILENT)),s.length()>0){const t=[uf.events.TEXT_CHANGE,s,o,e];this.emitter.emit(uf.events.EDITOR_CHANGE,...t),e!==uf.sources.SILENT&&this.emitter.emit(...t)}return s}function Ff(t,e,n,i,r){let o={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(r=i,i=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(r=i,i=n,n=e,e=0),"object"==typeof n?(o=n,r=i):"string"==typeof n&&(null!=i?o[n]=i:r=n),[t,e,o,r=r||uf.sources.API]}function $f(t,e,n,i){const r="number"==typeof n?n:0;if(null==t)return null;let o,s;return e&&"function"==typeof e.transformPosition?[o,s]=[t.index,t.index+t.length].map((t=>e.transformPosition(t,i!==uf.sources.USER))):[o,s]=[t.index,t.index+t.length].map((t=>t<e||t===e&&i===uf.sources.USER?t:r>=0?t+r:Math.max(e,t+r))),new df(o,s-o)}const Uf=class extends Ld{};function zf(t){return t instanceof Zp||t instanceof Xp}function Hf(t){return"function"==typeof t.updateContent}function Wf(t,e,n){n.reduce(((e,n)=>{const i=Bd.Op.length(n);let r=n.attributes||{};if(null!=n.insert)if("string"==typeof n.insert){const i=n.insert;t.insertAt(e,i);const[o]=t.descendant(wd,e),s=Qp(o);r=Bd.AttributeMap.diff(s,r)||{}}else if("object"==typeof n.insert){const i=Object.keys(n.insert)[0];if(null==i)return e;if(t.insertAt(e,i,n.insert[i]),null!=t.scroll.query(i,ad.INLINE)){const[n]=t.descendant(wd,e),i=Qp(n);r=Bd.AttributeMap.diff(i,r)||{}}}return Object.keys(r).forEach((n=>{t.formatAt(e,i,n,r[n])})),e+i}),e)}const Vf={scope:ad.BLOCK,whitelist:["right","center","justify"]},Kf=new ld("align","align",Vf),Yf=new pd("align","ql-align",Vf),Zf=new md("align","text-align",Vf);class Xf extends md{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map((t=>`00${parseInt(t,10).toString(16)}`.slice(-2))).join("")}`):e}}const Gf=new pd("color","ql-color",{scope:ad.INLINE}),Qf=new Xf("color","color",{scope:ad.INLINE}),Jf=new pd("background","ql-bg",{scope:ad.INLINE}),tm=new Xf("background","background-color",{scope:ad.INLINE});class em extends Uf{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map((t=>t.length()<=1?"":t.domNode.innerText)).join("\n").slice(t,t+e)}html(t,e){return`<pre>\n${Vp(this.code(t,e))}\n</pre>`}}class nm extends Zp{static TAB="  ";static register(){jf.register(em)}}class im extends Yp{}im.blotName="code",im.tagName="CODE",nm.blotName="code-block",nm.className="ql-code-block",nm.tagName="DIV",em.blotName="code-block-container",em.className="ql-code-block-container",em.tagName="DIV",em.allowedChildren=[nm],nm.allowedChildren=[Wp,Hp,tf],nm.requiredContainer=em;const rm={scope:ad.BLOCK,whitelist:["rtl"]},om=new ld("direction","dir",rm),sm=new pd("direction","ql-direction",rm),am=new md("direction","direction",rm),lm={scope:ad.INLINE,whitelist:["serif","monospace"]},cm=new pd("font","ql-font",lm),um=new class extends md{value(t){return super.value(t).replace(/["']/g,"")}}("font","font-family",lm),hm=new pd("size","ql-size",{scope:ad.INLINE,whitelist:["small","large","huge"]}),dm=new md("size","font-size",{scope:ad.INLINE,whitelist:["10px","18px","32px"]}),pm=lf("quill:keyboard"),fm=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class mm extends Ef{static match(t,e){return!["altKey","ctrlKey","metaKey","shiftKey"].some((n=>!!e[n]!==t[n]&&null!==e[n]))&&(e.key===t.key||e.key===t.which)}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach((t=>{this.options.bindings[t]&&this.addBinding(this.options.bindings[t])})),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},(()=>{})),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=function(t){if("string"==typeof t||"number"==typeof t)t={key:t};else{if("object"!=typeof t)return null;t=Np(t)}return t.shortKey&&(t[fm]=t.shortKey,delete t.shortKey),t}(t);null!=i?("function"==typeof e&&(e={handler:e}),"function"==typeof n&&(n={handler:n}),(Array.isArray(i.key)?i.key:[i.key]).forEach((t=>{const r={...i,key:t,...e,...n};this.bindings[r.key]=this.bindings[r.key]||[],this.bindings[r.key].push(r)}))):pm.warn("Attempted to add invalid keyboard binding",i)}listen(){this.quill.root.addEventListener("keydown",(t=>{if(t.defaultPrevented||t.isComposing)return;if(229===t.keyCode&&("Enter"===t.key||"Backspace"===t.key))return;const e=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter((e=>mm.match(t,e)));if(0===e.length)return;const n=jf.find(t.target,!0);if(n&&n.scroll!==this.quill.scroll)return;const i=this.quill.getSelection();if(null==i||!this.quill.hasFocus())return;const[r,o]=this.quill.getLine(i.index),[s,a]=this.quill.getLeaf(i.index),[l,c]=0===i.length?[s,a]:this.quill.getLeaf(i.index+i.length),u=s instanceof Dd?s.value().slice(0,a):"",h=l instanceof Dd?l.value().slice(c):"",d={collapsed:0===i.length,empty:0===i.length&&r.length()<=1,format:this.quill.getFormat(i),line:r,offset:o,prefix:u,suffix:h,event:t};e.some((t=>{if(null!=t.collapsed&&t.collapsed!==d.collapsed)return!1;if(null!=t.empty&&t.empty!==d.empty)return!1;if(null!=t.offset&&t.offset!==d.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((t=>null==d.format[t])))return!1}else if("object"==typeof t.format&&!Object.keys(t.format).every((e=>!0===t.format[e]?null!=d.format[e]:!1===t.format[e]?null==d.format[e]:Up(t.format[e],d.format[e]))))return!1;return!(null!=t.prefix&&!t.prefix.test(d.prefix)||null!=t.suffix&&!t.suffix.test(d.suffix)||!0===t.handler.call(this,i,d,t))}))&&t.preventDefault()}))}handleBackspace(t,e){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(0===t.index||this.quill.getLength()<=1)return;let i={};const[r]=this.quill.getLine(t.index);let o=(new Bd).retain(t.index-n).delete(n);if(0===e.offset){const[e]=this.quill.getLine(t.index-1);if(e&&!("block"===e.statics.blotName&&e.length()<=1)){const e=r.formats(),n=this.quill.getFormat(t.index-1,1);if(i=Bd.AttributeMap.diff(e,n)||{},Object.keys(i).length>0){const e=(new Bd).retain(t.index+r.length()-2).retain(1,i);o=o.compose(e)}}}this.quill.updateContents(o,jf.sources.USER),this.quill.focus()}handleDelete(t,e){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-n)return;let i={};const[r]=this.quill.getLine(t.index);let o=(new Bd).retain(t.index).delete(n);if(e.offset>=r.length()-1){const[e]=this.quill.getLine(t.index+1);if(e){const n=r.formats(),s=this.quill.getFormat(t.index,1);i=Bd.AttributeMap.diff(n,s)||{},Object.keys(i).length>0&&(o=o.retain(e.length()-1).retain(1,i))}}this.quill.updateContents(o,jf.sources.USER),this.quill.focus()}handleDeleteRange(t){_m({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const n=Object.keys(e.format).reduce(((t,n)=>(this.quill.scroll.query(n,ad.BLOCK)&&!Array.isArray(e.format[n])&&(t[n]=e.format[n]),t)),{}),i=(new Bd).retain(t.index).delete(t.length).insert("\n",n);this.quill.updateContents(i,jf.sources.USER),this.quill.setSelection(t.index+1,jf.sources.SILENT),this.quill.focus()}}const gm={bindings:{bold:ym("bold"),italic:ym("italic"),underline:ym("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","+1",jf.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","-1",jf.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){null!=e.format.indent?this.quill.format("indent","-1",jf.sources.USER):null!=e.format.list&&this.quill.format("list",!1,jf.sources.USER)}},"indent code-block":vm(!0),"outdent code-block":vm(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,jf.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=(new Bd).retain(t.index).delete(t.length).insert("\t");return this.quill.updateContents(n,jf.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,jf.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,jf.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,jf.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),i={...e.formats(),list:"checked"},r=(new Bd).retain(t.index).insert("\n",i).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,jf.sources.USER),this.quill.setSelection(t.index+1,jf.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,i]=this.quill.getLine(t.index),r=(new Bd).retain(t.index).insert("\n",e.format).retain(n.length()-i-1).retain(1,{header:null});this.quill.updateContents(r,jf.sources.USER),this.quill.setSelection(t.index+1,jf.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,i,r,o]=e.getTable(t),s=function(t,e,n,i){return null==e.prev&&null==e.next?null==n.prev&&null==n.next?0===i?-1:1:null==n.prev?-1:1:null==e.prev?-1:null==e.next?1:null}(0,i,r,o);if(null==s)return;let a=n.offset();if(s<0){const e=(new Bd).retain(a).insert("\n");this.quill.updateContents(e,jf.sources.USER),this.quill.setSelection(t.index+1,t.length,jf.sources.SILENT)}else if(s>0){a+=n.length();const t=(new Bd).retain(a).insert("\n");this.quill.updateContents(t,jf.sources.USER),this.quill.setSelection(a,jf.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:i}=e,r=i.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(r-1,jf.sources.USER):this.quill.setSelection(r+i.length(),jf.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(null==this.quill.scroll.query("list"))return!0;const{length:n}=e.prefix,[i,r]=this.quill.getLine(t.index);if(r>n)return!0;let o;switch(e.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(t.index," ",jf.sources.USER),this.quill.history.cutoff();const s=(new Bd).retain(t.index-r).delete(n+1).retain(i.length()-2-r).retain(1,{list:o});return this.quill.updateContents(s,jf.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,jf.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let i=2,r=e;for(;null!=r&&r.length()<=1&&r.formats()["code-block"];)if(r=r.prev,i-=1,i<=0){const i=(new Bd).retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,jf.sources.USER),this.quill.setSelection(t.index-1,jf.sources.SILENT),!1}return!0}},"embed left":bm("ArrowLeft",!1),"embed left shift":bm("ArrowLeft",!0),"embed right":bm("ArrowRight",!1),"embed right shift":bm("ArrowRight",!0),"table down":wm(!1),"table up":wm(!0)}};function vm(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:i}=n;const r=this.quill.scroll.query("code-block"),{TAB:o}=r;if(0===e.length&&!i.shiftKey)return this.quill.insertText(e.index,o,jf.sources.USER),void this.quill.setSelection(e.index+o.length,jf.sources.SILENT);const s=0===e.length?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:a,length:l}=e;s.forEach(((e,n)=>{t?(e.insertAt(0,o),0===n?a+=o.length:l+=o.length):e.domNode.textContent.startsWith(o)&&(e.deleteAt(0,o.length),0===n?a-=o.length:l-=o.length)})),this.quill.update(jf.sources.USER),this.quill.setSelection(a,l,jf.sources.SILENT)}}}function bm(t,e){const n="ArrowLeft"===t?"prefix":"suffix";return{key:t,shiftKey:e,altKey:null,[n]:/^$/,handler(n){let{index:i}=n;"ArrowRight"===t&&(i+=n.length+1);const[r]=this.quill.getLeaf(i);return!(r instanceof Od&&("ArrowLeft"===t?e?this.quill.setSelection(n.index-1,n.length+1,jf.sources.USER):this.quill.setSelection(n.index-1,jf.sources.USER):e?this.quill.setSelection(n.index,n.length+1,jf.sources.USER):this.quill.setSelection(n.index+n.length+1,jf.sources.USER),1))}}}function ym(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],jf.sources.USER)}}}function wm(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const i=t?"prev":"next",r=n.line,o=r.parent[i];if(null!=o){if("table-row"===o.statics.blotName){let t=o.children.head,e=r;for(;null!=e.prev;)e=e.prev,t=t.next;const i=t.offset(this.quill.scroll)+Math.min(n.offset,t.length()-1);this.quill.setSelection(i,0,jf.sources.USER)}}else{const e=r.table()[i];null!=e&&(t?this.quill.setSelection(e.offset(this.quill.scroll)+e.length()-1,0,jf.sources.USER):this.quill.setSelection(e.offset(this.quill.scroll),0,jf.sources.USER))}return!1}}}function _m(t){let{quill:e,range:n}=t;const i=e.getLines(n);let r={};if(i.length>1){const t=i[0].formats(),e=i[i.length-1].formats();r=Bd.AttributeMap.diff(e,t)||{}}e.deleteText(n,jf.sources.USER),Object.keys(r).length>0&&e.formatLine(n.index,1,r,jf.sources.USER),e.setSelection(n.index,jf.sources.SILENT)}mm.DEFAULTS=gm;const xm=/font-weight:\s*normal/,Em=["P","OL","UL"],Am=t=>t&&Em.includes(t.tagName),km=/\bmso-list:[^;]*ignore/i,Nm=/\bmso-list:[^;]*\bl(\d+)/i,Cm=/\bmso-list:[^;]*\blevel(\d+)/i,Sm=[function(t){"urn:schemas-microsoft-com:office:word"===t.documentElement.getAttribute("xmlns:w")&&(t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],i=[];e.forEach((t=>{(t.getAttribute("style")||"").match(km)?n.push(t):i.push(t)})),n.forEach((t=>t.parentNode?.removeChild(t)));const r=t.documentElement.innerHTML,o=i.map((t=>((t,e)=>{const n=t.getAttribute("style"),i=n?.match(Nm);if(!i)return null;const r=Number(i[1]),o=n?.match(Cm),s=o?Number(o[1]):1,a=new RegExp(`@list l${r}:level${s}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=e.match(a);return{id:r,indent:s,type:l&&"bullet"===l[1]?"bullet":"ordered",element:t}})(t,r))).filter((t=>t));for(;o.length;){const t=[];let e=o.shift();for(;e;)t.push(e),e=o.length&&o[0]?.element===e.element.nextElementSibling&&o[0].id===e.id?o.shift():null;const n=document.createElement("ul");t.forEach((t=>{const e=document.createElement("li");e.setAttribute("data-list",t.type),t.indent>1&&e.setAttribute("class","ql-indent-"+(t.indent-1)),e.innerHTML=t.element.innerHTML,n.appendChild(e)}));const i=t[0]?.element,{parentNode:r}=i??{};i&&r?.replaceChild(n,i),t.slice(1).forEach((t=>{let{element:e}=t;r?.removeChild(e)}))}})(t)},function(t){t.querySelector('[id^="docs-internal-guid-"]')&&((t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter((t=>t.getAttribute("style")?.match(xm))).forEach((e=>{const n=t.createDocumentFragment();n.append(...e.childNodes),e.parentNode?.replaceChild(n,e)}))})(t),(t=>{Array.from(t.querySelectorAll("br")).filter((t=>Am(t.previousElementSibling)&&Am(t.nextElementSibling))).forEach((t=>{t.parentNode?.removeChild(t)}))})(t))}],Tm=lf("quill:clipboard"),Lm=[[Node.TEXT_NODE,function(t,e,n){let i=t.data;if("O:P"===t.parentElement?.tagName)return e.insert(i.trim());if(!Bm(t)){if(0===i.trim().length&&i.includes("\n")&&!function(t,e){return t.previousElementSibling&&t.nextElementSibling&&!jm(t.previousElementSibling,e)&&!jm(t.nextElementSibling,e)}(t,n))return e;const r=(t,e)=>{const n=e.replace(/[^\u00a0]/g,"");return n.length<1&&t?" ":n};i=i.replace(/\r\n/g," ").replace(/\n/g," "),i=i.replace(/\s\s+/g,r.bind(r,!0)),(null==t.previousSibling&&null!=t.parentElement&&jm(t.parentElement,n)||t.previousSibling instanceof Element&&jm(t.previousSibling,n))&&(i=i.replace(/^\s+/,r.bind(r,!1))),(null==t.nextSibling&&null!=t.parentElement&&jm(t.parentElement,n)||t.nextSibling instanceof Element&&jm(t.nextSibling,n))&&(i=i.replace(/\s+$/,r.bind(r,!1)))}return e.insert(i)}],[Node.TEXT_NODE,Fm],["br",function(t,e){return qm(e,"\n")||e.insert("\n"),e}],[Node.ELEMENT_NODE,Fm],[Node.ELEMENT_NODE,function(t,e,n){const i=n.query(t);if(null==i)return e;if(i.prototype instanceof Od){const e={},r=i.value(t);if(null!=r)return e[i.blotName]=r,(new Bd).insert(e,i.formats(t,n))}else if(i.prototype instanceof Sd&&!qm(e,"\n")&&e.insert("\n"),"blotName"in i&&"formats"in i&&"function"==typeof i.formats)return Mm(e,i.blotName,i.formats(t,n),n);return e}],[Node.ELEMENT_NODE,function(t,e,n){const i=ld.keys(t),r=pd.keys(t),o=md.keys(t),s={};return i.concat(r).concat(o).forEach((e=>{let i=n.query(e,ad.ATTRIBUTE);null!=i&&(s[i.attrName]=i.value(t),s[i.attrName])||(i=Om[e],null==i||i.attrName!==e&&i.keyName!==e||(s[i.attrName]=i.value(t)||void 0),i=Im[e],null==i||i.attrName!==e&&i.keyName!==e||(i=Im[e],s[i.attrName]=i.value(t)||void 0))})),Object.entries(s).reduce(((t,e)=>{let[i,r]=e;return Mm(t,i,r,n)}),e)}],[Node.ELEMENT_NODE,function(t,e,n){const i={},r=t.style||{};return"italic"===r.fontStyle&&(i.italic=!0),"underline"===r.textDecoration&&(i.underline=!0),"line-through"===r.textDecoration&&(i.strike=!0),(r.fontWeight?.startsWith("bold")||parseInt(r.fontWeight,10)>=700)&&(i.bold=!0),e=Object.entries(i).reduce(((t,e)=>{let[i,r]=e;return Mm(t,i,r,n)}),e),parseFloat(r.textIndent||0)>0?(new Bd).insert("\t").concat(e):e}],["li",function(t,e,n){const i=n.query(t);if(null==i||"list"!==i.blotName||!qm(e,"\n"))return e;let r=-1,o=t.parentNode;for(;null!=o;)["OL","UL"].includes(o.tagName)&&(r+=1),o=o.parentNode;return r<=0?e:e.reduce(((t,e)=>e.insert?e.attributes&&"number"==typeof e.attributes.indent?t.push(e):t.insert(e.insert,{indent:r,...e.attributes||{}}):t),new Bd)}],["ol, ul",function(t,e,n){const i=t;let r="OL"===i.tagName?"ordered":"bullet";const o=i.getAttribute("data-checked");return o&&(r="true"===o?"checked":"unchecked"),Mm(e,"list",r,n)}],["pre",function(t,e,n){const i=n.query("code-block");return Mm(e,"code-block",!i||!("formats"in i)||"function"!=typeof i.formats||i.formats(t,n),n)}],["tr",function(t,e,n){const i="TABLE"===t.parentElement?.tagName?t.parentElement:t.parentElement?.parentElement;return null!=i?Mm(e,"table",Array.from(i.querySelectorAll("tr")).indexOf(t)+1,n):e}],["b",Rm("bold")],["i",Rm("italic")],["strike",Rm("strike")],["style",function(){return new Bd}]],Om=[Kf,om].reduce(((t,e)=>(t[e.keyName]=e,t)),{}),Im=[Zf,tm,Qf,am,um,dm].reduce(((t,e)=>(t[e.keyName]=e,t)),{});function Mm(t,e,n,i){return i.query(e)?t.reduce(((t,i)=>{if(!i.insert)return t;if(i.attributes&&i.attributes[e])return t.push(i);const r=n?{[e]:n}:{};return t.insert(i.insert,{...r,...i.attributes})}),new Bd):t}function qm(t,e){let n="";for(let i=t.ops.length-1;i>=0&&n.length<e.length;--i){const e=t.ops[i];if("string"!=typeof e.insert)break;n=e.insert+n}return n.slice(-1*e.length)===e}function jm(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return!(n&&n.prototype instanceof Od)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}const Dm=new WeakMap;function Bm(t){return null!=t&&(Dm.has(t)||("PRE"===t.tagName?Dm.set(t,!0):Dm.set(t,Bm(t.parentNode))),Dm.get(t))}function Pm(t,e,n,i,r){return e.nodeType===e.TEXT_NODE?i.reduce(((n,i)=>i(e,n,t)),new Bd):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce(((o,s)=>{let a=Pm(t,s,n,i,r);return s.nodeType===e.ELEMENT_NODE&&(a=n.reduce(((e,n)=>n(s,e,t)),a),a=(r.get(s)||[]).reduce(((e,n)=>n(s,e,t)),a)),o.concat(a)}),new Bd):new Bd}function Rm(t){return(e,n,i)=>Mm(n,t,!0,i)}function Fm(t,e,n){if(!qm(e,"\n")){if(jm(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert("\n");if(e.length()>0&&t.nextSibling){let i=t.nextSibling;for(;null!=i;){if(jm(i,n))return e.insert("\n");const t=n.query(i);if(t&&t.prototype instanceof Xp)return e.insert("\n");i=i.firstChild}}}return e}function $m(t,e){let n=e;for(let e=t.length-1;e>=0;e-=1){const i=t[e];t[e]={delta:n.transform(i.delta,!0),range:i.range&&Um(i.range,n)},n=i.delta.transform(n),0===t[e].delta.length()&&t.splice(e,1)}}function Um(t,e){if(!t)return t;const n=e.transformPosition(t.index);return{index:n,length:e.transformPosition(t.index+t.length)-n}}class zm extends Ef{constructor(t,e){super(t,e),t.root.addEventListener("drop",(e=>{e.preventDefault();let n=null;if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(e.clientX,e.clientY);else if(document.caretPositionFromPoint){const t=document.caretPositionFromPoint(e.clientX,e.clientY);n=document.createRange(),n.setStart(t.offsetNode,t.offset),n.setEnd(t.offsetNode,t.offset)}const i=n&&t.selection.normalizeNative(n);if(i){const n=t.selection.normalizedToRange(i);e.dataTransfer?.files&&this.upload(n,e.dataTransfer.files)}}))}upload(t,e){const n=[];Array.from(e).forEach((t=>{t&&this.options.mimetypes?.includes(t.type)&&n.push(t)})),n.length>0&&this.options.handler.call(this,t,n)}}zm.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map((t=>new Promise((e=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.readAsDataURL(t)}))));Promise.all(n).then((e=>{const n=e.reduce(((t,e)=>t.insert({image:e})),(new Bd).retain(t.index).delete(t.length));this.quill.updateContents(n,uf.sources.USER),this.quill.setSelection(t.index+e.length,uf.sources.SILENT)}))}};const Hm=zm,Wm=["insertText","insertReplacementText"],Vm=/Mac/i.test(navigator.platform);jf.register({"blots/block":Zp,"blots/block/embed":Xp,"blots/break":Hp,"blots/container":Uf,"blots/cursor":tf,"blots/embed":kf,"blots/inline":Yp,"blots/scroll":class extends qd{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Zp;static allowedChildren=[Zp,Xp,Uf];constructor(t,e,n){let{emitter:i}=n;super(t,e),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",(t=>this.handleDragStart(t)))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(uf.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(uf.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(uf.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[n,i]=this.line(t),[r]=this.line(t+e);if(super.deleteAt(t,e),null!=r&&n!==r&&i>0){if(n instanceof Xp||r instanceof Xp)return void this.optimize();const t=r.children.head instanceof Hp?null:r.children.head;n.moveChildren(r,t),n.remove()}this.optimize()}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,n,i){super.formatAt(t,e,n,i),this.optimize()}insertAt(t,e,n){if(t>=this.length())if(null==n||null==this.scroll.query(e,ad.BLOCK)){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t),null==n&&e.endsWith("\n")?t.insertAt(0,e.slice(0,-1),n):t.insertAt(0,e,n)}else{const t=this.scroll.create(e,n);this.appendChild(t)}else super.insertAt(t,e,n);this.optimize()}insertBefore(t,e){if(t.statics.scope===ad.INLINE_BLOT){const n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(t),super.insertBefore(n,e)}else super.insertBefore(t,e)}insertContents(t,e){const n=this.deltaToRenderBlocks(e.concat((new Bd).insert("\n"))),i=n.pop();if(null==i)return;this.batchStart();const r=n.shift();if(r){const e="block"===r.type&&(0===r.delta.length()||!this.descendant(Xp,t)[0]&&t<this.length()),n="block"===r.type?r.delta:(new Bd).insert({[r.key]:r.value});Wf(this,t,n);const i="block"===r.type?1:0,o=t+n.length()+i;e&&this.insertAt(o-1,"\n");const s=Qp(this.line(t)[0]),a=Bd.AttributeMap.diff(s,r.attributes)||{};Object.keys(a).forEach((t=>{this.formatAt(o-1,1,t,a[t])})),t=o}let[o,s]=this.children.find(t);n.length&&(o&&(o=o.split(s),s=0),n.forEach((t=>{if("block"===t.type)Wf(this.createBlock(t.attributes,o||void 0),0,t.delta);else{const e=this.create(t.key,t.value);this.insertBefore(e,o||void 0),Object.keys(t.attributes).forEach((n=>{e.format(n,t.attributes[n])}))}}))),"block"===i.type&&i.delta.length()&&Wf(this,o?o.offset(o.scroll)+s:this.length(),i.delta),this.batchEnd(),this.optimize()}isEnabled(){return"true"===this.domNode.getAttribute("contenteditable")}leaf(t){const e=this.path(t).pop();if(!e)return[null,-1];const[n,i]=e;return n instanceof wd?[n,i]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(zf,t)}lines(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;const n=(t,e,i)=>{let r=[],o=i;return t.children.forEachAt(e,i,((t,e,i)=>{zf(t)?r.push(t):t instanceof Ld&&(r=r.concat(n(t,e,o))),o-=i})),r};return n(this,t,e)}optimize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(uf.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch)return void(Array.isArray(t)&&(this.batch=this.batch.concat(t)));let e=uf.sources.USER;"string"==typeof t&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),(t=t.filter((t=>{let{target:e}=t;const n=this.find(e,!0);return n&&!Hf(n)}))).length>0&&this.emitter.emit(uf.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(uf.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,n){const[i]=this.descendant((t=>t instanceof Xp),t);i&&i.statics.blotName===e&&Hf(i)&&i.updateContent(n)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let n=new Bd;return t.forEach((t=>{const i=t?.insert;if(i)if("string"==typeof i){const r=i.split("\n");r.slice(0,-1).forEach((i=>{n.insert(i,t.attributes),e.push({type:"block",delta:n,attributes:t.attributes??{}}),n=new Bd}));const o=r[r.length-1];o&&n.insert(o,t.attributes)}else{const r=Object.keys(i)[0];if(!r)return;this.query(r,ad.INLINE)?n.push(t):(n.length()&&e.push({type:"block",delta:n,attributes:{}}),n=new Bd,e.push({type:"blockEmbed",key:r,value:i[r],attributes:t.attributes??{}}))}})),n.length()&&e.push({type:"block",delta:n,attributes:{}}),e}createBlock(t,e){let n;const i={};Object.entries(t).forEach((t=>{let[e,r]=t;null!=this.query(e,ad.BLOCK&ad.BLOT)?n=e:i[e]=r}));const r=this.create(n||this.statics.defaultChild.blotName,n?t[n]:void 0);this.insertBefore(r,e||void 0);const o=r.length();return Object.entries(i).forEach((t=>{let[e,n]=t;r.formatAt(0,o,e,n)})),r}},"blots/text":Wp,"modules/clipboard":class extends Ef{static DEFAULTS={matchers:[]};constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",(t=>this.onCaptureCopy(t,!1))),this.quill.root.addEventListener("cut",(t=>this.onCaptureCopy(t,!0))),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Lm.concat(this.options.matchers??[]).forEach((t=>{let[e,n]=t;this.addMatcher(e,n)}))}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:n}=t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i[nm.blotName])return(new Bd).insert(n||"",{[nm.blotName]:i[nm.blotName]});if(!e)return(new Bd).insert(n||"",i);const r=this.convertHTML(e);return qm(r,"\n")&&(null==r.ops[r.ops.length-1].attributes||i.table)?r.compose((new Bd).retain(r.length()-1).delete(1)):r}normalizeHTML(t){(t=>{t.documentElement&&Sm.forEach((e=>{e(t)}))})(t)}convertHTML(t){const e=(new DOMParser).parseFromString(t,"text/html");this.normalizeHTML(e);const n=e.body,i=new WeakMap,[r,o]=this.prepareMatching(n,i);return Pm(this.quill.scroll,n,r,o,i)}dangerouslyPasteHTML(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jf.sources.API;if("string"==typeof t){const n=this.convert({html:t,text:""});this.quill.setContents(n,e),this.quill.setSelection(0,jf.sources.SILENT)}else{const i=this.convert({html:e,text:""});this.quill.updateContents((new Bd).retain(t).concat(i),n),this.quill.setSelection(t+i.length(),jf.sources.SILENT)}}onCaptureCopy(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.defaultPrevented)return;t.preventDefault();const[n]=this.quill.selection.getRange();if(null==n)return;const{html:i,text:r}=this.onCopy(n,e);t.clipboardData?.setData("text/plain",r),t.clipboardData?.setData("text/html",i),e&&_m({range:n,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter((t=>"#"!==t[0])).join("\n")}onCapturePaste(t){if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(!0);if(null==e)return;const n=t.clipboardData?.getData("text/html");let i=t.clipboardData?.getData("text/plain");if(!n&&!i){const e=t.clipboardData?.getData("text/uri-list");e&&(i=this.normalizeURIList(e))}const r=Array.from(t.clipboardData?.files||[]);if(!n&&r.length>0)this.quill.uploader.upload(e,r);else{if(n&&r.length>0){const t=(new DOMParser).parseFromString(n,"text/html");if(1===t.body.childElementCount&&"IMG"===t.body.firstElementChild?.tagName)return void this.quill.uploader.upload(e,r)}this.onPaste(e,{html:n,text:i})}}onCopy(t){const e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:n,html:i}=e;const r=this.quill.getFormat(t.index),o=this.convert({text:n,html:i},r);Tm.log("onPaste",o,{text:n,html:i});const s=(new Bd).retain(t.index).delete(t.length).concat(o);this.quill.updateContents(s,jf.sources.USER),this.quill.setSelection(s.length()-t.length,jf.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const n=[],i=[];return this.matchers.forEach((r=>{const[o,s]=r;switch(o){case Node.TEXT_NODE:i.push(s);break;case Node.ELEMENT_NODE:n.push(s);break;default:Array.from(t.querySelectorAll(o)).forEach((t=>{if(e.has(t)){const n=e.get(t);n?.push(s)}else e.set(t,[s])}))}})),[n,i]}},"modules/history":class extends Ef{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(t,e){super(t,e),this.quill.on(jf.events.EDITOR_CHANGE,((t,e,n,i)=>{t===jf.events.SELECTION_CHANGE?e&&i!==jf.sources.SILENT&&(this.currentRange=e):t===jf.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&i!==jf.sources.USER?this.transform(e):this.record(e,n)),this.currentRange=Um(this.currentRange,e))})),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",(t=>{"historyUndo"===t.inputType?(this.undo(),t.preventDefault()):"historyRedo"===t.inputType&&(this.redo(),t.preventDefault())}))}change(t,e){if(0===this.stack[t].length)return;const n=this.stack[t].pop();if(!n)return;const i=this.quill.getContents(),r=n.delta.invert(i);this.stack[e].push({delta:r,range:Um(n.range,r)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,jf.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,e){if(0===t.ops.length)return;this.stack.redo=[];let n=t.invert(e),i=this.currentRange;const r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){const t=this.stack.undo.pop();t&&(n=n.compose(t.delta),i=t.range)}else this.lastRecorded=r;0!==n.length()&&(this.stack.undo.push({delta:n,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){$m(this.stack.undo,t),$m(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,jf.sources.USER);else{const e=function(t,e){const n=e.reduce(((t,e)=>t+(e.delete||0)),0);let i=e.length()-n;return function(t,e){const n=e.ops[e.ops.length-1];return null!=n&&(null!=n.insert?"string"==typeof n.insert&&n.insert.endsWith("\n"):null!=n.attributes&&Object.keys(n.attributes).some((e=>null!=t.query(e,ad.BLOCK))))}(t,e)&&(i-=1),i}(this.quill.scroll,t.delta);this.quill.setSelection(e,jf.sources.USER)}}},"modules/keyboard":mm,"modules/uploader":Hm,"modules/input":class extends Ef{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",(t=>{this.handleBeforeInput(t)})),/Android/i.test(navigator.userAgent)||t.on(jf.events.COMPOSITION_BEFORE_START,(()=>{this.handleCompositionStart()}))}deleteRange(t){_m({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===t.length)return!1;if(e){const n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents((new Bd).retain(t.index).insert(e,n),jf.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,jf.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!Wm.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||!0===e.collapsed)return;const n=function(t){return"string"==typeof t.data?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}(t);if(null==n)return;const i=this.quill.selection.normalizeNative(e),r=i?this.quill.selection.normalizedToRange(i):null;r&&this.replaceText(r,n)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}},"modules/uiNode":class extends Ef{isListening=!1;selectionChangeDeadline=0;constructor(t,e){super(t,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,e){let{line:n,event:i}=e;if(!(n instanceof Ad&&n.uiNode))return!0;const r="rtl"===getComputedStyle(n.domNode).direction;return!!(r&&"ArrowRight"!==i.key||!r&&"ArrowLeft"!==i.key)||(this.quill.setSelection(t.index-1,t.length+(i.shiftKey?1:0),jf.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",(t=>{!t.defaultPrevented&&(t=>"ArrowLeft"===t.key||"ArrowRight"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key||"Home"===t.key||!(!Vm||"a"!==t.key||!0!==t.ctrlKey))(t)&&this.ensureListeningToSelectionChange()}))}ensureListeningToSelectionChange(){this.selectionChangeDeadline=Date.now()+100,this.isListening||(this.isListening=!0,document.addEventListener("selectionchange",(()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()}),{once:!0}))}handleSelectionChange(){const t=document.getSelection();if(!t)return;const e=t.getRangeAt(0);if(!0!==e.collapsed||0!==e.startOffset)return;const n=this.quill.scroll.find(e.startContainer);if(!(n instanceof Ad&&n.uiNode))return;const i=document.createRange();i.setStartAfter(n.uiNode),i.setEndAfter(n.uiNode),t.removeAllRanges(),t.addRange(i)}}});const Km=jf,Ym=new class extends pd{add(t,e){let n=0;if("+1"===e||"-1"===e){const i=this.value(t)||0;n="+1"===e?i+1:i-1}else"number"==typeof e&&(n=e);return 0===n?(this.remove(t),!0):super.add(t,n.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}("indent","ql-indent",{scope:ad.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),Zm=Ym;class Xm extends Uf{}Xm.blotName="list-container",Xm.tagName="OL";class Gm extends Zp{static create(t){const e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){jf.register(Xm)}constructor(t,e){super(t,e);const n=e.ownerDocument.createElement("span"),i=n=>{if(!t.isEnabled())return;const i=this.statics.formats(e,t);"checked"===i?(this.format("list","unchecked"),n.preventDefault()):"unchecked"===i&&(this.format("list","checked"),n.preventDefault())};n.addEventListener("mousedown",i),n.addEventListener("touchstart",i),this.attachUI(n)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}}Gm.blotName="list",Gm.tagName="LI",Xm.allowedChildren=[Gm],Gm.requiredContainer=Xm;const Qm=class extends Yp{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}};class Jm extends Yp{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(t){const e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return tg(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("href",this.constructor.sanitize(e)):super.format(t,e)}}function tg(t,e){const n=document.createElement("a");n.href=t;const i=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(i)>-1}const eg=["alt","height","width"],ng=["height","width"],ig=new pd("code-token","hljs",{scope:ad.INLINE});class rg extends Yp{static formats(t,e){for(;null!=t&&t!==e.domNode;){if(t.classList&&t.classList.contains(nm.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,n){super(t,e,n),ig.add(this.domNode,n)}format(t,e){t!==rg.blotName?super.format(t,e):e?ig.add(this.domNode,e):(ig.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),ig.value(this.domNode)||this.unwrap()}}rg.blotName="code-token",rg.className="ql-token";class og extends nm{static create(t){const e=super.create(t);return"string"==typeof t&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),rg.blotName,!1),super.replaceWith(t,e)}}class sg extends em{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===og.blotName&&(this.forceNext=!0,this.children.forEach((n=>{n.format(t,e)})))}formatAt(t,e,n,i){n===og.blotName&&(this.forceNext=!0),super.formatAt(t,e,n,i)}highlight(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.children.head)return;const n=`${Array.from(this.domNode.childNodes).filter((t=>t!==this.uiNode)).map((t=>t.textContent)).join("\n")}\n`,i=og.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==n){if(n.trim().length>0||null==this.cachedText){const e=this.children.reduce(((t,e)=>t.concat(Gp(e,!1))),new Bd),r=t(n,i);e.diff(r).reduce(((t,e)=>{let{retain:n,attributes:i}=e;return n?(i&&Object.keys(i).forEach((e=>{[og.blotName,rg.blotName].includes(e)&&this.formatAt(t,n,e,i[e])})),t+n):t}),0)}this.cachedText=n,this.forceNext=!1}}html(t,e){const[n]=this.children.find(t);return`<pre data-language="${n?og.formats(n.domNode):"plain"}">\n${Vp(this.code(t,e))}\n</pre>`}optimize(t){if(super.optimize(t),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){const t=og.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}sg.allowedChildren=[og],og.requiredContainer=sg,og.allowedChildren=[rg,tf,Wp,Hp];class ag extends Ef{static register(){jf.register(rg,!0),jf.register(og,!0),jf.register(sg,!0)}constructor(t,e){if(super(t,e),null==this.options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce(((t,e)=>{let{key:n}=e;return t[n]=!0,t}),{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(jf.events.SCROLL_BLOT_MOUNT,(t=>{if(!(t instanceof sg))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach((t=>{let{key:n,label:i}=t;const r=e.ownerDocument.createElement("option");r.textContent=i,r.setAttribute("value",n),e.appendChild(r)})),e.addEventListener("change",(()=>{t.format(og.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)})),null==t.uiNode&&(t.attachUI(e),t.children.head&&(e.value=og.formats(t.children.head.domNode)))}))}initTimer(){let t=null;this.quill.on(jf.events.SCROLL_OPTIMIZE,(()=>{t&&clearTimeout(t),t=setTimeout((()=>{this.highlight(),t=null}),this.options.interval)}))}highlight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(jf.sources.USER);const n=this.quill.getSelection();(null==t?this.quill.scroll.descendants(sg):[t]).forEach((t=>{t.highlight(this.highlightBlot,e)})),this.quill.update(jf.sources.SILENT),null!=n&&this.quill.setSelection(n,jf.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if(e=this.languages[e]?e:"plain","plain"===e)return Vp(t).split("\n").reduce(((t,n,i)=>(0!==i&&t.insert("\n",{[nm.blotName]:e}),t.insert(n))),new Bd);const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(nm.className),n.innerHTML=((t,e,n)=>{if("string"==typeof t.versionString){const i=t.versionString.split(".")[0];if(parseInt(i,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value})(this.options.hljs,e,t),Pm(this.quill.scroll,n,[(t,e)=>{const n=ig.value(t);return n?e.compose((new Bd).retain(e.length(),{[rg.blotName]:n})):e}],[(t,n)=>t.data.split("\n").reduce(((t,n,i)=>(0!==i&&t.insert("\n",{[nm.blotName]:e}),t.insert(n))),n)],new WeakMap)}}ag.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class lg extends Zp{static blotName="table";static tagName="TD";static create(t){const e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",dg()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===lg.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class cg extends Uf{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&null!=this.next.children.head){const t=this.children.head.formats(),e=this.children.tail.formats(),n=this.next.children.head.formats(),i=this.next.children.tail.formats();return t.table===e.table&&t.table===n.table&&t.table===i.table}return!1}optimize(t){super.optimize(t),this.children.forEach((t=>{if(null==t.next)return;const e=t.formats(),n=t.next.formats();if(e.table!==n.table){const e=this.splitAfter(t);e&&e.optimize(),this.prev&&this.prev.optimize()}}))}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class ug extends Uf{static blotName="table-body";static tagName="TBODY"}class hg extends Uf{static blotName="table-container";static tagName="TABLE";balanceCells(){const t=this.descendants(cg),e=t.reduce(((t,e)=>Math.max(e.children.length,t)),0);t.forEach((t=>{new Array(e-t.children.length).fill(0).forEach((()=>{let e;null!=t.children.head&&(e=lg.formats(t.children.head.domNode));const n=this.scroll.create(lg.blotName,e);t.appendChild(n),n.optimize()}))}))}cells(t){return this.rows().map((e=>e.children.at(t)))}deleteColumn(t){const[e]=this.descendant(ug);null!=e&&null!=e.children.head&&e.children.forEach((e=>{const n=e.children.at(t);null!=n&&n.remove()}))}insertColumn(t){const[e]=this.descendant(ug);null!=e&&null!=e.children.head&&e.children.forEach((e=>{const n=e.children.at(t),i=lg.formats(e.children.head.domNode),r=this.scroll.create(lg.blotName,i);e.insertBefore(r,n)}))}insertRow(t){const[e]=this.descendant(ug);if(null==e||null==e.children.head)return;const n=dg(),i=this.scroll.create(cg.blotName);e.children.head.children.forEach((()=>{const t=this.scroll.create(lg.blotName,n);i.appendChild(t)}));const r=e.children.at(t);e.insertBefore(i,r)}rows(){const t=this.children.head;return null==t?[]:t.children.map((t=>t))}}function dg(){return`row-${Math.random().toString(36).slice(2,6)}`}hg.allowedChildren=[ug],ug.requiredContainer=hg,ug.allowedChildren=[cg],cg.requiredContainer=ug,cg.allowedChildren=[lg],lg.requiredContainer=cg;const pg=lf("quill:toolbar");class fg extends Ef{constructor(t,e){if(super(t,e),Array.isArray(this.options.container)){const e=document.createElement("div");e.setAttribute("role","toolbar"),function(t,e){Array.isArray(e[0])||(e=[e]),e.forEach((e=>{const n=document.createElement("span");n.classList.add("ql-formats"),e.forEach((t=>{if("string"==typeof t)mg(n,t);else{const e=Object.keys(t)[0],i=t[e];Array.isArray(i)?function(t,e,n){const i=document.createElement("select");i.classList.add(`ql-${e}`),n.forEach((t=>{const e=document.createElement("option");!1!==t?e.setAttribute("value",String(t)):e.setAttribute("selected","selected"),i.appendChild(e)})),t.appendChild(i)}(n,e,i):mg(n,e,i)}})),t.appendChild(n)}))}(e,this.options.container),t.container?.parentNode?.insertBefore(e,t.container),this.container=e}else"string"==typeof this.options.container?this.container=document.querySelector(this.options.container):this.container=this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach((t=>{const e=this.options.handlers?.[t];e&&this.addHandler(t,e)})),Array.from(this.container.querySelectorAll("button, select")).forEach((t=>{this.attach(t)})),this.quill.on(jf.events.EDITOR_CHANGE,(()=>{const[t]=this.quill.selection.getRange();this.update(t)}))):pg.error("Container required for toolbar",this.options)}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find((t=>0===t.indexOf("ql-")));if(!e)return;if(e=e.slice(3),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[e]&&null==this.quill.scroll.query(e))return void pg.warn("ignoring attaching to nonexistent format",e,t);const n="SELECT"===t.tagName?"change":"click";t.addEventListener(n,(n=>{let i;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;const e=t.options[t.selectedIndex];i=!e.hasAttribute("selected")&&(e.value||!1)}else i=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),n.preventDefault();this.quill.focus();const[r]=this.quill.selection.getRange();if(null!=this.handlers[e])this.handlers[e].call(this,i);else if(this.quill.scroll.query(e).prototype instanceof Od){if(i=prompt(`Enter ${e}`),!i)return;this.quill.updateContents((new Bd).retain(r.index).delete(r.length).insert({[e]:i}),jf.sources.USER)}else this.quill.format(e,i,jf.sources.USER);this.update(r)})),this.controls.push([e,t])}update(t){const e=null==t?{}:this.quill.getFormat(t);this.controls.forEach((n=>{const[i,r]=n;if("SELECT"===r.tagName){let n=null;if(null==t)n=null;else if(null==e[i])n=r.querySelector("option[selected]");else if(!Array.isArray(e[i])){let t=e[i];"string"==typeof t&&(t=t.replace(/"/g,'\\"')),n=r.querySelector(`option[value="${t}"]`)}null==n?(r.value="",r.selectedIndex=-1):n.selected=!0}else if(null==t)r.classList.remove("ql-active"),r.setAttribute("aria-pressed","false");else if(r.hasAttribute("value")){const t=e[i],n=t===r.getAttribute("value")||null!=t&&t.toString()===r.getAttribute("value")||null==t&&!r.getAttribute("value");r.classList.toggle("ql-active",n),r.setAttribute("aria-pressed",n.toString())}else{const t=null!=e[i];r.classList.toggle("ql-active",t),r.setAttribute("aria-pressed",t.toString())}}))}}function mg(t,e,n){const i=document.createElement("button");i.setAttribute("type","button"),i.classList.add(`ql-${e}`),i.setAttribute("aria-pressed","false"),null!=n?(i.value=n,i.setAttribute("aria-label",`${e}: ${n}`)):i.setAttribute("aria-label",e),t.appendChild(i)}fg.DEFAULTS={},fg.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(null!=t)if(0===t.length){const t=this.quill.getFormat();Object.keys(t).forEach((t=>{null!=this.quill.scroll.query(t,ad.INLINE)&&this.quill.format(t,!1,jf.sources.USER)}))}else this.quill.removeFormat(t.index,t.length,jf.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();"rtl"===t&&null==e?this.quill.format("align","right",jf.sources.USER):t||"right"!==e||this.quill.format("align",!1,jf.sources.USER),this.quill.format("direction",t,jf.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),i=parseInt(n.indent||0,10);if("+1"===t||"-1"===t){let e="+1"===t?1:-1;"rtl"===n.direction&&(e*=-1),this.quill.format("indent",i+e,jf.sources.USER)}},link(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,jf.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);"check"===t?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,jf.sources.USER):this.quill.format("list","unchecked",jf.sources.USER):this.quill.format("list",t,jf.sources.USER)}}};const gg='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',vg={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:gg,"code-block":gg,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'};let bg=0;function yg(t,e){t.setAttribute(e,`${!("true"===t.getAttribute(e))}`)}const wg=class{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(()=>{this.togglePicker()})),this.label.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),yg(this.label,"aria-expanded"),yg(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const n=t.getAttribute("value");return n&&e.setAttribute("data-value",n),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",(()=>{this.selectItem(e,!0)})),e.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.selectItem(e,!0),t.preventDefault();break;case"Escape":this.escape(),t.preventDefault()}})),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${bg}`,bg+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach((e=>{const n=this.buildItem(e);t.appendChild(n),!0===e.selected&&this.selectItem(n)})),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach((t=>{this.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout((()=>this.label.focus()),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.container.querySelector(".ql-selected");t!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);const e=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}},_g=class extends wg{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach((t=>{t.classList.add("ql-primary")}))}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const n=this.label.querySelector(".ql-color-label"),i=t&&t.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=i:n.style.fill=i)}},xg=class extends wg{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach((t=>{t.innerHTML=e[t.getAttribute("data-value")||""]})),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const n=t||this.defaultItem;if(null!=n){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}},Eg=class{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(t=>{const{overflowY:e}=getComputedStyle(t,null);return"visible"!==e&&"clip"!==e})(this.quill.root)&&this.quill.root.addEventListener("scroll",(()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"})),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),r=this.root.getBoundingClientRect();let o=0;if(r.right>i.right&&(o=i.right-r.right,this.root.style.left=`${e+o}px`),r.left<i.left&&(o=i.left-r.left,this.root.style.left=`${e+o}px`),r.bottom>i.bottom){const e=r.bottom-r.top,i=t.bottom-t.top+e;this.root.style.top=n-i+"px",this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},Ag=[!1,"center","right","justify"],kg=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Ng=[!1,"serif","monospace"],Cg=["1","2","3",!1],Sg=["small",!1,"large","huge"];class Tg extends Sf{constructor(t,e){super(t,e);const n=e=>{document.body.contains(t.root)?(null==this.tooltip||this.tooltip.root.contains(e.target)||document.activeElement===this.tooltip.textbox||this.quill.hasFocus()||this.tooltip.hide(),null!=this.pickers&&this.pickers.forEach((t=>{t.container.contains(e.target)||t.close()}))):document.body.removeEventListener("click",n)};t.emitter.listenDOM("click",document.body,n)}addModule(t){const e=super.addModule(t);return"toolbar"===t&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach((t=>{(t.getAttribute("class")||"").split(/\s+/).forEach((n=>{if(n.startsWith("ql-")&&(n=n.slice(3),null!=e[n]))if("direction"===n)t.innerHTML=e[n][""]+e[n].rtl;else if("string"==typeof e[n])t.innerHTML=e[n];else{const i=t.value||"";null!=i&&e[n][i]&&(t.innerHTML=e[n][i])}}))}))}buildPickers(t,e){this.pickers=Array.from(t).map((t=>{if(t.classList.contains("ql-align")&&(null==t.querySelector("option")&&Og(t,Ag),"object"==typeof e.align))return new xg(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){const n=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&Og(t,kg,"background"===n?"#ffffff":"#000000"),new _g(t,e[n])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?Og(t,Ng):t.classList.contains("ql-header")?Og(t,Cg):t.classList.contains("ql-size")&&Og(t,Sg)),new wg(t)})),this.quill.on(uf.events.EDITOR_CHANGE,(()=>{this.pickers.forEach((t=>{t.update()}))}))}}Tg.DEFAULTS=od({},Sf.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");null==t&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",(()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""})),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Lg extends Eg{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",(t=>{"Enter"===t.key?(this.save(),t.preventDefault()):"Escape"===t.key&&(this.cancel(),t.preventDefault())}))}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null==this.textbox)return;null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);null!=n&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,uf.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,uf.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=function(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(null!=e){const n=e.index+e.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),t,uf.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(n+1," ",uf.sources.USER),this.quill.setSelection(n+2,uf.sources.USER)}break}}this.textbox.value="",this.hide()}}function Og(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((e=>{const i=document.createElement("option");e===n?i.setAttribute("selected","selected"):i.setAttribute("value",String(e)),t.appendChild(i)}))}const Ig=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Mg extends Lg{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(t,e){super(t,e),this.quill.on(uf.events.EDITOR_CHANGE,((t,e,n,i)=>{if(t===uf.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&i===uf.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const t=this.quill.getLines(e.index,e.length);if(1===t.length){const t=this.quill.getBounds(e);null!=t&&this.position(t)}else{const n=t[t.length-1],i=this.quill.getIndex(n),r=Math.min(n.length()-1,e.index+e.length-i),o=this.quill.getBounds(new df(i,r));null!=o&&this.position(o)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()}))}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",(()=>{this.root.classList.remove("ql-editing")})),this.quill.on(uf.events.SCROLL_OPTIMIZE,(()=>{setTimeout((()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(null!=t){const e=this.quill.getBounds(t);null!=e&&this.position(e)}}),1)}))}cancel(){this.show()}position(t){const e=super.position(t),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",0!==e&&(n.style.marginLeft=-1*e-n.offsetWidth/2+"px"),e}}class qg extends Tg{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=Ig),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new Mg(this.quill,this.options.bounds),null!=t.container&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),vg),this.buildPickers(t.container.querySelectorAll("select"),vg))}}qg.DEFAULTS=od({},Tg.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,jf.sources.USER)}}}}});const jg=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Dg extends Lg{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",(t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(t=>{if(null!=this.linkRange){const t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,uf.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()})),this.quill.on(uf.events.SELECTION_CHANGE,((t,e,n)=>{if(null!=t){if(0===t.length&&n===uf.sources.USER){const[e,n]=this.quill.scroll.descendant(Jm,t.index);if(null!=e){this.linkRange=new df(t.index-n,e.length());const i=Jm.formats(e.domNode);this.preview.textContent=i,this.preview.setAttribute("href",i),this.show();const r=this.quill.getBounds(this.linkRange);return void(null!=r&&this.position(r))}}else delete this.linkRange;this.hide()}}))}show(){super.show(),this.root.removeAttribute("data-mode")}}class Bg extends Tg{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=jg),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){null!=t.container&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),vg),this.buildPickers(t.container.querySelectorAll("select"),vg),this.tooltip=new Dg(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},((e,n)=>{t.handlers.link.call(t,!n.format.link)})))}}Bg.DEFAULTS=od({},Tg.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const t=this.quill.getSelection();if(null==t||0===t.length)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&0!==e.indexOf("mailto:")&&(e=`mailto:${e}`);const{tooltip:n}=this.quill.theme;n.edit("link",e)}else this.quill.format("link",!1,jf.sources.USER)}}}}});const Pg=Bg;Km.register({"attributors/attribute/direction":om,"attributors/class/align":Yf,"attributors/class/background":Jf,"attributors/class/color":Gf,"attributors/class/direction":sm,"attributors/class/font":cm,"attributors/class/size":hm,"attributors/style/align":Zf,"attributors/style/background":tm,"attributors/style/color":Qf,"attributors/style/direction":am,"attributors/style/font":um,"attributors/style/size":dm},!0),Km.register({"formats/align":Yf,"formats/direction":sm,"formats/indent":Zm,"formats/background":tm,"formats/color":Qf,"formats/font":cm,"formats/size":hm,"formats/blockquote":class extends Zp{static blotName="blockquote";static tagName="blockquote"},"formats/code-block":nm,"formats/header":class extends Zp{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(t){return this.tagName.indexOf(t.tagName)+1}},"formats/list":Gm,"formats/bold":Qm,"formats/code":im,"formats/italic":class extends Qm{static blotName="italic";static tagName=["EM","I"]},"formats/link":Jm,"formats/script":class extends Yp{static blotName="script";static tagName=["SUB","SUP"];static create(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):super.create(t)}static formats(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}},"formats/strike":class extends Qm{static blotName="strike";static tagName=["S","STRIKE"]},"formats/underline":class extends Yp{static blotName="underline";static tagName="U"},"formats/formula":class extends kf{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(t){if(null==window.katex)throw new Error("Formula module requires KaTeX.");const e=super.create(t);return"string"==typeof t&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}},"formats/image":class extends Od{static blotName="image";static tagName="IMG";static create(t){const e=super.create(t);return"string"==typeof t&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return eg.reduce(((e,n)=>(t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e)),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return tg(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){eg.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}},"formats/video":class extends Xp{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(t){const e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return ng.reduce(((e,n)=>(t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e)),{})}static sanitize(t){return Jm.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){ng.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}},"modules/syntax":ag,"modules/table":class extends Ef{static register(){jf.register(lg),jf.register(cg),jf.register(ug),jf.register(hg)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(hg).forEach((t=>{t.balanceCells()}))}deleteColumn(){const[t,,e]=this.getTable();null!=e&&(t.deleteColumn(e.cellOffset()),this.quill.update(jf.sources.USER))}deleteRow(){const[,t]=this.getTable();null!=t&&(t.remove(),this.quill.update(jf.sources.USER))}deleteTable(){const[t]=this.getTable();if(null==t)return;const e=t.offset();t.remove(),this.quill.update(jf.sources.USER),this.quill.setSelection(e,jf.sources.SILENT)}getTable(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(null==t)return[null,null,null,-1];const[e,n]=this.quill.getLine(t.index);if(null==e||e.statics.blotName!==lg.blotName)return[null,null,null,-1];const i=e.parent;return[i.parent.parent,i,e,n]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[n,i,r]=this.getTable(e);if(null==r)return;const o=r.cellOffset();n.insertColumn(o+t),this.quill.update(jf.sources.USER);let s=i.rowOffset();0===t&&(s+=1),this.quill.setSelection(e.index+s,e.length,jf.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[n,i,r]=this.getTable(e);if(null==r)return;const o=i.rowOffset();n.insertRow(o+t),this.quill.update(jf.sources.USER),t>0?this.quill.setSelection(e,jf.sources.SILENT):this.quill.setSelection(e.index+i.children.length,e.length,jf.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const n=this.quill.getSelection();if(null==n)return;const i=new Array(t).fill(0).reduce((t=>{const n=new Array(e).fill("\n").join("");return t.insert(n,{table:dg()})}),(new Bd).retain(n.index));this.quill.updateContents(i,jf.sources.USER),this.quill.setSelection(n.index,jf.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(jf.events.SCROLL_OPTIMIZE,(t=>{t.some((t=>!!["TD","TR","TBODY","TABLE"].includes(t.target.tagName)&&(this.quill.once(jf.events.TEXT_CHANGE,((t,e,n)=>{n===jf.sources.USER&&this.balanceTables()})),!0)))}))}},"modules/toolbar":fg,"themes/bubble":qg,"themes/snow":Pg,"ui/icons":vg,"ui/picker":wg,"ui/icon-picker":xg,"ui/color-picker":_g,"ui/tooltip":Eg},!0);const Rg=Km,Fg=Rg.import("blots/block/embed");class $g extends Fg{static blotName="custom-media";static tagName="div";static className="custom-media";static create(t){const e=super.create();e.setAttribute("data-nid",t.nid),e.setAttribute("data-nid-index",t.nidIndex),e.setAttribute("data-position",t.position||"center"),e.setAttribute("contenteditable","false");const n=document.createElement("img");n.setAttribute("src",t.thumbnailUrl),n.setAttribute("alt","Media Thumbnail"),n.classList.add("media-thumbnail"),n.setAttribute("contenteditable","false"),e.appendChild(n);const i=document.createElement("button");return i.type="button",i.classList.add("edit-media-button","btn","btn-sm","btn-primary"),i.setAttribute("aria-label","Edit Media"),i.innerHTML='<i class="fa fa-edit"></i>',e.appendChild(i),e}static value(t){const e=t.querySelector("img");return{nid:t.getAttribute("data-nid"),nidIndex:t.getAttribute("data-nid-index"),thumbnailUrl:e?e.getAttribute("src"):"",position:t.getAttribute("data-position")||"center"}}deleteAt(t,e){0===t&&e>=this.length()&&this.remove()}}Rg.register($g);const Ug=document.getElementById("pcwAudioPlayer"),zg=t=>{const e=Math.floor(t/3600),n=Math.floor(t%3600/60),i=Math.floor(t%60);return`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}`},Hg=t=>{const e=document.getElementById("captionBox"),n=t.cues;0===t.cues.length&&(console.log("No cues found"),setTimeout((()=>{console.log("Trying again..."),Hg(t)}),500));for(let t=0;t<n.length;t++){const i=n[t],r=i.text,o=zg(i.startTime),s=document.createElement("div");s.innerHTML=`<span class="audio-transcript-time">${o}</span> ${r}`,s.id=`cue${t}`,s.classList.add("audio-cue"),e.appendChild(s),i.onenter=function(){document.querySelector(".caption-box-active")?.classList.remove("caption-box-active"),s.classList.add("caption-box-active"),e.scrollTop=s.offsetTop-e.offsetTop},i.onexit=function(){s.classList.remove("caption-box-active")}}};document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".discover-filter__heading").forEach((function(t){let e=t.getAttribute("data-bs-target"),n=document.querySelector(e),i=t.querySelector(".arrow-icon");n&&i&&(n.addEventListener("show.bs.collapse",(function(){i.classList.add("arrow-icon-rotate")})),n.addEventListener("hide.bs.collapse",(function(){i.classList.remove("arrow-icon-rotate")})))}))})),function(){if(!document.getElementById("map"))return;const t=document.getElementById("map").dataset.mapType;Mt.load().then((async()=>{const{Map:e}=await google.maps.importLibrary("maps"),{AdvancedMarkerElement:n}=await google.maps.importLibrary("marker");Ot=new e(document.getElementById("map"),{center:It,zoom:11,mapId:"6a2c815609bc8f90",gestureHandling:"greedy",streetViewControl:!1}),Ot.addListener("bounds_changed",(()=>{(t=>{const e=t.getBounds(),n=e.getNorthEast(),i=e.getSouthWest(),r=n.lat(),o=i.lat(),s=i.lng(),a=n.lng();return r>=51.357&&o<=53.431&&a>=-5.508&&s<=-2.679})(Ot)?jt(!1):(qt("google"),jt(!0))})),"contribute"===t&&((t,e)=>{((t,e)=>{c.addEventListener("click",(()=>{const n=new e({map:t,position:t.getCenter(),title:"Item Location",gmpDraggable:!0});h.push(n);let i=n.position,r=i.lat,o=i.lng;d(r,o),n.addListener("dragend",(t=>{let e=n.position,i=e.lat,r=e.lng;d(i,r)})),p()}))})(t,e),u.addEventListener("click",(()=>{h.forEach((t=>t.setMap(null))),h=[],p(),document.getElementById("itemLocation").value=""}))})(Ot,n),"item"===t&&((t,e)=>{((t,e,n)=>{new e({map:t,position:n,title:"Item Location"})})(t,e,Lt)})(Ot,n),"collection"===t&&((t,e)=>{f.forEach((n=>{((t,e,n)=>{new e({map:t,position:n,title:"Item Location"})})(t,e,n.location)}))})(Ot,n),"locate"===t&&((t,e)=>{rt=t,ot=e,K.addEventListener("click",(t=>{t.preventDefault(),ft()})),Y.addEventListener("click",(t=>{t.preventDefault(),mt()})),Z.addEventListener("click",(t=>{t.preventDefault(),bt()})),X.addEventListener("click",(t=>{t.preventDefault(),yt()})),G.addEventListener("click",(t=>{t.preventDefault(),gt()})),it.addEventListener("change",(t=>{t.preventDefault(),pt()})),rt.addListener("bounds_changed",(()=>{"preview"!==ht&&(clearTimeout(ct),ct=setTimeout((()=>{Nt()}),500))}))})(Ot,n),document.querySelectorAll(".historical-map-layer").forEach((t=>{t.addEventListener("click",(t=>{let e=t.target;"P"===e.tagName&&(e=e.parentElement);let n=e.id;n=n.replace("map-layer-",""),qt(n)}))}))}))}(),document.querySelectorAll(".add-to-collection-story").forEach((t=>{t.addEventListener("click",Dt)})),qc&&(Bc(),Zs&&Array.from(Zs).forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault();const n=t.getAttribute("id");Gs(n),Xs()}))})),document.querySelectorAll(".translate-button").forEach((t=>{t.addEventListener("click",(t=>{switch(t.target.id){case"translate-title-welsh":(async()=>{const t=document.getElementById("contribute-english-title").value;if(""===t)return;const e=await Qs(t,"en","cy");document.getElementById("contribute-welsh-title").value=e,document.getElementById("titleTranslatedNotice").classList.remove("d-none")})();break;case"translate-title-english":(async()=>{const t=document.getElementById("contribute-welsh-title").value;if(""===t)return;const e=await Qs(t,"cy","en");document.getElementById("contribute-english-title").value=e})();break;case"translate-description-welsh":(async()=>{const t=document.getElementById("contribute-english-description").value;if(""===t)return;const e=await Qs(t,"en","cy");document.getElementById("contribute-welsh-description").value=e,document.getElementById("descriptionTranslatedNotice").classList.remove("d-none")})();break;case"translate-description-english":(async()=>{const t=document.getElementById("contribute-welsh-description").value;if(""===t)return;const e=await Qs(t,"cy","en");document.getElementById("contribute-english-description").value=e})();break;default:console.log("No translation available")}}))})),Pc(),(()=>{const t=document.querySelector("#my-autocomplete-container"),e="my-autocomplete";ea()({element:t,id:e,source:ia,onConfirm:t=>{null!=t&&(setTimeout((()=>{document.getElementById(e).value=""}),200),(t=>{na++,na>=7&&(document.getElementById("my-autocomplete-container").style.display="none");const e=document.getElementById("contribute-tags-list"),n=document.createElement("button");n.classList.add("btn","btn-primary","btn-sm","m-1"),n.innerHTML=t,e.appendChild(n),n.addEventListener("click",(t=>{na--,na<7&&(document.getElementById("my-autocomplete-container").style.display="block"),e.removeChild(n)}))})(t))}})})(),(()=>{const t=document.getElementById("contribute-manage-items");new oc(t,{swapThreshold:1,animation:150,onMove:function(t){console.log("moved")}})})(),Rc(),Fc()),(()=>{if(null===document.getElementById("dropzone"))return;let t=new Vc("div#dropzone",{url:"/file/post",autoProcessQueue:!1,addRemoveLinks:!0,acceptedMimeTypes:"image/png,image/jpeg,audio/mp4,video/mp4,audio/mp3,audio/mpeg,application/pdf",dictDefaultMessage:"",init:function(){this.on("addedfile",(t=>{setTimeout((()=>{this.emit("success",t),this.emit("complete",t)}),500)}))}});t.on("success",(t=>{})),t.on("removedfile",(t=>{Qc--,Jc()})),t.on("complete",(t=>{Qc++,Jc()})),t.on("error",((t,e)=>{console.log("error")}))})(),Gc&&Gc.addEventListener("click",(t=>{t.preventDefault(),eu()})),(()=>{const t=new Rg("#editor",{modules:{toolbar:"#toolbar-container",history:{delay:1e3,maxStack:100,userOnly:!0}},placeholder:"Tell a story ...",theme:"snow"}),e=[{nid:"1",nidIndex:"0",thumbnailUrl:"https://via.placeholder.com/150",position:"center"},{nid:"2",nidIndex:"1",thumbnailUrl:"https://via.placeholder.com/150/0000FF",position:"center"},{nid:"3",nidIndex:"2",thumbnailUrl:"https://via.placeholder.com/150/FF0000",position:"center"}];!function(){const t=document.getElementById("predefined-media-list");t.innerHTML="",e.forEach((e=>{const n=document.createElement("div");n.classList.add("col-md-3"),n.innerHTML=`\n          <div class="card mb-3">\n            <img src="${e.thumbnailUrl}" class="card-img-top" alt="Media">\n            <div class="card-body text-center">\n              <button class="btn btn-success select-media-button" data-nid="${e.nid}" data-nid-index="${e.nidIndex}" data-thumbnail-url="${e.thumbnailUrl}" data-position="${e.position}">\n                <i class="fa fa-check"></i> Select\n              </button>\n            </div>\n          </div>\n        `,t.appendChild(n)}))}(),document.getElementById("add-media-button").addEventListener("click",(()=>{new co(document.getElementById("addMediaModal")).show()})),document.getElementById("predefined-media-list").addEventListener("click",(function(e){if(e.preventDefault(),e.target.closest(".select-media-button")){const n=e.target.closest(".select-media-button");!function(e){if(!e||!e.nid||!e.thumbnailUrl)return void console.error("Invalid media data:",e);const n=t.getSelection(!0);t.insertEmbed(n.index,"custom-media",e,Rg.sources.USER),t.setSelection(n.index+1,Rg.sources.SILENT)}({nid:n.getAttribute("data-nid"),nidIndex:n.getAttribute("data-nid-index"),thumbnailUrl:n.getAttribute("data-thumbnail-url"),position:n.getAttribute("data-position")});const i=document.getElementById("addMediaModal");co.getInstance(i).hide()}})),t.root.addEventListener("click",(function(t){if(t.target.closest(".edit-media-button")){const e=t.target.closest(".custom-media");if(!e)return;const n=Rg.find(e);if(!n)return;const i=n.value();fetch(`/api/media/${i.nid}`).then((t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()})).then((t=>{!function(t){const e=document.getElementById("media-metadata");document.getElementById("media-options"),e.innerHTML=`\n        <h5>Metadata for Item ID: ${t.nid}</h5>\n        <p>${t.description||"No description available."}</p>\n        <div class="mb-3">\n          <label for="alternative-thumbnail" class="form-label">Select Thumbnail</label>\n          <select id="alternative-thumbnail" class="form-select">\n            ${t.thumbnails.map(((e,n)=>`\n              <option value="${e.url}" ${e.url===t.thumbnailUrl?"selected":""}>Thumbnail ${n+1}</option>\n            `)).join("")}\n          </select>\n        </div>\n        <div class="mb-3">\n          <label for="thumbnail-position" class="form-label">Position</label>\n          <select id="thumbnail-position" class="form-select">\n            <option value="left" ${"left"===t.position?"selected":""}>Left</option>\n            <option value="center" ${"center"===t.position?"selected":""}>Center</option>\n            <option value="right" ${"right"===t.position?"selected":""}>Right</option>\n          </select>\n        </div>\n      `}(t),new co(document.getElementById("editMediaModal")).show(),document.getElementById("editMediaModal").dataset.currentBlotNid=i.nid,document.getElementById("editMediaModal").dataset.currentBlotIndex=i.nidIndex})).catch((t=>{console.error("Error fetching media metadata:",t),alert("Failed to fetch media metadata.")}))}})),document.getElementById("save-media-changes").addEventListener("click",(()=>{const e=document.getElementById("editMediaModal"),n=e.dataset.currentBlotNid,i=e.dataset.currentBlotIndex,r=document.getElementById("alternative-thumbnail").value,o=document.getElementById("thumbnail-position").value;let s=!1;t.scroll.descendant($g,0).forEach((([e,a])=>{const l=e.value();l.nid===n&&l.nidIndex===i&&(t.deleteText(a,1,Rg.sources.USER),t.insertEmbed(a,"custom-media",{nid:n,nidIndex:i,thumbnailUrl:r,position:o},Rg.sources.USER),s=!0)})),s||console.warn("Blot not found for update:",n,i),co.getInstance(e).hide()})),t.on("text-change",(function(e,n,i){"user"===i&&t.root.querySelectorAll(".custom-media").forEach((t=>{Rg.find(t)||t.remove()}))})),t.on("text-change",(function(e,n,i){"user"===i&&e.ops.forEach((e=>{if(e.insert&&"object"==typeof e.insert&&e.insert["custom-media"]){const n=e.insert["custom-media"];if(!n.nid||!n.thumbnailUrl){console.error("Invalid media data detected:",n);const e=t.getSelection().index;t.deleteText(e-1,1,"user")}}}))})),t.root.addEventListener("click",(function(e){const n=e.target.closest(".custom-media");if(n){const e=Rg.find(n),i=t.getIndex(e);t.setSelection(i+1,Rg.sources.SILENT)}}))})(),Ug&&(document.addEventListener("DOMContentLoaded",(()=>{(()=>{const t=document.querySelector('track[kind="captions"]');Ug.readyState>=1?t.track?Hg(t.track):t.addEventListener("load",(()=>Hg(t.track))):Ug.addEventListener("loadedmetadata",(()=>{t.track?Hg(t.track):t.addEventListener("load",(()=>Hg(t.track)))}))})(),Ug.addEventListener("error",(t=>{console.error("Error loading audio:",t)}))})),(()=>{const t=document.getElementById("showAudioCaptions"),e=document.getElementById("hideAudioCaptions"),n=document.getElementById("audioCaptionsContainer");t.addEventListener("click",(()=>{t.style.display="none",e.style.display="block",n.style.display="block"})),e.addEventListener("click",(()=>{t.style.display="block",e.style.display="none",n.style.display="none"}))})())})()})();